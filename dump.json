[
  {
    "__docId__": 0,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/cli.js",
    "memberof": null,
    "longname": "src/cli.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport bytes from \"bytes\";\r\nimport parseTorrent from \"parse-torrent\";\r\nimport path from \"path\";\r\nimport program from \"commander\";\r\nimport prompt from \"prompt\";\r\nimport torrentHealth from \"torrent-tracker-health\";\r\n\r\nimport Index from \"./index\";\r\nimport AnimeHelper from \"./providers/helpers/animehelper\";\r\nimport MovieHelper from \"./providers/helpers/moviehelper\";\r\nimport ShowHelper from \"./providers/helpers/showhelper\";\r\nimport packageJSON from \"../package.json\";\r\nimport Setup from \"./config/setup\";\r\nimport Util from \"./util\";\r\n\r\n/** Class The class for the command line interface. */\r\nexport default class CLI {\r\n\r\n  /**\r\n   * Create a cli object.\r\n   * @param {String} [providerName=CLI] - The default provider name.\r\n   */\r\n  constructor(providerName = \"CLI\") {\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n      */\r\n    this._util = new Util();\r\n\r\n    // Setup the CLI program.\r\n    program\r\n      .version(`${packageJSON.name} v${packageJSON.version}`)\r\n      .option(\"-c, --content <type>\", \"Add content from the MongoDB database (anime | show | movie).\", /^(anime)|^(show)|^(movie)/i, false)\r\n      .option(\"-r, --run\", \"Run the API and start the scraping process.\")\r\n      .option(\"-s, --server\", \"Run the API without starting the scraping process.\")\r\n      .option(\"-e, --export <collection>\", \"Export a collection to a JSON file.\", /^(anime)|^(show)|^(movie)/i, false)\r\n      .option(\"-i, --import <collection>\", \"Import a JSON file to the database.\");\r\n\r\n    // Extra output on top of the default help output\r\n    program.on(\"--help\", () => {\r\n      console.info(\"  Examples:\");\r\n      console.info(\"\");\r\n      console.info(\"    $ popcorn-api -c <anime|movie|show>\");\r\n      console.info(\"    $ popcorn-api --content <anime|movie|show>\");\r\n      console.info(\"\");\r\n      console.info(\"    $ popcorn-api -r\");\r\n      console.info(\"    $ popcorn-api --run\");\r\n      console.info(\"\");\r\n      console.info(\"    $ popcorn-api -s\");\r\n      console.info(\"    $ popcorn-api --server\");\r\n      console.info(\"\");\r\n      console.info(\"    $ popcorn-api -e <anime|movie|show>\");\r\n      console.info(\"    $ popcorn-api --export <anime|movie|show>\");\r\n      console.info(\"\");\r\n      console.info(\"    $ popcorn-api -i <path-to-json>\");\r\n      console.info(\"    $ popcorn-api --import <path-to-json>\");\r\n      console.info(\"\");\r\n    });\r\n\r\n    // Parse the command line arguments.\r\n    program.parse(process.argv);\r\n\r\n    // The imdb property.\r\n    const imdb = {\r\n      description: \"The imdb id of the show/movie to add (tt1234567)\",\r\n      type: \"string\",\r\n      pattern: /^(tt\\d{7}|)|^(.*)/i,\r\n      message: \"Not a valid imdb id.\",\r\n      required: true\r\n    };\r\n\r\n    // The Hummingbird id property.\r\n    const hummingbirdId = {\r\n      description: \"The Hummingbird id of the anime to add\",\r\n      type: \"string\",\r\n      pattern: /^(.*)/i,\r\n      message: \"Not a validHhummingbird id.\",\r\n      required: true\r\n    };\r\n\r\n    // The torrent property.\r\n    const torrent = {\r\n      description: \"The link of the torrent to add\",\r\n      type: \"string\",\r\n      message: \"Not a valid torrent.\",\r\n      required: true\r\n    };\r\n\r\n    // The language property.\r\n    const language = {\r\n      description: \"The language of the torrent to add (en, fr, jp)\",\r\n      type: \"string\",\r\n      pattern: /^([a-zA-Z]{2})/i,\r\n      message: \"Not a valid language\",\r\n      required: true\r\n    };\r\n\r\n    // The quality property.\r\n    const quality = {\r\n      description: \"The quality of the torrent (480p | 720p | 1080p)\",\r\n      type: \"string\",\r\n      pattern: /^(480p|720p|1080p)/i,\r\n      message: \"Not a valid quality.\",\r\n      required: true\r\n    };\r\n\r\n    // The season property.\r\n    const season = {\r\n      description: \"The season number of the torrent\",\r\n      type: \"integer\",\r\n      pattern: /^(\\d+)/i,\r\n      message: \"Not a valid season.\",\r\n      required: true\r\n    };\r\n\r\n    // The episode property.\r\n    const episode = {\r\n      description: \"The episode number of the torrent\",\r\n      type: \"integer\",\r\n      pattern: /^(\\d+)/i,\r\n      message: \"Not a valid episode.\",\r\n      required: true\r\n    };\r\n\r\n    const confirm = {\r\n      description: \"Do you really want to import a collection, this can override the current data?\",\r\n      type: \"string\",\r\n      pattern: /^(yes|no|y|n)$/i,\r\n      message: \"Type yes/no\",\r\n      required: true,\r\n      default: \"no\"\r\n    };\r\n\r\n    /**\r\n     * The shema used by `prompt` insert an anime show.\r\n     * @type {Object}\r\n     */\r\n    this._animeSchema = {\r\n      properties: {\r\n        \"imdb\": hummingbirdId,\r\n        \"season\": season,\r\n        \"episode\": episode,\r\n        \"torrent\": torrent,\r\n        \"quality\": quality\r\n      }\r\n    };\r\n\r\n    /**\r\n     * The schema used by `prompt` insert a movie.\r\n     * @type {Object}\r\n     */\r\n    this._movieSchema = {\r\n      properties: {\r\n        \"imdb\": imdb,\r\n        \"language\": language,\r\n        \"torrent\": torrent,\r\n        \"quality\": quality\r\n      }\r\n    };\r\n\r\n    /**\r\n     * The schema used by `prompt` insert a show.\r\n     * @type {Object}\r\n     */\r\n    this._showSchema = {\r\n      properties: {\r\n        \"imdb\": imdb,\r\n        \"season\": season,\r\n        \"episode\": episode,\r\n        \"torrent\": torrent,\r\n        \"quality\": quality\r\n      }\r\n    };\r\n\r\n    /**\r\n     * The schema used by `prompt` to confirm an import.\r\n     * @type {Object}\r\n     */\r\n    this._importSchema = {\r\n      properties: {\r\n        \"confirm\": confirm\r\n      }\r\n    };\r\n  };\r\n\r\n  /** Adds a show to the database through the CLI. */\r\n  _animePrompt() {\r\n    prompt.get(this._showSchema, async(err, result) => {\r\n      if (err) {\r\n        console.error(`An error occurred: ${err}`);\r\n        process.exit(1);\r\n      } else {\r\n        try {\r\n          const { hummingbirdId, season, episode, quality, torrent } = result;\r\n          const animeHelper = new AnimeHelper(providerName);\r\n          const newAnime = await animeHelper.getHummingbirdInfo(hummingbirdId);\r\n          if (newAnime && newAnime._id) {\r\n            const data = await getShowTorrentDataRemote(torrent, quality, season, episode);\r\n            await animeHelper.addEpisodes(newAnime, data, hummingbirdId);\r\n            process.exit(0);\r\n          }\r\n        } catch (err) {\r\n          console.error(`An error occurred: ${err}`);\r\n          process.exit(1);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Get movie data from a given torrent url.\r\n   * @param {String} torrent - The url of the torrent.\r\n   * @param {String} language - The language of the torrent.\r\n   * @param {String} quality - The quality of the torrent.\r\n   * @returns {Promise} - Movie data from the torrent.\r\n   */\r\n  _getMovieTorrentDataRemote(torrent, language, quality) {\r\n    return new Promise((resolve, reject) => {\r\n      parseTorrent.remote(torrent, (err, result) => {\r\n        if (err) return reject(err);\r\n\r\n        const magnet = parseTorrent.toMagnetURI(result);\r\n        torrentHealth(magnet).then(res => {\r\n          const { seeds, peers } = res;\r\n          const data = {};\r\n          if (!data[language]) data[language] = {};\r\n          if (!data[language][quality]) data[language][quality] = {\r\n            url: magnet,\r\n            seed: seeds,\r\n            peer: peers,\r\n            size: result.length,\r\n            filesize: bytes(result.length),\r\n            provider: providerName\r\n          };\r\n          return resolve(data);\r\n        }).catch(err => reject(err));\r\n      });\r\n    });\r\n  };\r\n\r\n  /** Adds a movie to the database through the CLI. */\r\n  _moviePrompt() {\r\n    prompt.get(this._movieSchema, async(err, result) => {\r\n      if (err) {\r\n        console.error(`An error occurred: ${err}`);\r\n        process.exit(1);\r\n      } else {\r\n        try {\r\n          const { imdb, quality, language, torrent } = result;\r\n          const movieHelper = new MovieHelper(providerName);\r\n          const newMovie = await movieHelper.getTraktInfo(imdb);\r\n          if (newMovie && newMovie._id) {\r\n            const data = await getMovieTorrentDataRemote(torrent, language, quality);\r\n            await movieHelper.addTorrents(newMovie, data);\r\n            process.exit(0);\r\n          }\r\n        } catch (err) {\r\n          console.error(`An error occurred: ${err}`);\r\n          process.exit(1);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Get show data from a given torrent url.\r\n   * @param {String} torrent - The url of the torrent.\r\n   * @param {String} quality - The quality of the torrent.\r\n   * @param {Integer} season - The season of the show from the torrent file.\r\n   * @param {Integer} episode - The episode of the show from the torrent.\r\n   * @returns {Promise} - Show data from the torrent.\r\n   */\r\n  _getShowTorrentDataRemote(torrent, quality, season, episode) {\r\n    return new Promise((resolve, reject) => {\r\n      parseTorrent.remote(torrent, (err, result) => {\r\n        if (err) return reject(err);\r\n\r\n        const magnet = parseTorrent.toMagnetURI(result);\r\n        torrentHealth(magnet).then(res => {\r\n          const { seeds, peers } = res;\r\n          const data = {};\r\n          if (!data[season]) data[season] = {};\r\n          if (!data[season][episode]) data[season][episode] = {};\r\n          if (!data[season][episode][quality]) data[season][episode][quality] = {\r\n            url: magnet,\r\n            seeds,\r\n            peers,\r\n            provider: providerName\r\n          };\r\n          return resolve(data);\r\n        }).catch(err => reject(err));\r\n      });\r\n    });\r\n  };\r\n\r\n  /** Adds a show to the database through the CLI. */\r\n  _showPrompt() {\r\n    prompt.get(this._showSchema, async(err, result) => {\r\n      if (err) {\r\n        console.error(`An error occurred: ${err}`);\r\n        process.exit(1);\r\n      } else {\r\n        try {\r\n          const { imdb, season, episode, quality, torrent } = result;\r\n          const showHelper = new ShowHelper(providerName);\r\n          const newShow = await showHelper.getTraktInfo(imdb);\r\n          if (newShow && newShow._id) {\r\n            const data = await getShowTorrentDataRemote(torrent, quality, season, episode);\r\n            await showHelper.addEpisodes(newShow, data, imdb);\r\n            process.exit(0);\r\n          }\r\n        } catch (err) {\r\n          console.error(`An error occurred: ${err}`);\r\n          process.exit(1);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  /** Confimation to import a collection */\r\n  _importPrompt() {\r\n    prompt.get(this._importSchema, (err, result) => {\r\n      if (err) {\r\n        console.error(`An error occured: ${err}`);\r\n        process.exit(1);\r\n      } else {\r\n        if (result.confirm.match(/^(y|yes)/i)) {\r\n          let collection = path.basename(program.import);\r\n          const index = collection.lastIndexOf(\".\");\r\n          collection = collection.substring(0, index);\r\n          this._util.importCollection(collection, program.import)\r\n            .catch(err => console.error(err));\r\n        } else if (result.confirm.match(/^(n|no)/i)) {\r\n          process.exit(0);\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  /** Run the CLI program. */\r\n  run() {\r\n    if (program.run) {\r\n      new Index({\r\n        start: true,\r\n        pretty: true,\r\n        verbose: false,\r\n        debug: false\r\n      });\r\n    } else if (program.server) {\r\n      new Index({\r\n        start: false,\r\n        pretty: true,\r\n        verbose: false,\r\n        debug: false\r\n      });\r\n    } else if (program.content) {\r\n      prompt.start();\r\n      Setup.connectMongoDB();\r\n\r\n      if (program.content.match(/^(show)/i)) {\r\n        this._showPrompt();\r\n      } else if (program.content.match(/^(movie)/i)) {\r\n        this._moviePrompt();\r\n      }\r\n    } else if (program.export) {\r\n      this._util.exportCollection(program.export);\r\n    } else if (program.import) {\r\n      this._importPrompt();\r\n    } else {\r\n      console.error(\"\\n  \\x1b[31mError:\\x1b[36m No valid command given. Please check below:\\x1b[0m\");\r\n      program.help();\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 1,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "CLI",
    "memberof": "src/cli.js",
    "longname": "src/cli.js~CLI",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/cli.js",
    "importStyle": "CLI",
    "description": "Class The class for the command line interface.",
    "lineNumber": 18,
    "interface": false
  },
  {
    "__docId__": 2,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#constructor",
    "access": null,
    "description": "Create a cli object.",
    "lineNumber": 24,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "CLI",
        "defaultRaw": "CLI",
        "name": "providerName",
        "description": "The default provider name."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 3,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 4,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_animeSchema",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_animeSchema",
    "access": null,
    "description": "The shema used by `prompt` insert an anime show.",
    "lineNumber": 139,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 5,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_movieSchema",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_movieSchema",
    "access": null,
    "description": "The schema used by `prompt` insert a movie.",
    "lineNumber": 153,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 6,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_showSchema",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_showSchema",
    "access": null,
    "description": "The schema used by `prompt` insert a show.",
    "lineNumber": 166,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 7,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_importSchema",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_importSchema",
    "access": null,
    "description": "The schema used by `prompt` to confirm an import.",
    "lineNumber": 180,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 8,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_animePrompt",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_animePrompt",
    "access": null,
    "description": "Adds a show to the database through the CLI.",
    "lineNumber": 188,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 9,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getMovieTorrentDataRemote",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_getMovieTorrentDataRemote",
    "access": null,
    "description": "Get movie data from a given torrent url.",
    "lineNumber": 218,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - Movie data from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "The url of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "language",
        "description": "The language of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "quality",
        "description": "The quality of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Movie data from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 10,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_moviePrompt",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_moviePrompt",
    "access": null,
    "description": "Adds a movie to the database through the CLI.",
    "lineNumber": 243,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 11,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getShowTorrentDataRemote",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_getShowTorrentDataRemote",
    "access": null,
    "description": "Get show data from a given torrent url.",
    "lineNumber": 274,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - Show data from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "The url of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "quality",
        "description": "The quality of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "season",
        "description": "The season of the show from the torrent file."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "episode",
        "description": "The episode of the show from the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Show data from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 12,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_showPrompt",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_showPrompt",
    "access": null,
    "description": "Adds a show to the database through the CLI.",
    "lineNumber": 298,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 13,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_importPrompt",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#_importPrompt",
    "access": null,
    "description": "Confimation to import a collection",
    "lineNumber": 322,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 14,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "run",
    "memberof": "src/cli.js~CLI",
    "longname": "src/cli.js~CLI#run",
    "access": null,
    "description": "Run the CLI program.",
    "lineNumber": 342,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 15,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/config/constants.js",
    "memberof": null,
    "longname": "src/config/constants.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport path from \"path\";\r\nimport Trakt from \"trakt.tv\";\r\nimport TVDB from \"node-tvdb\";\r\n\r\n/**\r\n * Map object for correcting anime slugs.\r\n * @type {Object}\r\n */\r\nexport const animeMap = {\r\n  \"91-days\": \"ninety-one-days\",\r\n  \"ace-attorney\": \"gyakuten-saiban\",\r\n  \"ace-of-diamond\": \"diamond-no-ace\",\r\n  \"active-raid\": \"active-raid-kidou-kyoushuushitsu-dai-hakkei\",\r\n  \"ai-mai-mi-mousou-catastrophie\": \"ai-mai-mi-mousou-catastrophe\",\r\n  \"akagami-no-shirayukihime\": \"akagami-no-shirayuki-hime\",\r\n  \"akb0048\": \"akb0048-first-stage\",\r\n  \"alderamin-on-the-sky\": \"nejimaki-seirei-senki-tenkyou-no-alderamin\",\r\n  \"ani-tore-ex\": \"anitore-ex\",\r\n  \"argevollen\": \"shirogane-no-ishi-argevollen\",\r\n  \"arpeggio-of-blue-steel-ars-nova\": \"aoki-hagane-no-arpeggio-ars-nova\",\r\n  \"arslan-senki\": \"kigyou-senshi-arslan\",\r\n  \"assassination-classroom\": \"ansatsu-kyoushitsu\",\r\n  \"b-project\": \"b-project-kodou-ambitious\",\r\n  \"battle-girls-time-paradox\": \"sengoku-otome-momoiro-paradox\",\r\n  \"blazbluealter-memory\": \"blazblue-alter-memory\",\r\n  \"bonjour-sweet-love-patisserie\": \"bonjour-koiaji-patisserie\",\r\n  \"bottom-biting-bug\": \"oshiri-kajiri-mushi\",\r\n  \"brotherhoodfinal-fantasy-xv\": \"brotherhood-final-fantasy-xv\",\r\n  \"brynhildr-in-the-darkness\": \"gokukoku-no-brynhildr\",\r\n  \"cardfight-vanguard-g-girs-crisis\": \"cardfight-vanguard-g-gears-crisis-hen\",\r\n  \"chaos-dragon\": \"chaos-dragon-sekiryuu-seneki\",\r\n  \"concrete-revolutio\": \"concrete-revolutio-choujin-gensou\",\r\n  \"croisee-in-a-foreign-labyrinth\": \"ikoku-meiro-no-croisee\",\r\n  \"cross-ange\": \"cross-ange-tenshi-to-ryuu-no-rinbu\",\r\n  \"d.gray-man-hallow\": \"d-gray-man-hallow\",\r\n  \"daimidaler\": \"kenzen-robo-daimidaler\",\r\n  \"danganronpa-3-future-arc\": \"danganronpa-3-the-end-of-kibougamine-gakuen-mirai-hen\",\r\n  \"danganronpa-the-animation\": \"danganronpa-kibou-no-gakuen-to-zetsubou-no-koukousei-the-animation\",\r\n  \"danmachi\": \"dungeon-ni-deai-wo-motomeru-no-wa-machigatteiru-no-darou-ka\",\r\n  \"dd-hokuto-no-ken-2-ichigo-aji-\": \"dd-hokuto-no-ken-2-ichigo-aji\",\r\n  \"diabolik-lovers-more-blood\": \"diabolik-lovers-2nd-season\",\r\n  \"digimon-adventure-tri\": \"digimon-adventure-tri-4\",\r\n  \"dusk-maiden-of-amnesia\": \"tasogare-otome-x-amnesia\",\r\n  \"ebiten\": \"ebiten-kouritsu-ebisugawa-koukou-tenmonbu\",\r\n  \"engaged-to-the-unidentified\": \"mikakunin-de-shinkoukei\",\r\n  \"fuse-memoirs-of-the-hunter-girl\": \"fuse-teppou-musume-no-torimonochou\",\r\n  \"garo-the-animation\": \"garo-honoo-no-kokuin-special\",\r\n  \"garo-the-crimson-moon\": \"garo-guren-no-tsuki\",\r\n  \"garothe-crimson-moon\": \"garo-guren-no-tsuki\",\r\n  \"gate\": \"gate-jieitai-kanochi-nite-kaku-tatakaeri\",\r\n  \"gen-ei-o-kakeru-taiyou-il-sole-penetra-le-illusioni\": \"genei-wo-kakeru-taiyou\",\r\n  \"ghost-in-the-shell-arise-alternative-architecture\": \"ghost-in-the-shell-arise-tv\",\r\n  \"girl-friend-beta\": \"girlfriend-kari\",\r\n  \"gundam-reconguista-in-g\": \"gundam-g-no-reconguista\",\r\n  \"gundam-unicorn\": \"mobile-suit-gundam-unicorn\",\r\n  \"hackadoll-the-animation\": \"hacka-doll-the-animation\",\r\n  \"hakkenden-eight-dogs-of-the-east\": \"hakkenden-touhou-hakken-ibun\",\r\n  \"hakuoki-reimeiroku\": \"hakuouki-reimeiroku\",\r\n  \"hamatora\": \"hamatora-the-animation\",\r\n  \"haruchika\": \"haruchika-haruta-to-chika-wa-seishun-suru\",\r\n  \"hayate-no-gotoku-cuties\": \"hayate-the-combat-butler-cuties\",\r\n  \"hentai-ouji-to-warawanai-neko\": \"hentai-ouji-to-warawanai-neko-specials\",\r\n  \"hi-scoool-seha-girl\": \"sega-hard-girls\",\r\n  \"highschool-dxd-born\": \"high-school-dxd-born\",\r\n  \"hozuki-no-reitetsu\": \"hoozuki-no-reitetsu\",\r\n  \"hyperdimension-neptunia-the-animation\": \"choujigen-game-neptune-the-animation\",\r\n  \"imocho-another-shitty-sister-ln-adaptation\": \"saikin-imouto-no-yousu-ga-chotto-okashiin-da-ga\",\r\n  \"infinite-stratos-2\": \"is-infinite-stratos-2\",\r\n  \"inu-x-boku-secret-service\": \"inu-x-boku-ss\",\r\n  \"k-return-of-kings\": \"k-2015\",\r\n  \"k\": \"k-project\",\r\n  \"kaasan-mom-s-life\": \"mainichi-kaasan\",\r\n  \"kabaneri-of-the-iron-fortress\": \"koutetsujou-no-kabaneri\",\r\n  \"kaiji-s2-against-all-rules\": \"gyakkyou-burai-kaiji-hakairoku-hen\",\r\n  \"kaiji-ultimate-survivor\": \"gyakkyou-burai-kaiji-ultimate-survivor\",\r\n  \"kamisama-kiss-2\": \"kamisama-hajimemashita-2\",\r\n  \"kamisama-kiss\": \"kamisama-hajimemashita-kiss\",\r\n  \"kamisama-no-memo-chou\": \"kamisama-no-memochou\",\r\n  \"kateikyoushi-hitman-reborn\": \"katekyo-hitman-reborn\",\r\n  \"kindaichi-case-files-r\": \"kindaichi-shounen-no-jikenbo-returns\",\r\n  \"kuroko-s-basketball\": \"kuroko-no-basket\",\r\n  \"kuroshitsuji-book-of-circus\": \"black-butler-book-of-circus\",\r\n  \"kyoukaisenjou-no-horizon\": \"horizon-in-the-middle-of-nowhere\",\r\n  \"la-corda-d-oro-blue-sky\": \"kiniro-no-corda-blue-sky\",\r\n  \"la-storia-della-arcana-famiglia\": \"arcana-famiglia\",\r\n  \"lance-n--masques\": \"lance-n-masques\",\r\n  \"litchi-hikari-club\": \"litchi-de-hikari-club\",\r\n  \"little-witch-academia-the-enchanted-parade\": \"little-witch-academia-2\",\r\n  \"locodol\": \"futsuu-no-joshikousei-ga-locodol-yatte-mita\",\r\n  \"love-live-the-school-idol-movie\": \"love-live-school-idol-project-movie\",\r\n  \"luck-&-logic\": \"luck-logic\",\r\n  \"lupin-iii-(2015)\": \"lupin-iii\",\r\n  \"magi\": \"magi-the-labyrinth-of-magic\",\r\n  \"magic-kaito-1412\": \"magic-kaito-tv\",\r\n  \"magical-girl-lyrical-nanoha-the-movie-2nd\": \"mahou-shoujo-lyrical-nanoha-the-movie-2nd-a-s\",\r\n  \"mahouka\": \"mahouka-koukou-no-rettousei\",\r\n  \"majestic-prince\": \"ginga-kikoutai-majestic-prince\",\r\n  \"majikoi~oh-samurai-girls\": \"maji-de-watashi-ni-koi-shinasai\",\r\n  \"mangaka-san-to-assistant-san-to\": \"mangaka-san-to-assistant-san-to-the-animation\",\r\n  \"maoyuu-maou-yuusha\": \"maoyu\",\r\n  \"maria-the-virgin-witch\": \"junketsu-no-maria\",\r\n  \"mekakucity-actors\": \"mekaku-city-actors\",\r\n  \"mondaijitachi-ga-isekai-kara-kuru-sou-desu-yo\": \"problem-children-are-coming-from-another-world-aren-t-they\",\r\n  \"moretsu-pirates\": \"bodacious-space-pirates\",\r\n  \"moritasan-wa-mukuchi\": \"morita-san-wa-mukuchi\",\r\n  \"mushibugyo\": \"mushibugyou\",\r\n  \"mushishi-tokubetsu-hen-hihamukage\": \"mushishi-special-hihamukage\",\r\n  \"my-sister-came-onee-chan-ga-kita\": \"onee-chan-ga-kita\",\r\n  \"naruto-sd-rock-lee-no-seishun-full-power-ninden\": \"rock-lee-no-seishun-full-power-ninden\",\r\n  \"naruto-shippuuden\": \"naruto-shippuden\",\r\n  \"ninja-slayer\": \"ninja-slayer-from-animation\",\r\n  \"no-rin\": \"nourin\",\r\n  \"no.-6\": \"no-6\",\r\n  \"non-non-biyori-repeat\": \"non-non-biyori-2\",\r\n  \"noukome\": \"noucome-my-mental-choices-are-completely-interfering-with-my-school-romantic-comedy\",\r\n  \"okusama-ga-seitokaichou\": \"okusama-ga-seitokaichou-okusama-gekijou\",\r\n  \"one-piece-3d2y\": \"one-piece-3d2y-special\",\r\n  \"one-week-friends\": \"isshuukan-friends\",\r\n  \"ore-twintail-ni-narimasu\": \"ore-twintails-ni-narimasu\",\r\n  \"parasyte-the-maxim\": \"kiseijuu\",\r\n  \"phi-brain\": \"phi-brain-kami-no-puzzle\",\r\n  \"photo-kano\": \"photokano\",\r\n  \"planetarian\": \"planetarian-chiisana-hoshi-no-yume\",\r\n  \"polar-bear-cafe\": \"polar-bear-s-cafe\",\r\n  \"poyopoyo\": \"poyopoyo-kansatsu-nikki\",\r\n  \"puzzle-and-dragons-cross\": \"puzzle-dragons-x\",\r\n  \"ro-kyu-bu-fast-break\": \"ro-kyu-bu\",\r\n  \"robotics;notes\": \"robotics-notes\",\r\n  \"rowdy-sumo-wrestler-matsutaro\": \"abarenbou-kishi-matsutarou\",\r\n  \"rozen-maiden-(2013)\": \"rozen-maiden-zuruckspulen\",\r\n  \"ryuugajou-nanana-no-maizoukin\": \"ryuugajou-nanana-no-maizoukin-tv\",\r\n  \"saekano\": \"saenai-heroine-no-sodate-kata\",\r\n  \"sailor-moon-crystal\": \"bishoujo-senshi-sailor-moon-crystal\",\r\n  \"saint-seiya-the-lost-canvas\": \"saint-seiya-the-lost-canvas-meiou-shinwa\",\r\n  \"sakamichi-no-apollon\": \"kids-on-the-slope\",\r\n  \"saki-episode-of-side-a\": \"saki-achiga-hen-episode-of-side-a\",\r\n  \"saki-the-nationals\": \"saki-zenkoku-hen\",\r\n  \"seisen-cerberus\": \"seisen-cerberus-ryuukoku-no-fatalites\",\r\n  \"seitokai-no-ichizon-lv.2\": \"seitokai-no-ichizon-lv-2\",\r\n  \"sengoku-musou-sanada-no-shou\": \"sengoku-musou-sp-sanada-no-shou\",\r\n  \"senki-zesshou-symphogear-g\": \"senki-zesshou-symphogear-g-in-the-distance-that-day-when-the-star-became-music\",\r\n  \"senki-zesshou-symphogear-gx\": \"senki-zesshou-symphogear-3\",\r\n  \"senki-zesshou-symphogear\": \"senki-zesshou-symphogear-meteoroid-falling-burning-and-disappear-then\",\r\n  \"seraph-of-the-end\": \"owari-no-seraph\",\r\n  \"she-and-her-cat-everything-flows\": \"kanojo-to-kanojo-no-neko-everything-flows\",\r\n  \"she-and-her-cat\": \"kanojo-to-kanojo-no-neko\",\r\n  \"shimoneta\": \"shimoneta-to-iu-gainen-ga-sonzai-shinai-taikutsu-na-sekai\",\r\n  \"shin-atashinchi\": \"shin-atashin-chi\",\r\n  \"shin-sekai-yori\": \"shinsekai-yori\",\r\n  \"shin-strange-\": \"shin-strange\",\r\n  \"shingeki-no-kyojin\": \"attack-on-titan\",\r\n  \"shokugeki-no-soma\": \"shokugeki-no-souma\",\r\n  \"shomin-sample\": \"ore-ga-ojou-sama-gakkou-ni-shomin-sample-toshite-rachirareta-ken\",\r\n  \"shounen-hollywood\": \"shounen-hollywood-holly-stage-for-49\",\r\n  \"so-i-can-t-play-h\": \"dakara-boku-wa-h-ga-dekinai\",\r\n  \"soniani-super-sonico-the-animation\": \"super-sonico-the-animation\",\r\n  \"space-brothers\": \"uchuu-kyoudai\",\r\n  \"space-dandy-2\": \"space-dandy-2nd-season\",\r\n  \"space-patrol-luluco\": \"uchuu-patrol-luluco\",\r\n  \"steins;gate\": \"steins-gate\",\r\n  \"stella-jogakuin-koutouka-c3-bu\": \"stella-jogakuin-koutou-ka-c-bu\",\r\n  \"straight-title-robot-anime\": \"chokkyuu-hyoudai-robot-anime-straight-title\",\r\n  \"strange-\": \"strange\",\r\n  \"suisei-no-gargantia\": \"gargantia-on-the-verdurous-planet\",\r\n  \"sukitte-ii-na-yo.\": \"sukitte-ii-na-yo\",\r\n  \"teekyu\": \"teekyuu\",\r\n  \"the-disappearance-of-nagato-yuki-chan\": \"nagato-yuki-chan-no-shoushitsu\",\r\n  \"the-idolm@ster-cinderella-girls\": \"the-idolm-ster-cinderella-girls\",\r\n  \"the-idolm@ster\": \"the-idolm-ster\",\r\n  \"the-knight-in-the-area\": \"area-no-kishi\",\r\n  \"the-new-prince-of-tennis-ova-vs-genius10\": \"new-prince-of-tennis-ova-vs-genius10\",\r\n  \"the-new-prince-of-tennis-specials\": \"new-prince-of-tennis-specials\",\r\n  \"the-new-prince-of-tennis\": \"new-prince-of-tennis\",\r\n  \"the-pilot-s-love-song\": \"toaru-hikuushi-e-no-koiuta\",\r\n  \"the-world-god-only-knows-goddesses-arc\": \"the-world-god-only-knows-goddess-arc\",\r\n  \"time-travel-shoujo\": \"time-travel-shoujo-mari-waka-to-8-nin-no-kagakusha-tachi\",\r\n  \"tokyo-ghoul-root-a\": \"tokyo-ghoul-2\",\r\n  \"tonari-no-kaibutsu-kun\": \"my-little-monster\",\r\n  \"tsukiuta.-the-animation\": \"tsukiuta-the-animation\",\r\n  \"twin-angel-twinkle-paradise\": \"kaitou-tenshi-twin-angel-kyun-kyun-tokimeki-paradise\",\r\n  \"unlimited-fafnir\": \"juuou-mujin-no-fafnir\",\r\n  \"usagi-drop\": \"bunny-drop\",\r\n  \"uta-no-prince-sama-2\": \"uta-no-prince-sama-maji-love-2000\",\r\n  \"uta-no-prince-sama-revolutions\": \"uta-no-prince-sama-maji-love-3\",\r\n  \"uta-no-prince-sama\": \"uta-no-prince-sama-maji-love-1000\",\r\n  \"utakoi\": \"chouyaku-hyakuninisshu-uta-koi\",\r\n  \"valvrave-the-liberator\": \"kakumeiki-valvrave\",\r\n  \"wake-up-girls-seven-idols\": \"wake-up-girls-shichinin-no-idol\",\r\n  \"wake-up-girls-zoo\": \"wake-up-girl-zoo\",\r\n  \"watamote\": \"watashi-ga-motenai-no-wa-dou-kangaetemo-omaera-ga-warui\",\r\n  \"wooser-no-sono-higurashi-mugen-hen\": \"wooser-no-sono-higurashi\",\r\n  \"working'\": \"working-2\",\r\n  \"working\": \"working-1\",\r\n  \"yahari-ore-no-seishun-love-come-wa-machigatteiru-zoku\": \"yahari-ore-no-seishun-love-comedy-wa-machigatteiru-zoku\",\r\n  \"yahari-ore-no-seishun-love-come-wa-machigatteiru\": \"yahari-ore-no-seishun-love-comedy-wa-machigatteiru-ova\",\r\n  \"yama-no-susume-2\": \"yama-no-susume-second-season-ova\",\r\n  \"yamada-kun-and-the-seven-witches\": \"yamada-kun-to-7-nin-no-majo\",\r\n  \"yami-shibai-japanese-ghost-stories-2\": \"yami-shibai-2nd-season\",\r\n  \"yami-shibai-japanese-ghost-stories-3\": \"yami-shibai-3rd-season\",\r\n  \"yami-shibai-japanese-ghost-stories\": \"yami-shibai\",\r\n  \"yuki-yuna-wa-yusha-de-aru\": \"yuuki-yuuna-wa-yuusha-de-aru\",\r\n  \"yurumate3dei\": \"yurumates-3d\",\r\n  \"yuruyuri\": \"yuru-yuri\",\r\n  \"yuushibu\": \"yuusha-ni-narenakatta-ore-wa-shibushibu-shuushoku-wo-ketsui-shimashita\",\r\n  \"zero-no-tsukaima-final\": \"zero-no-tsukaima-f\",\r\n  \"zx-ignition\": \"z-x-ignition\"\r\n};\r\n\r\n/**\r\n * An array of the supported collections for mongodb.\r\n * @type {Array}\r\n */\r\nexport const collections = [\"anime\", \"movie\", \"show\"];\r\n\r\n/**\r\n * The cron time for scraping torrents. Default is `0 0 *\\/6 * * *`.\r\n * @type {String}\r\n */\r\nexport const cronTime = \"0 0 */6 * * *\";\r\n\r\n/**\r\n * The host of the server of the database. Default is `[\"localhost\"]`.\r\n * @type {Array}\r\n */\r\nexport const dbHosts = [\"localhost\"];\r\n\r\n/**\r\n * The name of the database. Default is `popcorn`.\r\n * @type {String}\r\n */\r\nexport const dbName = \"popcorn\";\r\n\r\n/**\r\n * The providers for scraping ExtraTorrent for anime.\r\n * @type {Array}\r\n */\r\nexport const extratorrentAnimeProviders = [];\r\n\r\n/**\r\n * The providers for scraping ExtraTorrent for movies.\r\n * @type {Array}\r\n */\r\nexport const extratorrentMovieProviders = [\r\n  // {name: \"ETRG BRRip\", query: {with_words: \"etrg x264 brrip\"}},\r\n  // {name: \"ETRG BluRay\", query: {with_words: \"etrg x264 bluray\"}},\r\n  {name: \"YIFY\", query: {with_words: \"x264 yify brrip\"}}\r\n];\r\n\r\n/**\r\n * The providers for scraping ExtraTorrent for shows.\r\n * @type {Array}\r\n */\r\nexport const extratorrentShowProviders = [\r\n  // 480p\r\n  {name: \"ETTV LOL\", query: {with_words: \"ettv hdtv x264 lol\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV KILLERS\", query: {with_words: \"ettv hdtv x264 killers\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV 2HD\", query: {with_words: \"ettv hdtv x264 2hd\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV CROOKS\", query: {with_words: \"ettv hdtv x264 crooks\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV FUM\", query: {with_words: \"ettv hdtv x264 fum\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV BATV\", query: {with_words: \"ettv hdtv x264 batv\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV ASAP\", query: {with_words: \"ettv hdtv x264 asap\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV TLA\", query: {with_words: \"ettv hdtv x264 tla\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV W4F\", query: {with_words: \"ettv hdtv x264 w4f\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV EVOLVE\", query: {with_words: \"ettv hdtv x264 EVOLVE\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV ORGANiC\", query: {with_words: \"ettv hdtv x264 organic\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV BAJSKORV\", query: {with_words: \"ettv hdtv x264 bajskorv\", without: \"720p 1080p\"}},\r\n  {name: \"ETTV RiVER\", query: {with_words: \"ettv hdtv x264 river\", without: \"720p 1080p\"}},\r\n\r\n  // 720p\r\n  {name: \"ETTV 720p\", query: {with_words: \"ettv hdtv x264 720p\"}},\r\n  {name: \"ETHD 720p\", query: {with_words: \"ethd hdtv x264 720p\"}},\r\n\r\n  // 1080p\r\n  {name: \"1080p\", query: {width_words: \"hdtv x264 1080p\"}}\r\n];\r\n\r\n/**\r\n * The providers for scraping KAT for anime.\r\n * @type {Array}\r\n */\r\nexport const katAnimeProviders = [];\r\n\r\n/**\r\n * The providers for scraping KAT for movies.\r\n * @type {Array}\r\n */\r\nexport const katMovieProviders = [\r\n  // English providers\r\n  {name: \"Megaradon\", query: {query: \"x264 720p | 1080p\", uploader: \"megaradon\", language: \"en\"}},\r\n  {name: \"Z0n321\", query: {query: \"x264 720p | 1080p\", uploader: \"z0n321\", language: \"en\"}},\r\n\r\n  // French providers\r\n  {name: \"French\", query: {query: \"720p | 1080p\", language: \"fr\"}},\r\n  // German providers\r\n  {name: \"German\", query: {query: \"720p | 1080p\", language: \"de\"}},\r\n  // Spanish providers\r\n  {name: \"Spanish\", query: {query: \"720p | 1080p\", language: \"es\"}},\r\n  // Ductch providers\r\n  {name: \"Dutch\", query: {query: \"720p | 1080p\", language: \"nl\"}}\r\n];\r\n\r\n/**\r\n * The providers for scraping KAT for shows.\r\n * @type {Array}\r\n */\r\nexport const katShowProviders = [\r\n  // 720p and 1080p providers\r\n  {name: \"Zoner720p\", query: {query: \"x264 720p\", uploader: \"z0n321\"}},\r\n  {name: \"Zoner1080p\", query: {query: \"x264 1080p\", uploader: \"z0n321\"}},\r\n  {name: \"Brasse0\", query: {query: \"x264\", uploader: \"brasse0\"}},\r\n  {name: \"ETHD\", query: {query: \"x264\", uploader: \"ethd\"}},\r\n\r\n  // Uploader providers\r\n  {name: \"ETTV\", query: {query: \"x264\", uploader: \"ettv\"}},\r\n  {name: \"KAT_EZTV\", query: {query: \"x264\", uploader: \"eztv\"}},\r\n  {name: \"VTV\", query: {query: \"x264\", uploader: \"vtv\"}},\r\n  {name: \"SRIGGA\", query: {query: \"x264\", uploader: \"ethd\"}},\r\n\r\n  // Zoner providers\r\n  {name: \"ZonerSD\", query: {query: \"x264 LOL | FLEET | KILLERS | W4F\", uploader: \"z0n321\"}}\r\n];\r\n\r\n/**\r\n * The providers for scraping Nyaa for anime.\r\n * @type {Array}\r\n */\r\nexport const nyaaAnimeProviders = [\r\n  {name: \"Commie\", query: {term: \"mkv\", user: 76430, filter: \"trusted_only\"}},\r\n  {name: \"FFF\", query: {term: \"mkv\", user: 73859, filter: \"trusted_only\"}},\r\n  {name: \"gg\", query: {term: \"mkv\", user: 9001, filter: \"trusted_only\"}}\r\n];\r\n\r\n/**\r\n * Check if this instance of the API is the master. Default is `true`.\r\n * @type {Boolean}\r\n */\r\nexport const master = true;\r\n\r\n/**\r\n * The maximum web requests can take place at the same time. Default is `2`.\r\n * @type {Integer}\r\n */\r\nexport const maxWebRequest = 2;\r\n\r\n/**\r\n * Map object for correcting movie slugs.\r\n * @type {Object}\r\n */\r\nexport const movieMap = {};\r\n\r\n/**\r\n * The amount of object show per page. Default is `50`.\r\n * @type {Integer}\r\n */\r\nexport const pageSize = 50;\r\n\r\n/**\r\n * The port on which the API will run on. Default is `5000`.\r\n * @type {Integer}\r\n */\r\nexport const port = 5000;\r\n\r\n/**\r\n * The promise object to override the mongoose promise object. Default is `global.Promise`.\r\n * @type {Promise}\r\n */\r\nexport const Promise = global.Promise;\r\n\r\n/**\r\n * The name of the server. Default is `serv01`.\r\n * @type {String}\r\n */\r\nexport const server = \"serv01\";\r\n\r\n/**\r\n * Map object for correcting show slugs.\r\n * @type {Object}\r\n */\r\nexport const showMap = {\r\n  \"60-minutes-us\": \"60-minutes\",\r\n  \"american-crime\": \"american-crime-1969\",\r\n  \"bachelor-live\": \"the-bachelor-live\",\r\n  \"ballers-2015\": \"ballers\",\r\n  \"big-brother-us\": \"big-brother-2000\",\r\n  \"blackish\": \"black-ish\",\r\n  \"bobs-burgers\": \"bob-s-burgers\",\r\n  \"bordertown-2015\": \"bordertown-2016\",\r\n  \"celebrity-big-brother\": \"celebrity-big-brother-2001\",\r\n  \"chicago-pd\": \"chicago-p-d\",\r\n  \"childrens-hospital-us\": \"childrens-hospital\",\r\n  \"cooper-barretts-guide-to-surviving-life\": \"cooper-barrett-s-guide-to-surviving-life-2016\",\r\n  \"cosmos-a-space-time-odyssey\": \"cosmos-a-spacetime-odyssey\",\r\n  \"dcs-legends-of-tomorrow\": \"dc-s-legends-of-tomorrow\",\r\n  \"doll-and-em\": \"doll-em\",\r\n  \"gold-rush\": \"gold-rush-2010\",\r\n  \"greys-anatomy\": \"grey-s-anatomy\",\r\n  \"hawaii-five-0-2010\": \"hawaii-five-0\",\r\n  \"heartland-ca\": \"heartland-2007-ca\",\r\n  \"hells-kitchen-us\": \"hell-s-kitchen-2005\",\r\n  \"house-of-cards-2013\": \"house-of-cards\",\r\n  \"how-its-made-dream-cars\": \"how-it-s-made-dream-cars\",\r\n  \"how-its-made\": \"how-it-s-made\",\r\n  \"intelligence-us\": \"intelligence-2014\",\r\n  \"its-always-sunny-in-philadelphia\": \"it-s-always-sunny-in-philadelphia\",\r\n  \"james-mays-cars-of-the-people\": \"james-may-s-cars-of-the-people\",\r\n  \"jericho-2016\": \"jericho-1969\",\r\n  \"kitchen-nightmares-us\": \"kitchen-nightmares\",\r\n  \"last-man-standing-us\": \"last-man-standing-2011\",\r\n  \"law-and-order-svu\": \"law-order-special-victims-unit\",\r\n  \"marvels-agent-carter\": \"marvel-s-agent-carter\",\r\n  \"marvels-agents-of-s-h-i-e-l-d\": \"marvel-s-agents-of-s-h-i-e-l-d\",\r\n  \"marvels-daredevil\": \"marvel-s-daredevil\",\r\n  \"marvels-jessica-jones\": \"marvel-s-jessica-jones\",\r\n  \"mike-and-molly\": \"mike-molly\",\r\n  \"perception\": \"perception-2012\",\r\n  \"power-2014\": \"power\",\r\n  \"prey-uk\": \"prey-2014\",\r\n  \"proof-us\": \"proof\",\r\n  \"reckless\": \"reckless-2014\",\r\n  \"resurrection-us\": \"resurrection-2014\",\r\n  \"revolution-2012\": \"revolution\",\r\n  \"rush-us\": \"rush-2014\",\r\n  \"sanctuary-us\": \"sanctuary\",\r\n  \"satisfaction-us\": \"satisfaction-2014\",\r\n  \"scandal-us\": \"scandal\",\r\n  \"schitts-creek\": \"schitt-s-creek\",\r\n  \"second-chance\": \"second-chance-2016\",\r\n  \"stan-lees-lucky-man\": \"stan-lee-s-lucky-man\",\r\n  \"survivors-remorse\": \"survivor-s-remorse\",\r\n  \"teen-wolf\": \"teen-wolf-2011\",\r\n  \"the-bridge-us\": \"the-bridge-2013\",\r\n  \"the-comedians-us\": \"the-comedians-2015\",\r\n  \"the-kennedys-uk\": \"the-kennedys-2015\",\r\n  \"the-league\": \"the-league-2009\",\r\n  \"the-librarians-us\": \"the-librarians-2014\",\r\n  \"the-magicians-us\": \"the-magicians\",\r\n  \"this-is-england-90\": \"this-is-england-90-2015\",\r\n  \"whose-line-is-it-anyway-us\": \"whose-line-is-it-anyway-1998\",\r\n  \"young-and-hungry\": \"young-hungry\",\r\n  \"youre-the-worst-2014\": \"you-re-the-worst\",\r\n  \"youre-the-worst\": \"you-re-the-worst\"\r\n};\r\n\r\n/**\r\n * The name of the status file holding the `status` value for the index page. Default is `status.json`.\r\n * @type {String}\r\n */\r\nexport const statusFile = \"status.json\";\r\n\r\n/**\r\n * The path to the temprary directory.. Default is `./tmp`.\r\n * @type {String}\r\n */\r\nexport const tempDir = path.join(process.cwd(), \"tmp\");\r\n\r\n/**\r\n * The timezone the conjob will hold. Default is `America/Los_Angeles`.\r\n * @type {String}\r\n */\r\nexport const timeZone = \"America/Los_Angeles\";\r\n\r\n/**\r\n * A configured Trakt API.\r\n * @type {Trakt}\r\n */\r\nexport const trakt = new Trakt({client_id: \"70c43f8f4c0de74a33ac1e66b6067f11d14ad13e33cd4ebd08860ba8be014907\"});\r\n\r\n/**\r\n * A configured TVDB API.\r\n * @type {TVDB}\r\n */\r\nexport const tvdb = new TVDB(\"B17D23818D6E884D\");\r\n\r\n/**\r\n * The name of the updated file holding the `updated` value for the index page. Default is `lastUpdated.json`.\r\n * @type {String}\r\n */\r\nexport const updatedFile = \"lastUpdated.json\";\r\n\r\n/**\r\n * The maximum time a web request may take. Default is `2` seconds.\r\n * @type {Integer}\r\n */\r\nexport const webRequestTimeout = 2;\r\n\r\n/**\r\n * The amount of workers on the cluster. Default is `2`.\r\n * @type {Integer}\r\n */\r\nexport const workers = 2;\r\n"
  },
  {
    "__docId__": 16,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "animeMap",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~animeMap",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{animeMap}",
    "description": "Map object for correcting anime slugs.",
    "lineNumber": 10,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 17,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "collections",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~collections",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{collections}",
    "description": "An array of the supported collections for mongodb.",
    "lineNumber": 214,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 18,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "cronTime",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~cronTime",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{cronTime}",
    "description": "The cron time for scraping torrents. Default is `0 0 *\\/6 * * *`.",
    "lineNumber": 220,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 19,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "dbHosts",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~dbHosts",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{dbHosts}",
    "description": "The host of the server of the database. Default is `[\"localhost\"]`.",
    "lineNumber": 226,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 20,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "dbName",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~dbName",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{dbName}",
    "description": "The name of the database. Default is `popcorn`.",
    "lineNumber": 232,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 21,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "extratorrentAnimeProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~extratorrentAnimeProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{extratorrentAnimeProviders}",
    "description": "The providers for scraping ExtraTorrent for anime.",
    "lineNumber": 238,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 22,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "extratorrentMovieProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~extratorrentMovieProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{extratorrentMovieProviders}",
    "description": "The providers for scraping ExtraTorrent for movies.",
    "lineNumber": 244,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 23,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "extratorrentShowProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~extratorrentShowProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{extratorrentShowProviders}",
    "description": "The providers for scraping ExtraTorrent for shows.",
    "lineNumber": 254,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 24,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "katAnimeProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~katAnimeProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{katAnimeProviders}",
    "description": "The providers for scraping KAT for anime.",
    "lineNumber": 282,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 25,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "katMovieProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~katMovieProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{katMovieProviders}",
    "description": "The providers for scraping KAT for movies.",
    "lineNumber": 288,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 26,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "katShowProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~katShowProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{katShowProviders}",
    "description": "The providers for scraping KAT for shows.",
    "lineNumber": 307,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 27,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "nyaaAnimeProviders",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~nyaaAnimeProviders",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{nyaaAnimeProviders}",
    "description": "The providers for scraping Nyaa for anime.",
    "lineNumber": 328,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 28,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "master",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~master",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{master}",
    "description": "Check if this instance of the API is the master. Default is `true`.",
    "lineNumber": 338,
    "type": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 29,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "maxWebRequest",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~maxWebRequest",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{maxWebRequest}",
    "description": "The maximum web requests can take place at the same time. Default is `2`.",
    "lineNumber": 344,
    "type": {
      "nullable": null,
      "types": [
        "Integer"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 30,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "movieMap",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~movieMap",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{movieMap}",
    "description": "Map object for correcting movie slugs.",
    "lineNumber": 350,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 31,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "pageSize",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~pageSize",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{pageSize}",
    "description": "The amount of object show per page. Default is `50`.",
    "lineNumber": 356,
    "type": {
      "nullable": null,
      "types": [
        "Integer"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 32,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "port",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~port",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{port}",
    "description": "The port on which the API will run on. Default is `5000`.",
    "lineNumber": 362,
    "type": {
      "nullable": null,
      "types": [
        "Integer"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 33,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Promise",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~Promise",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{Promise}",
    "description": "The promise object to override the mongoose promise object. Default is `global.Promise`.",
    "lineNumber": 368,
    "type": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 34,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "server",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~server",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{server}",
    "description": "The name of the server. Default is `serv01`.",
    "lineNumber": 374,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 35,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "showMap",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~showMap",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{showMap}",
    "description": "Map object for correcting show slugs.",
    "lineNumber": 380,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 36,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "statusFile",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~statusFile",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{statusFile}",
    "description": "The name of the status file holding the `status` value for the index page. Default is `status.json`.",
    "lineNumber": 449,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 37,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "tempDir",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~tempDir",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{tempDir}",
    "description": "The path to the temprary directory.. Default is `./tmp`.",
    "lineNumber": 455,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 38,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "timeZone",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~timeZone",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{timeZone}",
    "description": "The timezone the conjob will hold. Default is `America/Los_Angeles`.",
    "lineNumber": 461,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 39,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "trakt",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~trakt",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{trakt}",
    "description": "A configured Trakt API.",
    "lineNumber": 467,
    "type": {
      "nullable": null,
      "types": [
        "Trakt"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 40,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "tvdb",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~tvdb",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{tvdb}",
    "description": "A configured TVDB API.",
    "lineNumber": 473,
    "type": {
      "nullable": null,
      "types": [
        "TVDB"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 41,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "updatedFile",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~updatedFile",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{updatedFile}",
    "description": "The name of the updated file holding the `updated` value for the index page. Default is `lastUpdated.json`.",
    "lineNumber": 479,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 42,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "webRequestTimeout",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~webRequestTimeout",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{webRequestTimeout}",
    "description": "The maximum time a web request may take. Default is `2` seconds.",
    "lineNumber": 485,
    "type": {
      "nullable": null,
      "types": [
        "Integer"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 43,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "workers",
    "memberof": "src/config/constants.js",
    "longname": "src/config/constants.js~workers",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/constants.js",
    "importStyle": "{workers}",
    "description": "The amount of workers on the cluster. Default is `2`.",
    "lineNumber": 491,
    "type": {
      "nullable": null,
      "types": [
        "Integer"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 44,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/config/logger.js",
    "memberof": null,
    "longname": "src/config/logger.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport ExpressWinston from \"express-winston\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\nimport sprintf from \"sprintf\";\r\nimport Winston from \"winston\";\r\n\r\nimport { tempDir } from \"./constants\";\r\nimport { name } from \"../../package.json\";\r\n\r\n/** Class for configuring logging. */\r\nexport default class Logger {\r\n\r\n  /**\r\n   * Create a logger object.\r\n   * @param {?Boolean} [verbose] - Debug mode for no output.\r\n   * @param {?Boolean} [debug] - Debug mode for extra output.\r\n   */\r\n  constructor(pretty, verbose) {\r\n    /**\r\n     * Pretty mode.\r\n     * @type {Boolean}\r\n     */\r\n    Logger._pretty = pretty;\r\n\r\n    /**\r\n     * Verbose mode.\r\n     * @type {Boolean}\r\n     */\r\n    Logger._verbose = verbose;\r\n\r\n     // Create the temp directory if it does not exists.\r\n    if (!fs.existsSync(tempDir)) fs.mkdirSync(tempDir);\r\n\r\n    /**\r\n     * The log levels Winston will be using.\r\n     * @type {Object}\r\n     */\r\n    Logger._levels = {\r\n      error: 0,\r\n      warn: 1,\r\n      info: 2,\r\n      debug: 3\r\n    };\r\n\r\n    if (Logger._pretty) {\r\n      /**\r\n       * The Winston instance.\r\n       * @external {Winston} https://github.com/winstonjs/winston\r\n       */\r\n      Logger.logger = new Winston.Logger({\r\n        transports: [\r\n          new Winston.transports.Console({\r\n            name,\r\n            levels: Logger._levels,\r\n            formatter: Logger._consoleFormatter,\r\n            handleExceptions: true,\r\n            prettyPrint: true\r\n          }),\r\n          new Winston.transports.File({\r\n            filename: path.join(tempDir, `${name}.log`),\r\n            json: false,\r\n            level: \"warn\",\r\n            formatter: Logger._fileFormatter,\r\n            maxsize: 5242880,\r\n            handleExceptions: true\r\n          })\r\n        ],\r\n        exitOnError: false\r\n      });\r\n\r\n      /**\r\n       * The Express Winston instance.\r\n       * @external {ExpressWinston} http://bithavoc.io/express-winston/\r\n       */\r\n      Logger.expressLogger = new ExpressWinston.logger({\r\n        winstonInstance: Logger.logger,\r\n        expressFormat: true\r\n      });\r\n    }\r\n\r\n    // Create the logger object.\r\n    Logger._createLogger(this._pretty);\r\n  };\r\n\r\n  /**\r\n   * Check if the message is empty and replace it with the meta.\r\n   * @param {Object} args - Arguments passed by Winston.\r\n   * @returns {Object} - Formatter arguments passed by Winston.\r\n   */\r\n  static _checkEmptyMessage(args) {\r\n    if (args.message === \"\" && Object.keys(args.meta).length !== 0)\r\n      args.message = JSON.stringify(args.meta);\r\n\r\n    return args;\r\n  };\r\n\r\n  /**\r\n   * Get the color of the output based on the log level.\r\n   * @param {String} level - The log level.\r\n   * @returns {String} - A color based on the log level.\r\n   */\r\n  static _getLevelColor(level) {\r\n    switch (level) {\r\n    case \"error\":\r\n      return \"\\x1b[31m\";\r\n      break;\r\n    case \"warn\":\r\n      return \"\\x1b[33m\";\r\n      break;\r\n    case \"info\":\r\n      return \"\\x1b[36m\";\r\n      break;\r\n    case \"debug\":\r\n      return \"\\x1b[34m\";\r\n      break;\r\n    default:\r\n      return \"\\x1b[36m\";\r\n      break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Formatter function which formats the output to the console.\r\n   * @param {Object} args - Arguments passed by Winston.\r\n   * @returns {String} - The formatted message.\r\n   */\r\n  static _consoleFormatter(args) {\r\n    args = Logger._checkEmptyMessage(args);\r\n    const color = Logger._getLevelColor(args.level);\r\n\r\n    return sprintf(`\\x1b[0m[%s] ${color}%5s:\\x1b[0m %2s/%d: \\x1b[36m%s\\x1b[0m`,\r\n      new Date().toISOString(), args.level.toUpperCase(), name,\r\n      process.pid, args.message);\r\n  };\r\n\r\n  /**\r\n   * Formatter function which formate the output to the log file.\r\n   * @param {Object} args - Arguments passed by Winston.\r\n   * @returns {String} - The formatted message.\r\n   */\r\n  static _fileFormatter(args) {\r\n    args = Logger._checkEmptyMessage(args);\r\n    return JSON.stringify({\r\n      name,\r\n      pid: process.pid,\r\n      level: args.level,\r\n      msg: args.message,\r\n      time: new Date().toISOString()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Function to create a global logger object based on the properties of the Logger class.\r\n   */\r\n  static _createLogger() {\r\n    if (!global.logger) global.logger = {};\r\n\r\n    Object.keys(Logger._levels).map(level => {\r\n      if (Logger._pretty) {\r\n        global.logger[level] = msg => {\r\n          if (!Logger._verbose) Logger.logger[level](msg);\r\n        };\r\n      } else {\r\n        global.logger[level] = msg => {\r\n          if (!Logger._verbose) console[level](msg);\r\n        };\r\n      }\r\n    });\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 45,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Logger",
    "memberof": "src/config/logger.js",
    "longname": "src/config/logger.js~Logger",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/logger.js",
    "importStyle": "Logger",
    "description": "Class for configuring logging.",
    "lineNumber": 12,
    "interface": false
  },
  {
    "__docId__": 46,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger#constructor",
    "access": null,
    "description": "Create a logger object.",
    "lineNumber": 19,
    "params": [
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "name": "verbose",
        "description": "Debug mode for no output."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 47,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Winston",
    "externalLink": "https://github.com/winstonjs/winston",
    "memberof": "src/config/logger.js",
    "longname": "src/config/logger.js~Winston",
    "access": null,
    "description": "The Winston instance.",
    "lineNumber": 51
  },
  {
    "__docId__": 48,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ExpressWinston",
    "externalLink": "http://bithavoc.io/express-winston/",
    "memberof": "src/config/logger.js",
    "longname": "src/config/logger.js~ExpressWinston",
    "access": null,
    "description": "The Express Winston instance.",
    "lineNumber": 76
  },
  {
    "__docId__": 49,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_checkEmptyMessage",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger._checkEmptyMessage",
    "access": null,
    "description": "Check if the message is empty and replace it with the meta.",
    "lineNumber": 91,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Formatter arguments passed by Winston."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "args",
        "description": "Arguments passed by Winston."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Formatter arguments passed by Winston."
    },
    "generator": false
  },
  {
    "__docId__": 50,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_getLevelColor",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger._getLevelColor",
    "access": null,
    "description": "Get the color of the output based on the log level.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} - A color based on the log level."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "level",
        "description": "The log level."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "A color based on the log level."
    },
    "generator": false
  },
  {
    "__docId__": 51,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_consoleFormatter",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger._consoleFormatter",
    "access": null,
    "description": "Formatter function which formats the output to the console.",
    "lineNumber": 128,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} - The formatted message."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "args",
        "description": "Arguments passed by Winston."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The formatted message."
    },
    "generator": false
  },
  {
    "__docId__": 52,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_fileFormatter",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger._fileFormatter",
    "access": null,
    "description": "Formatter function which formate the output to the log file.",
    "lineNumber": 142,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} - The formatted message."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "args",
        "description": "Arguments passed by Winston."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The formatted message."
    },
    "generator": false
  },
  {
    "__docId__": 53,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_createLogger",
    "memberof": "src/config/logger.js~Logger",
    "longname": "src/config/logger.js~Logger._createLogger",
    "access": null,
    "description": "Function to create a global logger object based on the properties of the Logger class.",
    "lineNumber": 156,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 54,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/config/routes.js",
    "memberof": null,
    "longname": "src/config/routes.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport Index from \"../controllers/index\";\r\nimport Animes from \"../controllers/animes\";\r\nimport Movies from \"../controllers/movies\";\r\nimport Shows from \"../controllers/shows\";\r\nimport Exports from \"../controllers/exports\";\r\n\r\n/** Class for setting up the routes for the API. */\r\nexport default class Routes {\r\n\r\n  /**\r\n   * Create a routes object.\r\n   * @param {Express} app - The ExpresssJS instance.\r\n   */\r\n  constructor(app) {\r\n    /**\r\n     * The index controller.\r\n     * @type {Index}\r\n     */\r\n    Routes.index = new Index();\r\n\r\n    /**\r\n     * The animes controller.\r\n     * @type {Animes}\r\n     */\r\n    Routes._animes = new Animes();\r\n\r\n    /**\r\n     * The movies controller.\r\n     * @type {Movies}\r\n     */\r\n    Routes._movies = new Movies();\r\n\r\n    /**\r\n     * The shows controller.\r\n     * @type {Shows}\r\n     */\r\n    Routes._shows = new Shows();\r\n\r\n    /**\r\n     * The exports controller.\r\n     * @type {Exports}\r\n     */\r\n    Routes._exports = new Exports();\r\n\r\n    Routes._setupRoutes(app);\r\n  };\r\n\r\n  /**\r\n   * Setup ExpressJS routing.\r\n   * @param {ExpressJS} app - The ExpresssJS application.\r\n   */\r\n  static _setupRoutes(app) {\r\n    app.get(\"/\", Routes.index.getIndex);\r\n    app.get(\"/logs/error\", Routes.index.getErrorLog);\r\n\r\n    app.get(\"/animes\", Routes._animes.getAnimes);\r\n    app.get(\"/animes/:page\", Routes._animes.getPage);\r\n    app.get(\"/anime/:id\", Routes._animes.getAnime);\r\n    app.get(\"/random/anime\", Routes._animes.getRandomAnime);\r\n\r\n    app.get(\"/movies\", Routes._movies.getMovies);\r\n    app.get(\"/movies/:page\", Routes._movies.getPage);\r\n    app.get(\"/movie/:id\", Routes._movies.getMovie);\r\n    app.get(\"/random/movie\", Routes._movies.getRandomMovie);\r\n\r\n    app.get(\"/shows\", Routes._shows.getShows);\r\n    app.get(\"/shows/:page\", Routes._shows.getPage);\r\n    app.get(\"/show/:id\", Routes._shows.getShow);\r\n    app.get(\"/random/show\", Routes._shows.getRandomShow);\r\n\r\n    app.get(\"/exports/:collection\", Routes._exports.getExport);\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 55,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Routes",
    "memberof": "src/config/routes.js",
    "longname": "src/config/routes.js~Routes",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/routes.js",
    "importStyle": "Routes",
    "description": "Class for setting up the routes for the API.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 56,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/config/routes.js~Routes",
    "longname": "src/config/routes.js~Routes#constructor",
    "access": null,
    "description": "Create a routes object.",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "Express"
        ],
        "spread": false,
        "optional": false,
        "name": "app",
        "description": "The ExpresssJS instance."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 57,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_setupRoutes",
    "memberof": "src/config/routes.js~Routes",
    "longname": "src/config/routes.js~Routes._setupRoutes",
    "access": null,
    "description": "Setup ExpressJS routing.",
    "lineNumber": 53,
    "params": [
      {
        "nullable": null,
        "types": [
          "ExpressJS"
        ],
        "spread": false,
        "optional": false,
        "name": "app",
        "description": "The ExpresssJS application."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 58,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/config/setup.js",
    "memberof": null,
    "longname": "src/config/setup.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport bodyParser from \"body-parser\";\r\nimport compress from \"compression\";\r\nimport mongoose from \"mongoose\";\r\nimport responseTime from \"response-time\";\r\n\r\nimport Logger from \"./logger\";\r\nimport { dbHosts, dbName, Promise } from \"./constants\";\r\n\r\n/** Class for setting up the API. */\r\nexport default class Setup {\r\n\r\n  /**\r\n   * Setup the Express service.\r\n   * @param {Express} app - The ExpresssJS instance.\r\n   * @param {?Boolean} [pretty] - Pretty output with Winston logging.\r\n   * @param {?Boolean} [verbose] - Debug mode for no output.\r\n   */\r\n  constructor(app, pretty, verbose) {\r\n    // Used to extract data from query strings.\r\n    RegExp.escape = text => text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\");\r\n\r\n    // Connection and configuration of the MongoDB database.\r\n    Setup.connectMongoDB();\r\n\r\n    // Enable parsing URL encoded bodies.\r\n    app.use(bodyParser.urlencoded({extended: true}));\r\n\r\n    // Enable parsing JSON bodies.\r\n    app.use(bodyParser.json());\r\n\r\n    // Enables compression of response bodies.\r\n    app.use(compress({\r\n      threshold: 1400,\r\n      level: 4,\r\n      memLevel: 3\r\n    }));\r\n\r\n    // Enable response time tracking for HTTP request.\r\n    app.use(responseTime());\r\n\r\n    // Enable HTTP request logging.\r\n    if (pretty && !verbose) app.use(Logger.expressLogger);\r\n  }\r\n\r\n  /** Connection and configuration of the MongoDB database. */\r\n  static connectMongoDB() {\r\n    mongoose.Promise = Promise;\r\n    mongoose.connect(`mongodb://${dbHosts.join(\",\")}/${dbName}`, {\r\n      db: {\r\n        native_parser: true\r\n      },\r\n      replset: {\r\n        rs_name: \"pt0\",\r\n        connectWithNoPrimary: true,\r\n        readPreference: \"nearest\",\r\n        strategy: \"ping\",\r\n        socketOptions: {\r\n          keepAlive: 1\r\n        }\r\n      },\r\n      server: {\r\n        readPreference: \"nearest\",\r\n        strategy: \"ping\",\r\n        socketOptions: {\r\n          keepAlive: 1\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 59,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Setup",
    "memberof": "src/config/setup.js",
    "longname": "src/config/setup.js~Setup",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/config/setup.js",
    "importStyle": "Setup",
    "description": "Class for setting up the API.",
    "lineNumber": 11,
    "interface": false
  },
  {
    "__docId__": 60,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/config/setup.js~Setup",
    "longname": "src/config/setup.js~Setup#constructor",
    "access": null,
    "description": "Setup the Express service.",
    "lineNumber": 19,
    "params": [
      {
        "nullable": null,
        "types": [
          "Express"
        ],
        "spread": false,
        "optional": false,
        "name": "app",
        "description": "The ExpresssJS instance."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "name": "pretty",
        "description": "Pretty output with Winston logging."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "name": "verbose",
        "description": "Debug mode for no output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 61,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "connectMongoDB",
    "memberof": "src/config/setup.js~Setup",
    "longname": "src/config/setup.js~Setup.connectMongoDB",
    "access": null,
    "description": "Connection and configuration of the MongoDB database.",
    "lineNumber": 47,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 62,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/controllers/animes.js",
    "memberof": null,
    "longname": "src/controllers/animes.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport Anime from \"../models/Anime\";\r\nimport { pageSize } from \"../config/constants\";\r\n\r\n/** Class for getting anime data from the MongoDB. */\r\nexport default class Animes {\r\n\r\n  /** Create an animes object. */\r\n  constructor() {\r\n    /**\r\n     * Object used for the projection of anime shows.\r\n     * @type {Object}\r\n     */\r\n    Animes._projection = {\r\n      images: 1,\r\n      mal_id: 1,\r\n      haru_id: 1,\r\n      tvdb_id: 1,\r\n      imdb_id: 1,\r\n      slug: 1,\r\n      title: 1,\r\n      year: 1,\r\n      type: 1,\r\n      item_data: 1,\r\n      rating: 1,\r\n      genres: 1,\r\n      num_seasons: 1\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Get all the pages.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {String[]} - A list of pages which are available.\r\n   */\r\n  getAnimes(req, res, next) {\r\n    return Anime.count({\r\n      num_seasons: {\r\n        $gt: 0\r\n      }\r\n    }).exec().then(count => {\r\n      const pages = Math.round(count / pageSize);\r\n      const docs = [];\r\n\r\n      for (let i = 1; i < pages + 1; i++) docs.push(`animes/${i}`);\r\n\r\n      return res.json(docs);\r\n    }).catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get one page.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Anime[]} - The contents of one page.\r\n   */\r\n  getPage(req, res, next) {\r\n    const page = req.params.page - 1;\r\n    const offset = page * pageSize;\r\n\r\n    if (req.params.page.match(/all/i)) {\r\n      return Anime.aggregate([{\r\n          $match: {\r\n            num_seasons: {\r\n              $gt: 0\r\n            }\r\n          }\r\n        }, {\r\n          $project: Animes._projection\r\n        }, {\r\n          $sort: {\r\n            title: -1\r\n          }\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => next(err));\r\n    } else {\r\n      const query = {\r\n        num_seasons: {\r\n          $gt: 0\r\n        }\r\n      };\r\n      const data = req.query;\r\n\r\n      if (!data.order) data.order = -1;\r\n\r\n      let sort = {\r\n        \"rating.votes\": parseInt(data.order, 10),\r\n        \"rating.percentage\": parseInt(data.order, 10),\r\n        \"rating.watching\": parseInt(data.order, 10)\r\n      };\r\n\r\n      if (data.keywords) {\r\n        const words = data.keywords.split(\" \");\r\n        let regex = \"^\";\r\n        for (let w in words) regex += `(?=.*\\\\b${RegExp.escape(words[w].toLowerCase())}\\\\b)`;\r\n        query.title = {\r\n          $regex: new RegExp(`${regex}.*`),\r\n          $options: \"gi\"\r\n        };\r\n      }\r\n\r\n      if (data.sort) {\r\n        if (data.sort.match(/name/i)) sort = {\r\n          \"title\": (parseInt(data.order, 10) * -1)\r\n        };\r\n        if (data.sort.match(/rating/i)) sort = {\r\n          \"rating.percentage\": parseInt(data.order, 10),\r\n          \"rating.votes\": parseInt(data.order, 10)\r\n        };\r\n        // if (data.sort === \"trending\") sort = {\r\n        //   \"rating.watching\": parseInt(data.order, 10)\r\n        // };\r\n        // if (data.sort === \"updated\") sort = {\r\n        //   \"latest_episode\": parseInt(data.order, 10)\r\n        // };\r\n        if (data.sort.match(/year/i)) sort = {\r\n          \"year\": parseInt(data.order, 10)\r\n        };\r\n      }\r\n\r\n      if (data.genre && !data.genre.match(/all/i)) query.genres = data.genre;\r\n\r\n      return Anime.aggregate([{\r\n          $sort: sort\r\n        }, {\r\n          $match: query\r\n        }, {\r\n          $project: Animes._projection\r\n        }, {\r\n          $skip: offset\r\n        }, {\r\n          $limit: pageSize\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => next(err));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get info from one anime.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Anime} - The details of a single anime.\r\n   */\r\n  getAnime(req, res, next) {\r\n    return Anime.findOne({\r\n        _id: req.params.id\r\n      }, {\r\n        latest_episode: 0\r\n      }).exec()\r\n      .then(docs => res.json(docs))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get a random anime.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Anime} - A random movie.\r\n   */\r\n  getRandomAnime(req, res, next) {\r\n    return Anime.aggregate([{\r\n        $project: Animes._projection\r\n      }, {\r\n        $sample: {\r\n          size: 1\r\n        }\r\n      }, {\r\n        $limit: 1\r\n      }]).exec()\r\n      .then(docs => res.json(docs[0]))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 63,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Animes",
    "memberof": "src/controllers/animes.js",
    "longname": "src/controllers/animes.js~Animes",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/controllers/animes.js",
    "importStyle": "Animes",
    "description": "Class for getting anime data from the MongoDB.",
    "lineNumber": 6,
    "interface": false
  },
  {
    "__docId__": 64,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/controllers/animes.js~Animes",
    "longname": "src/controllers/animes.js~Animes#constructor",
    "access": null,
    "description": "Create an animes object.",
    "lineNumber": 9,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 65,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getAnimes",
    "memberof": "src/controllers/animes.js~Animes",
    "longname": "src/controllers/animes.js~Animes#getAnimes",
    "access": null,
    "description": "Get all the pages.",
    "lineNumber": 38,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]} - A list of pages which are available."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": "A list of pages which are available."
    },
    "generator": false
  },
  {
    "__docId__": 66,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getPage",
    "memberof": "src/controllers/animes.js~Animes",
    "longname": "src/controllers/animes.js~Animes#getPage",
    "access": null,
    "description": "Get one page.",
    "lineNumber": 60,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - The contents of one page."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "The contents of one page."
    },
    "generator": false
  },
  {
    "__docId__": 67,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getAnime",
    "memberof": "src/controllers/animes.js~Animes",
    "longname": "src/controllers/animes.js~Animes#getAnime",
    "access": null,
    "description": "Get info from one anime.",
    "lineNumber": 150,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - The details of a single anime."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "The details of a single anime."
    },
    "generator": false
  },
  {
    "__docId__": 68,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getRandomAnime",
    "memberof": "src/controllers/animes.js~Animes",
    "longname": "src/controllers/animes.js~Animes#getRandomAnime",
    "access": null,
    "description": "Get a random anime.",
    "lineNumber": 167,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - A random movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "A random movie."
    },
    "generator": false
  },
  {
    "__docId__": 69,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/controllers/exports.js",
    "memberof": null,
    "longname": "src/controllers/exports.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport fs from \"fs\";\r\nimport mime from \"mime\";\r\nimport path from \"path\";\r\n\r\nimport Util from \"../util\";\r\nimport { tempDir } from \"../config/constants\";\r\n\r\n/** Class for getting anime data from the MongoDB. */\r\nexport default class Exports {\r\n\r\n  /** Create an exports object. */\r\n  constructor() {\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Download the export of a collection.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Download} - The download of an export of a collection.\r\n   */\r\n  getExport(req, res, next) {\r\n    const collection = req.params.collection;\r\n    let err;\r\n\r\n    if (collection.match(/(anime)$|(movie)$|(show)$/i)) {\r\n      const jsonFile = path.join(tempDir, `${collection}s.json`);\r\n      if (!fs.existsSync(jsonFile)) {\r\n        err = {error: `Error: no such file found for '${jsonFile}'`};\r\n        return res.status(500).json(err);\r\n      } else {\r\n        return res.download(jsonFile);\r\n      }\r\n    } else {\r\n      err = {error: `Error: '${collection}' is not a valid collection to export.`};\r\n      res.status(500).json(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 70,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Exports",
    "memberof": "src/controllers/exports.js",
    "longname": "src/controllers/exports.js~Exports",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/controllers/exports.js",
    "importStyle": "Exports",
    "description": "Class for getting anime data from the MongoDB.",
    "lineNumber": 10,
    "interface": false
  },
  {
    "__docId__": 71,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/controllers/exports.js~Exports",
    "longname": "src/controllers/exports.js~Exports#constructor",
    "access": null,
    "description": "Create an exports object.",
    "lineNumber": 13,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 72,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/controllers/exports.js~Exports",
    "longname": "src/controllers/exports.js~Exports#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 18,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 73,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getExport",
    "memberof": "src/controllers/exports.js~Exports",
    "longname": "src/controllers/exports.js~Exports#getExport",
    "access": null,
    "description": "Download the export of a collection.",
    "lineNumber": 28,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Download} - The download of an export of a collection."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Download"
      ],
      "spread": false,
      "description": "The download of an export of a collection."
    },
    "generator": false
  },
  {
    "__docId__": 74,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/controllers/index.js",
    "memberof": null,
    "longname": "src/controllers/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nimport Anime from \"../models/Anime\";\r\nimport Movie from \"../models/Movie\";\r\nimport Show from \"../models/Show\";\r\nimport Util from \"../util\";\r\nimport {\r\n  server,\r\n  statusFile,\r\n  tempDir,\r\n  updatedFile\r\n} from \"../config/constants\";\r\nimport {\r\n  name,\r\n  repository,\r\n  version\r\n} from \"../../package.json\";\r\n\r\n/** class for displaying information about the server the API is running on. */\r\nexport default class Index {\r\n\r\n  /** Create an index object. */\r\n  constructor() {\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    Index._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Displays a given file.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {String} root - The path to the file.\r\n   * @param {String} file - The name of the file.\r\n   * @returns {JSON | File} - A file to display in the browser.\r\n   */\r\n  static _displayFile(req, res, root, file) {\r\n    if (fs.existsSync(path.join(root, file))) {\r\n      return res.sendFile(file, {\r\n        root,\r\n        headers: {\r\n          \"Content-Type\": \"text/plain; charset=UTF-8\"\r\n        }\r\n      });\r\n    } else {\r\n      return res.json({error: `Could not find file: '${root}'`});\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get general information about the server.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {JSON} - General information about the server.\r\n   */\r\n  async getIndex(req, res, next) {\r\n    try {\r\n      const { updated } = JSON.parse(fs.readFileSync(path.join(tempDir, updatedFile), \"utf8\"));\r\n      const { status } = JSON.parse(fs.readFileSync(path.join(tempDir, statusFile), \"utf8\"));\r\n      const commit = await Index._util.executeCommand(\"git rev-parse --short HEAD\");\r\n      const totalAnimes = await Anime.count({\r\n        num_seasons: {\r\n          $gt: 0\r\n        }\r\n      }).exec();\r\n      const totalMovies = await Movie.count().exec();\r\n      const totalShows = await Show.count({\r\n        num_seasons: {\r\n          $gt: 0\r\n        }\r\n      }).exec();\r\n\r\n      return res.json({\r\n        repo: repository.url,\r\n        server,\r\n        status,\r\n        totalAnimes,\r\n        totalMovies,\r\n        totalShows,\r\n        updated,\r\n        uptime: process.uptime() | 0,\r\n        version,\r\n        commit\r\n      });\r\n    } catch (err) {\r\n      return next(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Displays the 'popcorn-api.log' file.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @returns {File} - The content of the log file.\r\n   */\r\n  getErrorLog(req, res) {\r\n    return Index._displayFile(req, res, tempDir, `${name}.log`);\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 75,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Index",
    "memberof": "src/controllers/index.js",
    "longname": "src/controllers/index.js~Index",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/controllers/index.js",
    "importStyle": "Index",
    "description": "class for displaying information about the server the API is running on.",
    "lineNumber": 22,
    "interface": false
  },
  {
    "__docId__": 76,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/controllers/index.js~Index",
    "longname": "src/controllers/index.js~Index#constructor",
    "access": null,
    "description": "Create an index object.",
    "lineNumber": 25,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 77,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_displayFile",
    "memberof": "src/controllers/index.js~Index",
    "longname": "src/controllers/index.js~Index._displayFile",
    "access": null,
    "description": "Displays a given file.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{JSON | File} - A file to display in the browser."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "root",
        "description": "The path to the file."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "file",
        "description": "The name of the file."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "JSON ",
        " File"
      ],
      "spread": false,
      "description": "A file to display in the browser."
    },
    "generator": false
  },
  {
    "__docId__": 78,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getIndex",
    "memberof": "src/controllers/index.js~Index",
    "longname": "src/controllers/index.js~Index#getIndex",
    "access": null,
    "description": "Get general information about the server.",
    "lineNumber": 61,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{JSON} - General information about the server."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "JSON"
      ],
      "spread": false,
      "description": "General information about the server."
    },
    "generator": false
  },
  {
    "__docId__": 79,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getErrorLog",
    "memberof": "src/controllers/index.js~Index",
    "longname": "src/controllers/index.js~Index#getErrorLog",
    "access": null,
    "description": "Displays the 'popcorn-api.log' file.",
    "lineNumber": 101,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{File} - The content of the log file."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "File"
      ],
      "spread": false,
      "description": "The content of the log file."
    },
    "generator": false
  },
  {
    "__docId__": 80,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/controllers/movies.js",
    "memberof": null,
    "longname": "src/controllers/movies.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport Movie from \"../models/Movie\";\r\nimport { pageSize } from \"../config/constants\";\r\n\r\n/** Class for getting movie data from the MongoDB. */\r\nexport default class Movies {\r\n\r\n  /** Create a movies object. */\r\n  constructor() {\r\n    /**\r\n     * Object used for the projection of movies.\r\n     * @type {Object}\r\n     */\r\n    Movies._projection = {\r\n      _id: 1,\r\n      imdb_id: 1,\r\n      title: 1,\r\n      year: 1,\r\n      runtime: 1,\r\n      images: 1,\r\n      genres: 1,\r\n      synopsis: 1,\r\n      trailer: 1,\r\n      certification: 1,\r\n      released: 1,\r\n      rating: 1,\r\n      torrents: 1\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Get all the pages.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {String[]} - A list of pages which are available.\r\n   */\r\n  getMovies(req, res, next) {\r\n    return Movie.count().exec().then(count => {\r\n      const pages = Math.round(count / pageSize);\r\n      const docs = [];\r\n\r\n      for (let i = 1; i < pages + 1; i++) docs.push(`movies/${i}`);\r\n\r\n      return res.json(docs);\r\n    }).catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get one page.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Movie[]} - The contents of one page.\r\n   */\r\n  getPage(req, res, next) {\r\n    const page = req.params.page - 1;\r\n    const offset = page * pageSize;\r\n\r\n    if (req.params.page.match(/all/i)) {\r\n      return Movie.aggregate([{\r\n          $project: Movies._projection\r\n        }, {\r\n          $sort: {\r\n            title: -1\r\n          }\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => next(err));\r\n    } else {\r\n      const query = {};\r\n      const data = req.query;\r\n\r\n      if (!data.order) data.order = -1;\r\n\r\n      let sort = {\r\n        \"rating.votes\": parseInt(data.order, 10),\r\n        \"rating.percentage\": parseInt(data.order, 10),\r\n        \"rating.watching\": parseInt(data.order, 10)\r\n      };\r\n\r\n      if (data.keywords) {\r\n        const words = data.keywords.split(\" \");\r\n        let regex = \"^\";\r\n        for (let w in words) regex += `(?=.*\\\\b${RegExp.escape(words[w].toLowerCase())}\\\\b)`;\r\n        query.title = {\r\n          $regex: new RegExp(`${regex}.*`),\r\n          $options: \"gi\"\r\n        };\r\n      }\r\n\r\n      if (data.sort) {\r\n        if (data.sort.match(/last added/i)) sort = {\r\n          \"released\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/rating/i)) sort = {\r\n          \"rating.percentage\": parseInt(data.order, 10),\r\n          \"rating.votes\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/title/i)) sort = {\r\n          \"title\": (parseInt(data.order, 10) * 1)\r\n        };\r\n        if (data.sort.match(/trending/i)) sort = {\r\n          \"rating.watching\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/year/i)) sort = {\r\n          \"year\": parseInt(data.order, 10)\r\n        };\r\n      }\r\n\r\n      if (data.genre && !data.genre.match(/all/i)) {\r\n        if (data.genre.match(/science[-\\s]fiction/i) || data.genre.match(/sci[-\\s]fi/i)) data.genre = \"science-fiction\";\r\n        query.genres = data.genre.toLowerCase();\r\n      }\r\n\r\n      return Movie.aggregate([{\r\n          $sort: sort\r\n        }, {\r\n          $match: query\r\n        }, {\r\n          $project: Movies._projection\r\n        }, {\r\n          $skip: offset\r\n        }, {\r\n          $limit: pageSize\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => next(err));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get info from one movie.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Movie} - The details of a single movie.\r\n   */\r\n  getMovie(req, res, next) {\r\n    return Movie.aggregate([{\r\n        $match: {\r\n          _id: req.params.id\r\n        }\r\n      }, {\r\n        $project: Movies._projection\r\n      }, {\r\n        $limit: 1\r\n      }]).exec()\r\n      .then(docs => res.json(docs[0]))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get a random movie.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Movie} - A random movie.\r\n   */\r\n  getRandomMovie(req, res, next) {\r\n    return Movie.aggregate([{\r\n        $project: Movies._projection\r\n      }, {\r\n        $sample: {\r\n          size: 1\r\n        }\r\n      }, {\r\n        $limit: 1\r\n      }]).exec()\r\n      .then(docs => res.json(docs[0]))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 81,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Movies",
    "memberof": "src/controllers/movies.js",
    "longname": "src/controllers/movies.js~Movies",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/controllers/movies.js",
    "importStyle": "Movies",
    "description": "Class for getting movie data from the MongoDB.",
    "lineNumber": 6,
    "interface": false
  },
  {
    "__docId__": 82,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/controllers/movies.js~Movies",
    "longname": "src/controllers/movies.js~Movies#constructor",
    "access": null,
    "description": "Create a movies object.",
    "lineNumber": 9,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 83,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getMovies",
    "memberof": "src/controllers/movies.js~Movies",
    "longname": "src/controllers/movies.js~Movies#getMovies",
    "access": null,
    "description": "Get all the pages.",
    "lineNumber": 38,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]} - A list of pages which are available."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": "A list of pages which are available."
    },
    "generator": false
  },
  {
    "__docId__": 84,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getPage",
    "memberof": "src/controllers/movies.js~Movies",
    "longname": "src/controllers/movies.js~Movies#getPage",
    "access": null,
    "description": "Get one page.",
    "lineNumber": 56,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} - The contents of one page."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "The contents of one page."
    },
    "generator": false
  },
  {
    "__docId__": 85,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getMovie",
    "memberof": "src/controllers/movies.js~Movies",
    "longname": "src/controllers/movies.js~Movies#getMovie",
    "access": null,
    "description": "Get info from one movie.",
    "lineNumber": 139,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - The details of a single movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "The details of a single movie."
    },
    "generator": false
  },
  {
    "__docId__": 86,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getRandomMovie",
    "memberof": "src/controllers/movies.js~Movies",
    "longname": "src/controllers/movies.js~Movies#getRandomMovie",
    "access": null,
    "description": "Get a random movie.",
    "lineNumber": 160,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - A random movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A random movie."
    },
    "generator": false
  },
  {
    "__docId__": 87,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/controllers/shows.js",
    "memberof": null,
    "longname": "src/controllers/shows.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport Show from \"../models/Show\";\r\nimport { pageSize } from \"../config/constants\";\r\n\r\n/** class for getting show data from the MongoDB. */\r\nexport default class Shows {\r\n\r\n  /**\r\n   * Create a shows object.\r\n   */\r\n  constructor() {\r\n    /**\r\n     * Object used for the projections of shows.\r\n     * @type {Object}\r\n     */\r\n    Shows._projections = {\r\n      _id: 1,\r\n      imdb_id: 1,\r\n      tvdb_id: 1,\r\n      title: 1,\r\n      year: 1,\r\n      images: 1,\r\n      slug: 1,\r\n      num_seasons: 1,\r\n      rating: 1\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Get all the pages.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {String[]} - A list of pages which are available.\r\n   */\r\n  getShows(req, res, next) {\r\n    return Show.count({\r\n      num_seasons: {\r\n        $gt: 0\r\n      }\r\n    }).exec().then(count => {\r\n      const pages = Math.round(count / pageSize);\r\n      const docs = [];\r\n\r\n      for (let i = 1; i < pages + 1; i++) docs.push(`shows/${i}`);\r\n\r\n      return res.json(docs);\r\n    }).catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get one page.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Show[]} - The contents of one page.\r\n   */\r\n  getPage(req, res, next) {\r\n    const page = req.params.page - 1;\r\n    const offset = page * pageSize;\r\n\r\n    if (req.params.page.match(/all/i)) {\r\n      return Show.aggregate([{\r\n          $match: {\r\n            num_seasons: {\r\n              $gt: 0\r\n            }\r\n          }\r\n        }, {\r\n          $project: Shows._projections\r\n        }, {\r\n          $sort: {\r\n            title: -1\r\n          }\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => next(err));\r\n    } else {\r\n      const query = {\r\n        num_seasons: {\r\n          $gt: 0\r\n        }\r\n      };\r\n      const data = req.query;\r\n\r\n      if (!data.order) data.order = -1;\r\n\r\n      let sort = {\r\n        \"rating.votes\": parseInt(data.order, 10),\r\n        \"rating.percentage\": parseInt(data.order, 10),\r\n        \"rating.watching\": parseInt(data.order, 10)\r\n      };\r\n\r\n      if (data.keywords) {\r\n        const words = data.keywords.split(\" \");\r\n        let regex = \"^\";\r\n        for (let w in words) regex += `(?=.*\\\\b${RegExp.escape(words[w].toLowerCase())}\\\\b)`;\r\n        query.title = {\r\n          $regex: new RegExp(`${regex}.*`),\r\n          $options: \"gi\"\r\n        };\r\n      }\r\n\r\n      if (data.sort) {\r\n        if (data.sort.match(/name/i)) sort = {\r\n          \"title\": (parseInt(data.order, 10) * -1)\r\n        };\r\n        if (data.sort.match(/rating/i)) sort = {\r\n          \"rating.percentage\": parseInt(data.order, 10),\r\n          \"rating.votes\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/trending/i)) sort = {\r\n          \"rating.watching\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/updated/i)) sort = {\r\n          \"latest_episode\": parseInt(data.order, 10)\r\n        };\r\n        if (data.sort.match(/year/i)) sort = {\r\n          \"year\": parseInt(data.order, 10)\r\n        };\r\n      }\r\n\r\n      if (data.genre && !data.genre.match(/all/i)) {\r\n        if (data.genre.match(/science[-\\s]fiction/i) || data.genre.match(/sci[-\\s]fi/i)) data.genre = \"science-fiction\";\r\n        query.genres = data.genre.toLowerCase();\r\n      }\r\n\r\n      return Show.aggregate([{\r\n          $sort: sort\r\n        }, {\r\n          $match: query\r\n        }, {\r\n          $project: Shows._projections\r\n        }, {\r\n          $skip: offset\r\n        }, {\r\n          $limit: pageSize\r\n        }]).exec()\r\n        .then(docs => res.json(docs))\r\n        .catch(err => res.jfson(err));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get info from one show.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Show} - The details of a single show.\r\n   */\r\n  getShow(req, res, next) {\r\n    return Show.findOne({\r\n        _id: req.params.id\r\n      }, {\r\n        latest_episode: 0\r\n      }).exec()\r\n      .then(docs => res.json(docs))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n  /**\r\n   * Get a random show.\r\n   * @param {Request} req - The express request object.\r\n   * @param {Response} res - The express response object.\r\n   * @param {Function} next - The next function for Express.\r\n   * @returns {Show} - A random show.\r\n   */\r\n  getRandomShow(req, res, next) {\r\n    return Show.aggregate([{\r\n        $project: Shows._projections\r\n      }, {\r\n        $sample: {\r\n          size: 1\r\n        }\r\n      }, {\r\n        $limit: 1\r\n      }]).exec()\r\n      .then(docs => res.json(docs[0]))\r\n      .catch(err => next(err));\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 88,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Shows",
    "memberof": "src/controllers/shows.js",
    "longname": "src/controllers/shows.js~Shows",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/controllers/shows.js",
    "importStyle": "Shows",
    "description": "class for getting show data from the MongoDB.",
    "lineNumber": 6,
    "interface": false
  },
  {
    "__docId__": 89,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/controllers/shows.js~Shows",
    "longname": "src/controllers/shows.js~Shows#constructor",
    "access": null,
    "description": "Create a shows object.",
    "lineNumber": 11,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 90,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getShows",
    "memberof": "src/controllers/shows.js~Shows",
    "longname": "src/controllers/shows.js~Shows#getShows",
    "access": null,
    "description": "Get all the pages.",
    "lineNumber": 36,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]} - A list of pages which are available."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": "A list of pages which are available."
    },
    "generator": false
  },
  {
    "__docId__": 91,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getPage",
    "memberof": "src/controllers/shows.js~Shows",
    "longname": "src/controllers/shows.js~Shows#getPage",
    "access": null,
    "description": "Get one page.",
    "lineNumber": 58,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} - The contents of one page."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "The contents of one page."
    },
    "generator": false
  },
  {
    "__docId__": 92,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getShow",
    "memberof": "src/controllers/shows.js~Shows",
    "longname": "src/controllers/shows.js~Shows#getShow",
    "access": null,
    "description": "Get info from one show.",
    "lineNumber": 151,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - The details of a single show."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "The details of a single show."
    },
    "generator": false
  },
  {
    "__docId__": 93,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getRandomShow",
    "memberof": "src/controllers/shows.js~Shows",
    "longname": "src/controllers/shows.js~Shows#getRandomShow",
    "access": null,
    "description": "Get a random show.",
    "lineNumber": 168,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A random show."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "The express request object."
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "The express response object."
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "next",
        "description": "The next function for Express."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A random show."
    },
    "generator": false
  },
  {
    "__docId__": 94,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/index.js",
    "memberof": null,
    "longname": "src/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport cluster from \"cluster\";\r\nimport domain from \"domain\";\r\nimport Express from \"express\";\r\nimport http from \"http\";\r\nimport os from \"os\";\r\nimport { CronJob } from \"cron\";\r\n\r\nimport Logger from \"./config/logger\";\r\nimport Routes from \"./config/routes\";\r\nimport Scraper from \"./scraper\";\r\nimport Setup from \"./config/setup\";\r\nimport Util from \"./util\";\r\nimport { cronTime, master, port, timeZone, workers } from \"./config/constants\";\r\n\r\n/**\r\n * Class for starting the API.\r\n *\r\n * @example\r\n * // Simply start the API by creating a new instance of the Index class.\r\n * const index = new Index();\r\n *\r\n * @example\r\n * // Or override the default configuration of the Index class.\r\n * const index = new Index({\r\n *    start: true,\r\n *    pretty: true,\r\n *    verbose: false,\r\n *    debug: false\r\n * });\r\n */\r\nexport default class Index {\r\n\r\n  /**\r\n   * Create an index object.\r\n   * @param {Object} config - Configuration for the API.\r\n   * @param {Boolean} [config.start=true] - Start the scraping process.\r\n   * @param {Boolean} [config.pretty=true] - Pretty output with Winston logging.\r\n   * @param {Boolean} [config.verbose=false] - Debug mode for no output.\r\n   * @param {Boolean} [config.debug=false] - Debug mode for extra output.\r\n   */\r\n  constructor({ start = true, pretty = true, verbose = false, debug = false } = {}) {\r\n    /**\r\n     * The express object.\r\n     * @type {Express}\r\n     */\r\n    Index._app = new Express();\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    Index._util = new Util();\r\n\r\n    /**\r\n     * The scraper object to scrape for torrents.\r\n     * @type {Scraper}\r\n     */\r\n    Index._scraper = new Scraper(debug);\r\n\r\n    /**\r\n     * The logger object to configure the logging.\r\n     * @type {Logger}\r\n     */\r\n    Index._logger = new Logger(pretty, verbose);\r\n\r\n    // Setup the MongoDB configuration and ExpressJS configuration.\r\n    new Setup(Index._app, pretty, verbose);\r\n\r\n    // Setup the API routes.\r\n    new Routes(Index._app);\r\n\r\n    /**\r\n     * The http server object.\r\n     * @type {Object}\r\n     */\r\n    Index._server = http.createServer(Index._app);\r\n\r\n    // Start the API.\r\n    Index._startAPI(start);\r\n  };\r\n\r\n  /**\r\n   * Function to start the API.\r\n   * @param {?Boolean} start - Start the scraping.\r\n   */\r\n  static _startAPI(start) {\r\n    if (cluster.isMaster) { // Check is the cluster is the master\r\n      // Clear the log files from the temp directory.\r\n      Index._util.resetLog();\r\n\r\n      // Setup the temporary directory\r\n      Index._util.createTemp();\r\n\r\n      // Fork workers.\r\n      for (let i = 0; i < Math.min(os.cpus().length, workers); i++) cluster.fork();\r\n\r\n      // Check for errors with the workers.\r\n      cluster.on(\"exit\", worker => {\r\n        Index._util.onError(`Worker '${worker.process.pid}' died, spinning up another!`);\r\n        cluster.fork();\r\n      });\r\n\r\n      // Start the cronjob.\r\n      if (master) {\r\n        // WARNING: Domain module is pending deprication: https://nodejs.org/api/domain.html\r\n        const scope = domain.create();\r\n        scope.run(() => {\r\n          logger.info(\"API started\");\r\n          try {\r\n            new CronJob({\r\n              cronTime,\r\n              timeZone,\r\n              onComplete: () => Index._util.setStatus(),\r\n              onTick: () => Index._scraper.scrape(),\r\n              start: true\r\n            });\r\n\r\n            Index._util.setLastUpdated(\"Never\");\r\n            Index._util.setStatus();\r\n            if (start) Index._scraper.scrape();\r\n          } catch (err) {\r\n            return Index._util.onError(err);\r\n          }\r\n        });\r\n        scope.on(\"error\", err => Index._util.onError(err));\r\n      }\r\n    } else {\r\n      Index._server.listen(port);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Function to stop the API from running.\r\n   */\r\n  static closeAPI() {\r\n    Index._server.close(() => {\r\n      logger.info(\"Closed out remaining connections.\");\r\n      process.exit();\r\n    });\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 95,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Index",
    "memberof": "src/index.js",
    "longname": "src/index.js~Index",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/index.js",
    "importStyle": "Index",
    "description": "Class for starting the API.",
    "examples": [
      "// Simply start the API by creating a new instance of the Index class.\nconst index = new Index();",
      "// Or override the default configuration of the Index class.\nconst index = new Index({\n   start: true,\n   pretty: true,\n   verbose: false,\n   debug: false\n});"
    ],
    "lineNumber": 32,
    "interface": false
  },
  {
    "__docId__": 96,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/index.js~Index",
    "longname": "src/index.js~Index#constructor",
    "access": null,
    "description": "Create an index object.",
    "lineNumber": 42,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Configuration for the API."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "config.start",
        "description": "Start the scraping process."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "config.pretty",
        "description": "Pretty output with Winston logging."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "config.verbose",
        "description": "Debug mode for no output."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "config.debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 97,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "_startAPI",
    "memberof": "src/index.js~Index",
    "longname": "src/index.js~Index._startAPI",
    "access": null,
    "description": "Function to start the API.",
    "lineNumber": 87,
    "params": [
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "start",
        "description": "Start the scraping."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 98,
    "kind": "method",
    "static": true,
    "variation": null,
    "name": "closeAPI",
    "memberof": "src/index.js~Index",
    "longname": "src/index.js~Index.closeAPI",
    "access": null,
    "description": "Function to stop the API from running.",
    "lineNumber": 136,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 99,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/models/Anime.js",
    "memberof": null,
    "longname": "src/models/Anime.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport mongoose from \"mongoose\";\r\n\r\n// The anime schema used by mongoose.\r\nconst AnimeSchema = new mongoose.Schema({\r\n  _id: {\r\n    type: String,\r\n    required: true,\r\n    index: {\r\n      unique: true\r\n    }\r\n  },\r\n  mal_id: String,\r\n  title: String,\r\n  year: String,\r\n  slug: String,\r\n  synopsis: String,\r\n  runtime: String,\r\n  status: String,\r\n  rating: {\r\n    percentage: Number,\r\n    watching: Number,\r\n    votes: Number,\r\n    loved: Number,\r\n    hated: Number\r\n  },\r\n  type: String,\r\n  num_seasons: Number,\r\n  last_updated: Number,\r\n  latest_episode: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  images: {\r\n    banner: String,\r\n    fanart: String,\r\n    poster: String\r\n  },\r\n  genres: [],\r\n  episodes: []\r\n});\r\n\r\n// Create the anime model.\r\nconst Anime = mongoose.model(\"Anime\", AnimeSchema);\r\n\r\n/**\r\n * A model object for anime shows.\r\n * @type {Anime}\r\n */\r\nexport default Anime;\r\n"
  },
  {
    "__docId__": 100,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "AnimeSchema",
    "memberof": "src/models/Anime.js",
    "longname": "src/models/Anime.js~AnimeSchema",
    "access": null,
    "export": false,
    "importPath": "popcorn-api/src/models/Anime.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 101,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Anime",
    "memberof": "src/models/Anime.js",
    "longname": "src/models/Anime.js~Anime",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/models/Anime.js",
    "importStyle": "Anime",
    "description": "A model object for anime shows.",
    "lineNumber": 44,
    "type": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 102,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/models/Movie.js",
    "memberof": null,
    "longname": "src/models/Movie.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport mongoose from \"mongoose\";\r\n\r\n// The movie schema used by mongoose.\r\nconst MovieSchema = new mongoose.Schema({\r\n  _id: {\r\n    type: String,\r\n    required: true,\r\n    index: {\r\n      unique: true\r\n    }\r\n  },\r\n  imdb_id: String,\r\n  title: String,\r\n  year: String,\r\n  slug: String,\r\n  synopsis: String,\r\n  runtime: String,\r\n  rating: {\r\n    percentage: Number,\r\n    watching: Number,\r\n    votes: Number,\r\n    loved: Number,\r\n    hated: Number\r\n  },\r\n  country: String,\r\n  last_updated: Number,\r\n  images: {\r\n    banner: String,\r\n    fanart: String,\r\n    poster: String\r\n  },\r\n  genres: [],\r\n  released: Number,\r\n  trailer: String,\r\n  certification: String,\r\n  torrents: {}\r\n});\r\n\r\n// Create the movie model.\r\nconst Movie = mongoose.model(\"Movie\", MovieSchema);\r\n\r\n/**\r\n * A model object for movies.\r\n * @type {Movie}\r\n */\r\nexport default Movie;\r\n"
  },
  {
    "__docId__": 103,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "MovieSchema",
    "memberof": "src/models/Movie.js",
    "longname": "src/models/Movie.js~MovieSchema",
    "access": null,
    "export": false,
    "importPath": "popcorn-api/src/models/Movie.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 104,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Movie",
    "memberof": "src/models/Movie.js",
    "longname": "src/models/Movie.js~Movie",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/models/Movie.js",
    "importStyle": "Movie",
    "description": "A model object for movies.",
    "lineNumber": 41,
    "type": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 105,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/models/Show.js",
    "memberof": null,
    "longname": "src/models/Show.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport mongoose from \"mongoose\";\r\n\r\n// The show schema used by mongoose.\r\nconst ShowSchema = new mongoose.Schema({\r\n  _id: {\r\n    type: String,\r\n    required: true,\r\n    index: {\r\n      unique: true\r\n    }\r\n  },\r\n  imdb_id: String,\r\n  tvdb_id: String,\r\n  title: String,\r\n  year: String,\r\n  slug: String,\r\n  synopsis: String,\r\n  runtime: String,\r\n  rating: {\r\n    percentage: Number,\r\n    watching: Number,\r\n    votes: Number,\r\n    loved: Number,\r\n    hated: Number\r\n  },\r\n  country: String,\r\n  network: String,\r\n  air_day: String,\r\n  air_time: String,\r\n  status: String,\r\n  num_seasons: Number,\r\n  last_updated: Number,\r\n  latest_episode: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  images: {\r\n    banner: String,\r\n    fanart: String,\r\n    poster: String\r\n  },\r\n  genres: [],\r\n  episodes: []\r\n});\r\n\r\n// Create the show model.\r\nconst Show = mongoose.model(\"Show\", ShowSchema);\r\n\r\n/**\r\n * A model object for shows.\r\n * @type {Show}\r\n */\r\nexport default Show;\r\n"
  },
  {
    "__docId__": 106,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "ShowSchema",
    "memberof": "src/models/Show.js",
    "longname": "src/models/Show.js~ShowSchema",
    "access": null,
    "export": false,
    "importPath": "popcorn-api/src/models/Show.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 107,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Show",
    "memberof": "src/models/Show.js",
    "longname": "src/models/Show.js~Show",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/models/Show.js",
    "importStyle": "Show",
    "description": "A model object for shows.",
    "lineNumber": 48,
    "type": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 108,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/popcorn-api.js",
    "memberof": null,
    "longname": "src/popcorn-api.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "#!/usr/bin/env node\r\n\r\n// Import the neccesary modules.\r\nimport CLI from \"./cli\";\r\n\r\n// Run the CLI program.\r\nnew CLI().run();\r\n"
  },
  {
    "__docId__": 109,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/anime/extratorrent.js",
    "memberof": null,
    "longname": "src/providers/anime/extratorrent.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport ExtraTorrentAPI from \"extratorrent-api\";\r\n\r\nimport Extractor from \"../extractors/animeextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping anime shows from https://extratorrent.cc/. */\r\nexport default class ExtraTorrent {\r\n\r\n   /**\r\n    * Create an extratorrent object for anime content.\r\n    * @param {String} name - The name of the content provider.\r\n    * @param {?Boolean} debug - Debug mode for extra output.\r\n    */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting anime data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new ExtraTorrentAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://extratorrent.cc/.\r\n   * @returns {Anime[]} - A list of scraped anime shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.category = \"anime\";\r\n      provider.query.page = 1;\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 110,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "ExtraTorrent",
    "memberof": "src/providers/anime/extratorrent.js",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/anime/extratorrent.js",
    "importStyle": "ExtraTorrent",
    "description": "Class for scraping anime shows from https://extratorrent.cc/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 111,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent#constructor",
    "access": null,
    "description": "Create an extratorrent object for anime content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 112,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 113,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent#_extractor",
    "access": null,
    "description": "The extractor object for getting anime data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 114,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 115,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/anime/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/anime/extratorrent.js~ExtraTorrent#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - A list of scraped anime shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://extratorrent.cc/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of scraped anime shows."
    },
    "generator": false
  },
  {
    "__docId__": 116,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/anime/horriblesubs.js",
    "memberof": null,
    "longname": "src/providers/anime/horriblesubs.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport HorribleSubsAPI from \"horriblesubs-api\";\r\n\r\nimport Extractor from \"../extractors/animeextractor\";\r\nimport Util from \"../../util\";\r\nimport { maxWebRequest } from \"../../config/constants\";\r\n\r\n/** Class for scraping anime from https://horriblesubs.info/. */\r\nexport default class HorribleSubs {\r\n\r\n  /**\r\n   * Create an horriblesubs object for anime content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * A configured HorribleSubs API.\r\n     * @type {HorribleSubsAPI}\r\n     * @see https://github.com/ChrisAlderson/horriblesubs-api\r\n     */\r\n    this._horriblesubs = new HorribleSubsAPI({ debug });\r\n\r\n    /**\r\n     * The extractor object for getting show data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, this._horriblesubs, debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @returns {Anime[]} - A list of scraped animes.\r\n   */\r\n  async search() {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      const animes = await this._horriblesubs.getAllAnime();\r\n      logger.info(`${this.name}: Found ${animes.length} anime shows.`);\r\n\r\n      return await asyncq.mapLimit(animes, maxWebRequest, async anime => {\r\n        try {\r\n          anime = await this._horriblesubs.getAnimeData(anime);\r\n          return await this._extractor.getAnime(anime);\r\n        } catch (err) {\r\n          return this._util.onError(err);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 117,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "HorribleSubs",
    "memberof": "src/providers/anime/horriblesubs.js",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/anime/horriblesubs.js",
    "importStyle": "HorribleSubs",
    "description": "Class for scraping anime from https://horriblesubs.info/.",
    "lineNumber": 10,
    "interface": false
  },
  {
    "__docId__": 118,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#constructor",
    "access": null,
    "description": "Create an horriblesubs object for anime content.",
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 119,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 120,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_horriblesubs",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#_horriblesubs",
    "access": null,
    "description": "A configured HorribleSubs API.",
    "see": [
      "https://github.com/ChrisAlderson/horriblesubs-api"
    ],
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "HorribleSubsAPI"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 121,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#_extractor",
    "access": null,
    "description": "The extractor object for getting show data on torrents.",
    "lineNumber": 35,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 122,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 41,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 123,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/anime/horriblesubs.js~HorribleSubs",
    "longname": "src/providers/anime/horriblesubs.js~HorribleSubs#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 48,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - A list of scraped animes."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of scraped animes."
    },
    "generator": false
  },
  {
    "__docId__": 124,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/anime/kat.js",
    "memberof": null,
    "longname": "src/providers/anime/kat.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport KatAPI from \"kat-api-pt\";\r\n\r\nimport Extractor from \"../extractors/animeextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping anime shows from https://kat.cr/. */\r\nexport default class KAT {\r\n\r\n  /**\r\n   * Create a kat object for anime content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting anime data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new KatAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://kat.cr/.\r\n   * @returns {Anime[]} - A list of scraped anime shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.page = 1;\r\n      provider.query.verified = 1;\r\n      provider.query.adult_filter = 1;\r\n      provider.query.category = \"english-translated\";\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 125,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "KAT",
    "memberof": "src/providers/anime/kat.js",
    "longname": "src/providers/anime/kat.js~KAT",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/anime/kat.js",
    "importStyle": "KAT",
    "description": "Class for scraping anime shows from https://kat.cr/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 126,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/anime/kat.js~KAT",
    "longname": "src/providers/anime/kat.js~KAT#constructor",
    "access": null,
    "description": "Create a kat object for anime content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 127,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/anime/kat.js~KAT",
    "longname": "src/providers/anime/kat.js~KAT#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 128,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/anime/kat.js~KAT",
    "longname": "src/providers/anime/kat.js~KAT#_extractor",
    "access": null,
    "description": "The extractor object for getting anime data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 129,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/anime/kat.js~KAT",
    "longname": "src/providers/anime/kat.js~KAT#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 130,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/anime/kat.js~KAT",
    "longname": "src/providers/anime/kat.js~KAT#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - A list of scraped anime shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://kat.cr/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of scraped anime shows."
    },
    "generator": false
  },
  {
    "__docId__": 131,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/anime/nyaa.js",
    "memberof": null,
    "longname": "src/providers/anime/nyaa.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport NyaaAPI from \"nyaa-api-pt\";\r\n\r\nimport Extractor from \"../extractors/animeextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping anime shows from https://extratorrent.cc/. */\r\nexport default class ExtraTorrent {\r\n\r\n   /**\r\n    * Create an extratorrent object for anime content.\r\n    * @param {String} name - The name of the content provider.\r\n    * @param {?Boolean} debug - Debug mode for extra output.\r\n    */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting anime data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new NyaaAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://extratorrent.cc/.\r\n   * @returns {Anime[]} - A list of scraped anime shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.category = \"anime\";\r\n      provider.query.sub_category = \"english_translated\";\r\n      provider.query.offset = 1;\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 132,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "ExtraTorrent",
    "memberof": "src/providers/anime/nyaa.js",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/anime/nyaa.js",
    "importStyle": "ExtraTorrent",
    "description": "Class for scraping anime shows from https://extratorrent.cc/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 133,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/anime/nyaa.js~ExtraTorrent",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent#constructor",
    "access": null,
    "description": "Create an extratorrent object for anime content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 134,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/anime/nyaa.js~ExtraTorrent",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 135,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/anime/nyaa.js~ExtraTorrent",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent#_extractor",
    "access": null,
    "description": "The extractor object for getting anime data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 136,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/anime/nyaa.js~ExtraTorrent",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 137,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/anime/nyaa.js~ExtraTorrent",
    "longname": "src/providers/anime/nyaa.js~ExtraTorrent#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - A list of scraped anime shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://extratorrent.cc/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of scraped anime shows."
    },
    "generator": false
  },
  {
    "__docId__": 138,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/extractors/animeextractor.js",
    "memberof": null,
    "longname": "src/providers/extractors/animeextractor.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport BaseExtractor from \"./baseextractor\";\r\nimport Helper from \"../helpers/animehelper\";\r\nimport Util from \"../../util\";\r\nimport { maxWebRequest, animeMap } from \"../../config/constants\";\r\n\r\n/** Class for extracting anime shows from torrents. */\r\nexport default class Extractor extends BaseExtractor {\r\n\r\n  /**\r\n   * Create an extractor object for anime content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {Object} contentProvider - The content provider to extract content from.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, contentProvider, debug) {\r\n    super(name, contentProvider);\r\n\r\n    /**\r\n     * The helper object for adding anime shows.\r\n     * @type {Helper}\r\n     */\r\n    this._helper = new Helper(this.name, debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Get all the animes.\r\n   * @param {Object} anime - The anime information.\r\n   * @returns {Anime} - An anime.\r\n   */\r\n  async getAnime(anime) {\r\n    try {\r\n      const newAnime = await this._helper.getHummingbirdInfo(anime.slug);\r\n      if (newAnime && newAnime._id) {\r\n        delete anime.episodes[0];\r\n        return await this._helper.addEpisodes(newAnime, anime.episodes, anime.slug);\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Extract anime information based on a regex.\r\n   * @param {Object} torrent - The torrent to extract the anime information from.\r\n   * @param {Regex} regex - The regex to extract the anime information.\r\n   * @returns {Object} - Information about a anime from the torrent.\r\n   */\r\n  _extractAnime(torrent, regex) {\r\n    let animeTitle = torrent.title.match(regex)[1];\r\n    if (animeTitle.endsWith(\" \")) animeTitle = animeTitle.substring(0, animeTitle.length - 1);\r\n    animeTitle = animeTitle.replace(/\\_/g, \" \").replace(/\\./g, \" \");\r\n    let slug = animeTitle.replace(/[!\\'\\~\\,]/gi, \"\").replace(/\\s-\\s?/gi, \"\").replace(/\\s+/g, \"-\").toLowerCase();\r\n    slug = slug in animeMap ? animeMap[slug] : slug;\r\n\r\n    const quality = torrent.title.match(/(\\d{3,4})p/) !== null ? torrent.title.match(/(\\d{3,4})p/)[0] : \"480p\";\r\n\r\n    let season = 1;\r\n    let episode;\r\n    if (torrent.title.match(regex).length >= 5) {\r\n      episode = parseInt(torrent.title.match(regex)[3], 10);\r\n    } else {\r\n      episode = parseInt(torrent.title.match(regex)[2], 10);\r\n    }\r\n\r\n    const episodeTorrent = {\r\n      url: torrent.torrent_link ? torrent.torrent_link : torrent.magnet,\r\n      seeds: torrent.seeds ? torrent.seeds : 0,\r\n      peers: torrent.peers ? torrent.peers : 0,\r\n      provider: this.name\r\n    };\r\n\r\n    const anime = {\r\n      animeTitle,\r\n      slug,\r\n      torrentLink: torrent.link,\r\n      season,\r\n      episode,\r\n      quality\r\n    };\r\n    anime.episodes = {};\r\n\r\n    if (!anime.episodes[season]) anime.episodes[season] = {};\r\n    if (!anime.episodes[season][episode]) anime.episodes[season][episode] = {};\r\n    if (!anime.episodes[season][episode][quality] || (anime.episodes[season][episode][quality] && anime.episodes[season][episode][quality].seed < episodeTorrent.seed))\r\n      anime.episodes[season][episode][quality] = episodeTorrent;\r\n\r\n    return anime;\r\n  };\r\n\r\n  /**\r\n   * Get anime info from a given torrent.\r\n   * @param {Object} torrent - A torrent object to extract anime information from.\r\n   * @returns {Object} - Information about an anime from the torrent.\r\n   */\r\n   _getAnimeData(torrent) {\r\n     const secondSeasonQuality = /\\[.*\\].(.*).S?(\\d)...(\\d{2,3})\\W+(\\d{3,4}p)/i;\r\n     const oneSeasonQuality = /\\[.*\\].(\\D+)...(\\d{2,3})\\W+(\\d{3,4}p)/i;\r\n     const secondSeason = /\\[.*\\].(\\D+).S?(\\d+)...(\\d{2,3}).*\\.mkv/i;\r\n     const oneSeason = /\\[.*\\].(\\D+)...(\\d{2,3}).*\\.mkv/i;\r\n     if (torrent.title.match(secondSeasonQuality)) {\r\n      return this._extractAnime(torrent, secondSeasonQuality);\r\n    } else if (torrent.title.match(oneSeasonQuality)) {\r\n      return this._extractAnime(torrent, oneSeasonQuality);\r\n    } else if (torrent.title.match(secondSeason)) {\r\n       return this._extractAnime(torrent, secondSeason);\r\n     } else if  (torrent.title.match(oneSeason)) {\r\n       return this._extractAnime(torrent, oneSeason);\r\n     } else {\r\n       logger.warn(`${this.name}: Could not find data from torrent: '${torrent.title}'`);\r\n     }\r\n   };\r\n\r\n  /**\r\n   * Puts all the found animes from the torrents in an array.\r\n   * @param {Array} torrents - A list of torrents to extract anime information.\r\n   * @returns {Array} - A list of objects with anime information extracted from the torrents.\r\n   */\r\n  async _getAllAnimes(torrents) {\r\n    try {\r\n      const animes = [];\r\n      await asyncq.mapSeries(torrents, torrent => {\r\n        if (torrent) {\r\n          const anime = this._getAnimeData(torrent);\r\n          if (anime) {\r\n            if (animes.length != 0) {\r\n              const { animeTitle, slug, season, episode, quality } = anime;\r\n              const matching = animes\r\n                .filter(a => a.animeTitle === animeTitle)\r\n                .filter(a => a.slug === slug);\r\n\r\n              if (matching.length != 0) {\r\n                const index = animes.indexOf(matching[0]);\r\n                if (!matching[0].episodes[season]) matching[0].episodes[season] = {};\r\n                if (!matching[0].episodes[season][episode]) matching[0].episodes[season][episode] = {};\r\n                if (!matching[0].episodes[season][episode][quality] || (matching[0].episodes[season][episode][quality] && matching[0].episodes[season][episode][quality].seed < anime.episodes[season][episode][quality].seed))\r\n                  matching[0].episodes[season][episode][quality] = anime.episodes[season][episode][quality];\r\n\r\n                animes.splice(index, 1, matching[0]);\r\n              } else {\r\n                animes.push(anime);\r\n              }\r\n            } else {\r\n              animes.push(anime);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      return animes;\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query the content provider.\r\n   * @returns {Anime[]} - A list of scraped anime shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      const getTotalPages = await this._contentProvider.search(provider.query);\r\n      const totalPages = getTotalPages.total_pages; // Change to 'const' for production.\r\n      if (!totalPages) return this._util.onError(`${this.name}: total_pages returned: '${totalPages}'`);\r\n      // totalPages = 3; // For testing purposes only.\r\n      logger.info(`${this.name}: Total pages ${totalPages}`);\r\n\r\n      const torrents = await this._getAllTorrents(totalPages, provider);\r\n      const animes = await this._getAllAnimes(torrents);\r\n      return await asyncq.mapLimit(animes, maxWebRequest, anime => this.getAnime(anime));\r\n    } catch (err) {\r\n      this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 139,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Extractor",
    "memberof": "src/providers/extractors/animeextractor.js",
    "longname": "src/providers/extractors/animeextractor.js~Extractor",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/extractors/animeextractor.js",
    "importStyle": "Extractor",
    "description": "Class for extracting anime shows from torrents.",
    "lineNumber": 10,
    "interface": false,
    "extends": [
      "src/providers/extractors/baseextractor.js~BaseExtractor"
    ]
  },
  {
    "__docId__": 140,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#constructor",
    "access": null,
    "description": "Create an extractor object for anime content.",
    "lineNumber": 18,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "contentProvider",
        "description": "The content provider to extract content from."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 141,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_helper",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#_helper",
    "access": null,
    "description": "The helper object for adding anime shows.",
    "lineNumber": 25,
    "type": {
      "nullable": null,
      "types": [
        "Helper"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 142,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 31,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 143,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getAnime",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#getAnime",
    "access": null,
    "description": "Get all the animes.",
    "lineNumber": 39,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - An anime."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "An anime."
    },
    "generator": false
  },
  {
    "__docId__": 144,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_extractAnime",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#_extractAnime",
    "access": null,
    "description": "Extract anime information based on a regex.",
    "lineNumber": 57,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about a anime from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "The torrent to extract the anime information from."
      },
      {
        "nullable": null,
        "types": [
          "Regex"
        ],
        "spread": false,
        "optional": false,
        "name": "regex",
        "description": "The regex to extract the anime information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about a anime from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 145,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getAnimeData",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#_getAnimeData",
    "access": null,
    "description": "Get anime info from a given torrent.",
    "lineNumber": 104,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about an anime from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "A torrent object to extract anime information from."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about an anime from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 146,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getAllAnimes",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#_getAllAnimes",
    "access": null,
    "description": "Puts all the found animes from the torrents in an array.",
    "lineNumber": 127,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array} - A list of objects with anime information extracted from the torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "torrents",
        "description": "A list of torrents to extract anime information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "A list of objects with anime information extracted from the torrents."
    },
    "generator": false
  },
  {
    "__docId__": 147,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/extractors/animeextractor.js~Extractor",
    "longname": "src/providers/extractors/animeextractor.js~Extractor#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 168,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} - A list of scraped anime shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query the content provider."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of scraped anime shows."
    },
    "generator": false
  },
  {
    "__docId__": 148,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/extractors/baseextractor.js",
    "memberof": null,
    "longname": "src/providers/extractors/baseextractor.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport Util from \"../../util\";\r\n\r\n/** Class for base extracting data from torrents. */\r\nexport default class BaseExtractor {\r\n\r\n   /**\r\n    * Create a base extractor object.\r\n    * @param {String} name - The name of the content provider.\r\n    * @param {Object} contentProvider - The content provider to extract content from.\r\n    */\r\n  constructor(name, contentProvider) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The content provider used by the extractor.\r\n     * @type {Object}\r\n     */\r\n    this._contentProvider = contentProvider;\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Get all the torrents of a given provider.\r\n   * @param {Integer} totalPages - The total pages of the query.\r\n   * @param {Object} provider - The provider to query the content provider.\r\n   * @returns {Array} - A list of all the queried torrents.\r\n   */\r\n  async _getAllTorrents(totalPages, provider) {\r\n    try {\r\n      let torrents = [];\r\n      await asyncq.timesSeries(totalPages, async page => {\r\n        try {\r\n          if (provider.query.page) provider.query.page = page + 1;\r\n          if (provider.query.offset) provider.query.offset = page + 1;\r\n\r\n          logger.info(`${this.name}: Starting searching ${this.name} on page ${page + 1} out of ${totalPages}`);\r\n          const result = await this._contentProvider.search(provider.query);\r\n          torrents = torrents.concat(result.results);\r\n        } catch (err) {\r\n          return this._util.onError(err);\r\n        }\r\n      });\r\n      logger.info(`${this.name}: Found ${torrents.length} torrents.`);\r\n      return torrents;\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 149,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "BaseExtractor",
    "memberof": "src/providers/extractors/baseextractor.js",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/extractors/baseextractor.js",
    "importStyle": "BaseExtractor",
    "description": "Class for base extracting data from torrents.",
    "lineNumber": 7,
    "interface": false
  },
  {
    "__docId__": 150,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor#constructor",
    "access": null,
    "description": "Create a base extractor object.",
    "lineNumber": 14,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "contentProvider",
        "description": "The content provider to extract content from."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 151,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 19,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 152,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_contentProvider",
    "memberof": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor#_contentProvider",
    "access": null,
    "description": "The content provider used by the extractor.",
    "lineNumber": 25,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 153,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 31,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 154,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getAllTorrents",
    "memberof": "src/providers/extractors/baseextractor.js~BaseExtractor",
    "longname": "src/providers/extractors/baseextractor.js~BaseExtractor#_getAllTorrents",
    "access": null,
    "description": "Get all the torrents of a given provider.",
    "lineNumber": 40,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array} - A list of all the queried torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "totalPages",
        "description": "The total pages of the query."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query the content provider."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "A list of all the queried torrents."
    },
    "generator": false
  },
  {
    "__docId__": 155,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/extractors/movieextractor.js",
    "memberof": null,
    "longname": "src/providers/extractors/movieextractor.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport bytes from \"bytes\";\r\n\r\nimport BaseExtractor from \"./baseextractor\";\r\nimport Helper from \"../helpers/moviehelper\";\r\nimport Util from \"../../util\";\r\nimport { maxWebRequest, movieMap } from \"../../config/constants\";\r\n\r\n/** Class for extracting movies from torrents. */\r\nexport default class Extractor extends BaseExtractor {\r\n\r\n  /**\r\n   * Create an extractor object for movie content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {Object} contentProvider - The content provider to extract content from.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, contentProvider, debug) {\r\n    super(name, contentProvider);\r\n\r\n    /**\r\n     * The helper object for adding movies.\r\n     * @type {Helper}\r\n     */\r\n    this._helper = new Helper(this.name);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Get all the movies.\r\n   * @param {Object} movie - The movie information.\r\n   * @returns {Movie} - A movie.\r\n   */\r\n  async _getMovie(movie) {\r\n    try {\r\n      const newMovie = await this._helper.getTraktInfo(movie.slugYear);\r\n      if (newMovie && newMovie._id) return await this._helper.addTorrents(newMovie, movie.torrents);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Extract movie information based on a regex.\r\n   * @param {Object} torrent - The torrent to extract the movie information from.\r\n   * @param {String} language - The language of the torrent.\r\n   * @param {Regex} regex - The regex to extract the movie information.\r\n   * @returns {Object} - Information about a movie from the torrent.\r\n   */\r\n  _extractMovie(torrent, language, regex) {\r\n    let movieTitle = torrent.title.match(regex)[1];\r\n    if (movieTitle.endsWith(\" \")) movieTitle = movieTitle.substring(0, movieTitle.length - 1);\r\n    movieTitle = movieTitle.replace(/\\./g, \" \");\r\n    let slug = movieTitle.replace(/\\s+/g, \"-\").toLowerCase();\r\n    slug = slug in movieMap ? movieMap[slug] : slug;\r\n    const year = torrent.title.match(regex)[2];\r\n    const quality = torrent.title.match(regex)[3];\r\n\r\n    const size = torrent.size ? torrent.size : torrent.fileSize;\r\n\r\n    const movie = {\r\n      movieTitle,\r\n      slug,\r\n      slugYear: `${slug}-${year}`,\r\n      torrentLink: torrent.link,\r\n      year,\r\n      quality,\r\n      language\r\n    };\r\n    movie.torrents = {};\r\n\r\n    movie.torrents[language] = {};\r\n    movie.torrents[language][quality] = {\r\n      url: torrent.torrent_link ? torrent.torrent_link : torrent.magnet,\r\n      seed: torrent.seeds ? torrent.seeds : 0,\r\n      peer: torrent.peers ? torrent.peers : 0,\r\n      size: bytes(size.replace(/\\s/g, \"\")),\r\n      filesize: size,\r\n      provider: this.name\r\n    };\r\n\r\n    return movie;\r\n  };\r\n\r\n  /**\r\n   * Get movie info from a given torrent.\r\n   * @param {Object} torrent - A torrent object to extract movie information from.\r\n   * @param {String} language - The language of the torrent.\r\n   * @returns {Object} - Information about a movie from the torrent.\r\n   */\r\n  _getMovieData(torrent, language) {\r\n    const threeDimensions = /(.*).(\\d{4}).[3Dd]\\D+(\\d{3,4}p)/i;\r\n    const fourKay = /(.*).(\\d{4}).[4k]\\D+(\\d{3,4}p)/i;\r\n    const withYear = /(.*).(\\d{4})\\D+(\\d{3,4}p)/i;\r\n    if (torrent.title.match(threeDimensions)) {\r\n      return this._extractMovie(torrent, language, threeDimensions);\r\n    } else if (torrent.title.match(fourKay)) {\r\n      return this._extractMovie(torrent, language, fourKay);\r\n    } else if (torrent.title.match(withYear)) {\r\n      return this._extractMovie(torrent, language, withYear);\r\n    } else {\r\n      logger.warn(`${this.name}: Could not find data from torrent: '${torrent.title}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Puts all the found movies from the torrents in an array.\r\n   * @param {Array} torrents - A list of torrents to extract movie information.\r\n   * @param {String} language - The language of the torrent.\r\n   * @returns {Array} - A list of objects with movie information extracted from the torrents.\r\n   */\r\n  async _getAllMovies(torrents, language) {\r\n    try {\r\n      const movies = [];\r\n      await asyncq.mapSeries(torrents, torrent => {\r\n        if (torrent) {\r\n          const movie = this._getMovieData(torrent, language);\r\n          if (movie) {\r\n            if (movies.length != 0) {\r\n              const { movieTitle, slug, language, quality } = movie;\r\n              const matching = movies\r\n                .filter(m => m.movieTitle === movieTitle)\r\n                .filter(m => m.slug === slug);\r\n\r\n              if (matching.length != 0) {\r\n                const index = movies.indexOf(matching[0]);\r\n                if (!matching[0].torrents[language][quality]) matching[0].torrents[language][quality] = movie.torrents[language][quality];\r\n\r\n                movies.splice(index, 1, matching[0]);\r\n              } else {\r\n                movies.push(movie);\r\n              }\r\n            } else {\r\n              movies.push(movie);\r\n            }\r\n          }\r\n        }\r\n      });\r\n      return movies;\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query content provider.\r\n   * @returns {Movie[]} - A list of scraped movies.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      const getTotalPages = await this._contentProvider.search(provider.query);\r\n      const totalPages = getTotalPages.total_pages; // Change to 'const' for production.\r\n      if (!totalPages) return this._util.onError(`${this.name}: total_pages returned: '${totalPages}'`);\r\n      // totalPages = 3; // For testing purposes only.\r\n      logger.info(`${this.name}: Total pages ${totalPages}`);\r\n\r\n      const torrents = await this._getAllTorrents(totalPages, provider);\r\n      const movies = await this._getAllMovies(torrents, provider.query.language);\r\n      return await asyncq.mapLimit(movies, maxWebRequest,\r\n        movie => this._getMovie(movie).catch(err => this._util.onError(err)));\r\n    } catch (err) {\r\n      this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 156,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Extractor",
    "memberof": "src/providers/extractors/movieextractor.js",
    "longname": "src/providers/extractors/movieextractor.js~Extractor",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/extractors/movieextractor.js",
    "importStyle": "Extractor",
    "description": "Class for extracting movies from torrents.",
    "lineNumber": 11,
    "interface": false,
    "extends": [
      "src/providers/extractors/baseextractor.js~BaseExtractor"
    ]
  },
  {
    "__docId__": 157,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#constructor",
    "access": null,
    "description": "Create an extractor object for movie content.",
    "lineNumber": 19,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "contentProvider",
        "description": "The content provider to extract content from."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 158,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_helper",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_helper",
    "access": null,
    "description": "The helper object for adding movies.",
    "lineNumber": 26,
    "type": {
      "nullable": null,
      "types": [
        "Helper"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 159,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 32,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 160,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getMovie",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_getMovie",
    "access": null,
    "description": "Get all the movies.",
    "lineNumber": 40,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - A movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "movie",
        "description": "The movie information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A movie."
    },
    "generator": false
  },
  {
    "__docId__": 161,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_extractMovie",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_extractMovie",
    "access": null,
    "description": "Extract movie information based on a regex.",
    "lineNumber": 56,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about a movie from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "The torrent to extract the movie information from."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "language",
        "description": "The language of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "Regex"
        ],
        "spread": false,
        "optional": false,
        "name": "regex",
        "description": "The regex to extract the movie information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about a movie from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 162,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getMovieData",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_getMovieData",
    "access": null,
    "description": "Get movie info from a given torrent.",
    "lineNumber": 97,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about a movie from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "A torrent object to extract movie information from."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "language",
        "description": "The language of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about a movie from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 163,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getAllMovies",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#_getAllMovies",
    "access": null,
    "description": "Puts all the found movies from the torrents in an array.",
    "lineNumber": 118,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array} - A list of objects with movie information extracted from the torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "torrents",
        "description": "A list of torrents to extract movie information."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "language",
        "description": "The language of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "A list of objects with movie information extracted from the torrents."
    },
    "generator": false
  },
  {
    "__docId__": 164,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/extractors/movieextractor.js~Extractor",
    "longname": "src/providers/extractors/movieextractor.js~Extractor#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 156,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} - A list of scraped movies."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query content provider."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 165,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/extractors/showextractor.js",
    "memberof": null,
    "longname": "src/providers/extractors/showextractor.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport BaseExtractor from \"./baseextractor\";\r\nimport Helper from \"../helpers/showhelper\";\r\nimport Util from \"../../util\";\r\nimport { maxWebRequest, showMap } from \"../../config/constants\";\r\n\r\n/** Class for extracting TV shows from torrents. */\r\nexport default class Extractor extends BaseExtractor {\r\n\r\n   /**\r\n    * Create an extratorrent object for show content.\r\n    * @param {String} name - The name of the content provider.\r\n    * @param {Object} contentProvider - The content provider to extract content from.\r\n    * @param {?Boolean} debug - Debug mode for extra output.\r\n    */\r\n  constructor(name, contentProvider, debug) {\r\n    super(name, contentProvider);\r\n\r\n    /**\r\n     * The helper object for adding shows.\r\n     * @type {Helper}\r\n     */\r\n    this._helper = new Helper(this.name);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Get all the shows.\r\n   * @param {Object} show - The show information.\r\n   * @returns {Show} - A show.\r\n   */\r\n  async getShow(show) {\r\n    try {\r\n      const newShow = await this._helper.getTraktInfo(show.slug);\r\n      if (newShow && newShow._id) {\r\n        delete show.episodes[0];\r\n        return await this._helper.addEpisodes(newShow, show.episodes, show.slug);\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Extract show information based on a regex.\r\n   * @param {Object} torrent - The torrent to extract the show information from.\r\n   * @param {Regex} regex - The regex to extract the show information.\r\n   * @param {Boolean} dateBased - Check for dateBased episodes.\r\n   * @returns {Object} - Information about a show from the torrent.\r\n   */\r\n  _extractShow(torrent, regex, dateBased) {\r\n    let showTitle = torrent.title.match(regex)[1];\r\n    if (showTitle.endsWith(\" \")) showTitle = showTitle.substring(0, showTitle.length - 1);\r\n    showTitle = showTitle.replace(/\\./g, \" \");\r\n    let slug = showTitle.replace(/\\s+/g, \"-\").toLowerCase();\r\n    slug = slug in showMap ? showMap[slug] : slug;\r\n    let season = torrent.title.match(regex)[2];\r\n    let episode = torrent.title.match(regex)[3];\r\n    if (!dateBased) {\r\n      season = parseInt(season, 10);\r\n      episode = parseInt(episode, 10);\r\n    }\r\n    const quality = torrent.title.match(/(\\d{3,4})p/) !== null ? torrent.title.match(/(\\d{3,4})p/)[0] : \"480p\";\r\n\r\n    const episodeTorrent = {\r\n      url: torrent.torrent_link ? torrent.torrent_link : torrent.magnet,\r\n      seeds: torrent.seeds ? torrent.seeds : 0,\r\n      peers: torrent.peers ? torrent.peers : 0,\r\n      provider: this.name\r\n    };\r\n\r\n    const show = {\r\n      showTitle,\r\n      slug,\r\n      torrentLink: torrent.link,\r\n      season,\r\n      episode,\r\n      quality,\r\n      dateBased\r\n    };\r\n    show.episodes = {};\r\n\r\n    if (!show.episodes[season]) show.episodes[season] = {};\r\n    if (!show.episodes[season][episode]) show.episodes[season][episode] = {};\r\n    if ((!show.episodes[season][episode][quality] || show.showTitle.toLowerCase().indexOf(\"repack\") > -1) || (show.episodes[season][episode][quality] && show.episodes[season][episode][quality].seeds < episodeTorrent.seeds))\r\n      show.episodes[season][episode][quality] = episodeTorrent;\r\n\r\n    return show;\r\n  };\r\n\r\n  /**\r\n   * Get show info from a given torrent.\r\n   * @param {Object} torrent - A torrent object to extract show information from.\r\n   * @returns {Object} - Information about a show from the torrent.\r\n   */\r\n  _getShowData(torrent) {\r\n    const seasonBased = /(.*).[sS](\\d{2})[eE](\\d{2})/i;\r\n    const vtv = /(.*).(\\d{1,2})[x](\\d{2})/i;\r\n    const dateBased = /(.*).(\\d{4}).(\\d{2}.\\d{2})/i;\r\n    if (torrent.title.match(seasonBased)) {\r\n      return this._extractShow(torrent, seasonBased, false);\r\n    } else if (torrent.title.match(vtv)) {\r\n      return this._extractShow(torrent, vtv, false);\r\n    } else if (torrent.title.match(dateBased)) {\r\n      return this._extractShow(torrent, dateBased, true);\r\n    } else {\r\n      logger.warn(`${this.name}: Could not find data from torrent: '${torrent.title}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Puts all the found shows from the torrents in an array.\r\n   * @param {Array} torrents - A list of torrents to extract show information.\r\n   * @returns {Array} - A list of objects with show information extracted from the torrents.\r\n   */\r\n  async _getAllShows(torrents) {\r\n    try {\r\n      const shows = [];\r\n\r\n      await asyncq.mapSeries(torrents, torrent => {\r\n        if (torrent) {\r\n          const show = this._getShowData(torrent);\r\n          if (show) {\r\n            if (shows.length != 0) {\r\n              const { showTitle, slug, season, episode, quality } = show;\r\n              const matching = shows\r\n                .filter(s => s.showTitle === showTitle)\r\n                .filter(s => s.slug === slug);\r\n\r\n              if (matching.length != 0) {\r\n                const index = shows.indexOf(matching[0]);\r\n                if (!matching[0].episodes[season]) matching[0].episodes[season] = {};\r\n                if (!matching[0].episodes[season][episode]) matching[0].episodes[season][episode] = {};\r\n                if ((!matching[0].episodes[season][episode][quality] || matching[0].showTitle.toLowerCase().indexOf(\"repack\") > -1) || (matching[0].episodes[season][episode][quality] && matching[0].episodes[season][episode][quality].seeds < show.episodes[season][episode][quality].seeds))\r\n                  matching[0].episodes[season][episode][quality] = show.episodes[season][episode][quality];\r\n\r\n                shows.splice(index, 1, matching[0]);\r\n              } else {\r\n                shows.push(show);\r\n              }\r\n            } else {\r\n              shows.push(show);\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      return shows;\r\n    } catch (err) {\r\n      this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query the content provider.\r\n   * @returns {Show[]} - A list of scraped shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      const getTotalPages = await this._contentProvider.search(provider.query);\r\n      const totalPages = getTotalPages.total_pages; // Change to 'const' for production.\r\n      if (!totalPages) return this._util.onError(`${this.name}: total_pages returned; '${totalPages}'`);\r\n      // totalPages = 3; // For testing purposes only.\r\n      logger.info(`${this.name}: Total pages ${totalPages}`);\r\n\r\n      const torrents = await this._getAllTorrents(totalPages, provider);\r\n      const shows = await this._getAllShows(torrents);\r\n      return await asyncq.mapLimit(shows, maxWebRequest, show => this.getShow(show));\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 166,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Extractor",
    "memberof": "src/providers/extractors/showextractor.js",
    "longname": "src/providers/extractors/showextractor.js~Extractor",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/extractors/showextractor.js",
    "importStyle": "Extractor",
    "description": "Class for extracting TV shows from torrents.",
    "lineNumber": 10,
    "interface": false,
    "extends": [
      "src/providers/extractors/baseextractor.js~BaseExtractor"
    ]
  },
  {
    "__docId__": 167,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#constructor",
    "access": null,
    "description": "Create an extratorrent object for show content.",
    "lineNumber": 18,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "contentProvider",
        "description": "The content provider to extract content from."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 168,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_helper",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#_helper",
    "access": null,
    "description": "The helper object for adding shows.",
    "lineNumber": 25,
    "type": {
      "nullable": null,
      "types": [
        "Helper"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 169,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 31,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 170,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getShow",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#getShow",
    "access": null,
    "description": "Get all the shows.",
    "lineNumber": 39,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A show."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A show."
    },
    "generator": false
  },
  {
    "__docId__": 171,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_extractShow",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#_extractShow",
    "access": null,
    "description": "Extract show information based on a regex.",
    "lineNumber": 58,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about a show from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "The torrent to extract the show information from."
      },
      {
        "nullable": null,
        "types": [
          "Regex"
        ],
        "spread": false,
        "optional": false,
        "name": "regex",
        "description": "The regex to extract the show information."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "dateBased",
        "description": "Check for dateBased episodes."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about a show from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 172,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getShowData",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#_getShowData",
    "access": null,
    "description": "Get show info from a given torrent.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - Information about a show from the torrent."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrent",
        "description": "A torrent object to extract show information from."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "Information about a show from the torrent."
    },
    "generator": false
  },
  {
    "__docId__": 173,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getAllShows",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#_getAllShows",
    "access": null,
    "description": "Puts all the found shows from the torrents in an array.",
    "lineNumber": 123,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array} - A list of objects with show information extracted from the torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "torrents",
        "description": "A list of torrents to extract show information."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "A list of objects with show information extracted from the torrents."
    },
    "generator": false
  },
  {
    "__docId__": 174,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/extractors/showextractor.js~Extractor",
    "longname": "src/providers/extractors/showextractor.js~Extractor#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 166,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} - A list of scraped shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query the content provider."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 175,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/helpers/animehelper.js",
    "memberof": null,
    "longname": "src/providers/helpers/animehelper.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport HummingbirdAPI from \"hummingbird-api\";\r\n\r\nimport Anime from \"../../models/Anime\";\r\nimport Util from \"../../util\";\r\n\r\n/** class for saving anime shows. */\r\nexport default class Helper {\r\n\r\n  /**\r\n   * Create an helper object for anime content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * A configured HummingBird API.\r\n     * @type {HummingbirdAPI}\r\n     * @see https://github.com/ChrisAlderson/hummingbird-api\r\n     */\r\n    this._hummingbird = new HummingbirdAPI({ debug });\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Update the number of seasons of a given anime.\r\n   * @param {Anime} anime - The anime to update the number of seasons.\r\n   * @returns {Anime} - A newly updated anime.\r\n   */\r\n  async _updateNumSeasons(anime) {\r\n    const saved = await Anime.findOneAndUpdate({\r\n      _id: anime._id\r\n    }, anime, {\r\n      new: true,\r\n      upsert: true\r\n    }).exec();\r\n\r\n    const distinct = await Anime.distinct(\"episodes.season\", {\r\n      _id: saved._id\r\n    }).exec();\r\n    saved.num_seasons = distinct.length;\r\n\r\n    return await Anime.findOneAndUpdate({\r\n      _id: saved._id\r\n    }, saved, {\r\n      new: true,\r\n      upsert: true\r\n    }).exec();\r\n  };\r\n\r\n  /**\r\n   * Update the torrents for an existing anime.\r\n   * @param {Object} matching - The matching episode of new the anime.\r\n   * @param {Object} found - The matching episode existing anime.\r\n   * @param {Anime} anime - The anime to merge the episodes to.\r\n   * @param {String} quality - The quality of the torrent.\r\n   * @returns {Anime} - An anime with merged torrents.\r\n   */\r\n  _updateEpisode(matching, found, anime, quality) {\r\n    const index = anime.episodes.indexOf(matching);\r\n\r\n    if (found.torrents[quality] && matching.torrents[quality]) {\r\n      let update = false;\r\n\r\n      if (found.torrents[quality].seeds > matching.torrents[quality].seeds) {\r\n        update = true;\r\n      } else if (matching.torrents[quality].seeds > found.torrents[quality].seeds) {\r\n        update = false;\r\n      } else if (found.torrents[quality].url === matching.torrents[quality].url) {\r\n        update = true;\r\n      }\r\n\r\n      if (update) {\r\n        if (quality === \"480p\") matching.torrents[\"0\"] = found.torrents[quality];\r\n        matching.torrents[quality] = found.torrents[quality];\r\n      }\r\n    } else if (found.torrents[quality] && !matching.torrents[quality]) {\r\n      if (quality === \"480p\") matching.torrents[\"0\"] = found.torrents[quality];\r\n      matching.torrents[quality] = found.torrents[quality];\r\n    }\r\n\r\n    anime.episodes.splice(index, 1, matching);\r\n    return anime;\r\n  };\r\n\r\n  /**\r\n   * Update a given anime with it's associated episodes.\r\n   * @param {Anime} anime - The anime to update its episodes.\r\n   * @returns {Anime} - A newly updated anime.\r\n   */\r\n  async _updateEpisodes(anime) {\r\n    try {\r\n      const found = await Anime.findOne({\r\n        _id: anime._id\r\n      }).exec();\r\n      if (found) {\r\n        logger.info(`${this.name}: '${found.title}' is an existing anime.`);\r\n        for (let i = 0; i < found.episodes.length; i++) {\r\n          let matching = anime.episodes\r\n            .filter(animeEpisode => animeEpisode.episode === found.episodes[i].episode);\r\n\r\n          if (matching.length != 0) {\r\n            anime = this._updateEpisode(matching[0], found.episodes[i], anime, \"480p\");\r\n            anime = this._updateEpisode(matching[0], found.episodes[i], anime, \"720p\");\r\n            anime = this._updateEpisode(matching[0], found.episodes[i], anime, \"1080p\");\r\n          } else {\r\n            anime.episodes.push(found.episodes[i]);\r\n          }\r\n        }\r\n\r\n        return await this._updateNumSeasons(anime);\r\n      } else {\r\n        logger.info(`${this.name}: '${anime.title}' is a new anime!`);\r\n        const newAnime = await new Anime(anime).save();\r\n        return await this._updateNumSeasons(newAnime);\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds one season to a anime.\r\n   * @param {Anime} anime - The anime to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {Integer} seasonNumber - The season number.\r\n   * @param {String} slug - The slug of the anime.\r\n   */\r\n  async _addSeason(anime, episodes, seasonNumber, slug) {\r\n    try {\r\n      await asyncq.each(Object.keys(episodes[seasonNumber]), episodeNumber => {\r\n        const episode = {\r\n          title: `Episode ${episodeNumber}`,\r\n          torrents: {},\r\n          season: seasonNumber,\r\n          episode: episodeNumber,\r\n          overview: `We still don't have single episode overviews for anime… Sorry`,\r\n          tvdb_id: `${anime._id}-1-${episodeNumber}`\r\n        };\r\n\r\n        episode.torrents = episodes[seasonNumber][episodeNumber];\r\n        episode.torrents[0] = episodes[seasonNumber][episodeNumber][\"480p\"] ? episodes[seasonNumber][episodeNumber][\"480p\"] : episodes[seasonNumber][episodeNumber][\"720p\"];\r\n        anime.episodes.push(episode);\r\n      });\r\n    } catch (err) {\r\n      return this._util.onError(`Hummingbird: Could not find any data on: ${err.path || err} with slug: '${slug}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get info from Hummingbird and make a new anime object.\r\n   * @param {String} slug - The slug to query https://hummingbird.me/.\r\n   * @returns {Anime} - A new anime without the episodes attached.\r\n   */\r\n  async getHummingbirdInfo(slug) {\r\n    try {\r\n      const hummingbirdAnime = await this._hummingbird.Anime.getAnime(slug);\r\n\r\n      let type;\r\n      if (hummingbirdAnime.show_type.match(/tv/i)) {\r\n        type = \"show\";\r\n      } else {\r\n        type = \"movie\";\r\n      }\r\n\r\n      const genres = hummingbirdAnime.genres.map(genre => genre.name);\r\n\r\n      if (hummingbirdAnime && hummingbirdAnime.id) {\r\n        return {\r\n          _id: hummingbirdAnime.id,\r\n          mal_id: hummingbirdAnime.mal_id,\r\n          title: hummingbirdAnime.title,\r\n          year: new Date(hummingbirdAnime.started_airing).getFullYear(),\r\n          slug: hummingbirdAnime.slug,\r\n          synopsis: hummingbirdAnime.synopsis,\r\n          runtime: hummingbirdAnime.episode_length,\r\n          status: hummingbirdAnime.status,\r\n          rating: {\r\n            hated: 100,\r\n            loved: 100,\r\n            votes: 0,\r\n            watching: 0,\r\n            percentage: (Math.round(hummingbirdAnime.community_rating * 10)) * 2\r\n          },\r\n          type,\r\n          num_seasons: 0,\r\n          last_updated: Number(new Date()),\r\n          images: {\r\n            banner: hummingbirdAnime.cover_image !== null ? hummingbirdAnime.cover_image : \"images/posterholder.png\",\r\n            fanart: hummingbirdAnime.cover_image !== null ? hummingbirdAnime.cover_image : \"images/posterholder.png\",\r\n            poster: hummingbirdAnime.cover_image !== null ? hummingbirdAnime.cover_image : \"images/posterholder.png\"\r\n          },\r\n          genres: genres !== null ? genres : [\"unknown\"],\r\n          episodes: []\r\n        };\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(`Hummingbird: Could not find any data on: ${err.path || err} with slug: '${slug}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds episodes to a anime.\r\n   * @param {Show} anime - The anime to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {String} slug - The slug of the anime.\r\n   * @returns {Anime} - A anime with updated torrents.\r\n   */\r\n  async addEpisodes(anime, episodes, slug) {\r\n    try {\r\n      await asyncq.each(Object.keys(episodes), seasonNumber => this._addSeason(anime, episodes, seasonNumber, slug));\r\n      return await this._updateEpisodes(anime);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 176,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Helper",
    "memberof": "src/providers/helpers/animehelper.js",
    "longname": "src/providers/helpers/animehelper.js~Helper",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/helpers/animehelper.js",
    "importStyle": "Helper",
    "description": "class for saving anime shows.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 177,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#constructor",
    "access": null,
    "description": "Create an helper object for anime content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 178,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 179,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_hummingbird",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_hummingbird",
    "access": null,
    "description": "A configured HummingBird API.",
    "see": [
      "https://github.com/ChrisAlderson/hummingbird-api"
    ],
    "lineNumber": 28,
    "type": {
      "nullable": null,
      "types": [
        "HummingbirdAPI"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 180,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 34,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 181,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateNumSeasons",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_updateNumSeasons",
    "access": null,
    "description": "Update the number of seasons of a given anime.",
    "lineNumber": 42,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - A newly updated anime."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Anime"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime to update the number of seasons."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "A newly updated anime."
    },
    "generator": false
  },
  {
    "__docId__": 182,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateEpisode",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_updateEpisode",
    "access": null,
    "description": "Update the torrents for an existing anime.",
    "lineNumber": 71,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - An anime with merged torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "matching",
        "description": "The matching episode of new the anime."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "found",
        "description": "The matching episode existing anime."
      },
      {
        "nullable": null,
        "types": [
          "Anime"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime to merge the episodes to."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "quality",
        "description": "The quality of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "An anime with merged torrents."
    },
    "generator": false
  },
  {
    "__docId__": 183,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateEpisodes",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_updateEpisodes",
    "access": null,
    "description": "Update a given anime with it's associated episodes.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - A newly updated anime."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Anime"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime to update its episodes."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "A newly updated anime."
    },
    "generator": false
  },
  {
    "__docId__": 184,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_addSeason",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#_addSeason",
    "access": null,
    "description": "Adds one season to a anime.",
    "lineNumber": 141,
    "params": [
      {
        "nullable": null,
        "types": [
          "Anime"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "seasonNumber",
        "description": "The season number."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the anime."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 185,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getHummingbirdInfo",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#getHummingbirdInfo",
    "access": null,
    "description": "Get info from Hummingbird and make a new anime object.",
    "lineNumber": 167,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - A new anime without the episodes attached."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug to query https://hummingbird.me/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "A new anime without the episodes attached."
    },
    "generator": false
  },
  {
    "__docId__": 186,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addEpisodes",
    "memberof": "src/providers/helpers/animehelper.js~Helper",
    "longname": "src/providers/helpers/animehelper.js~Helper#addEpisodes",
    "access": null,
    "description": "Adds episodes to a anime.",
    "lineNumber": 221,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime} - A anime with updated torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "anime",
        "description": "The anime to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the anime."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Anime"
      ],
      "spread": false,
      "description": "A anime with updated torrents."
    },
    "generator": false
  },
  {
    "__docId__": 187,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/helpers/moviehelper.js",
    "memberof": null,
    "longname": "src/providers/helpers/moviehelper.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport Movie from \"../../models/Movie\";\r\nimport Util from \"../../util\";\r\nimport { trakt } from \"../../config/constants\";\r\n\r\n/** Class for saving movies. */\r\nexport default class Helper {\r\n\r\n  /**\r\n   * Create an helper object for movie content.\r\n   * @param {String} name - The name of the content provider.\r\n   */\r\n  constructor(name) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Update the torrents for an existing movie.\r\n   * @param {Movie} movie - The new movie.\r\n   * @param {Movie} found - The existing movie.\r\n   * @param {String} language - The language of the torrent.\r\n   * @param {String} quality - The quality of the torrent.\r\n   * @return {Movie} - A movie with merged torrents.\r\n   */\r\n  _updateTorrent(movie, found, language, quality) {\r\n    let update = false;\r\n\r\n    if (found.torrents[language] && movie.torrents[language]) {\r\n      if (found.torrents[language][quality] && movie.torrents[language][quality]) {\r\n        if (found.torrents[language][quality].seed > movie.torrents[language][quality].seed) {\r\n          update = true;\r\n        } else if (movie.torrents[language][quality].seed > found.torrents[language][quality].seed) {\r\n          update = false;\r\n        } else if (found.torrents[language][quality].url === movie.torrents[language][quality].url) {\r\n          update = true;\r\n        }\r\n      } else if (found.torrents[language][quality] && !movie.torrents[language][quality]) {\r\n        update = true;\r\n      }\r\n    } else if (found.torrents[language] && !movie.torrents[language]) {\r\n      if (found.torrents[language][quality]) {\r\n        movie.torrents[language] = {};\r\n        update = true;\r\n      }\r\n    }\r\n\r\n    if (update) movie.torrents[language][quality] = found.torrents[language][quality];\r\n    return movie;\r\n  };\r\n\r\n  /**\r\n   * @description Update a given movie.\r\n   * @function Helper#updateMovie\r\n   * @memberof module:providers/movie/helper\r\n   * @param {Movie} movie - The movie to update its torrent.\r\n   * @returns {Movie} - A newly updated movie.\r\n   */\r\n  async _updateMovie(movie) {\r\n    try {\r\n      const found = await Movie.findOne({\r\n        _id: movie._id\r\n      }).exec();\r\n      if (found) {\r\n        logger.info(`${this.name}: '${found.title}' is an existing movie.`);\r\n\r\n        if (found.torrents) {\r\n          Object.keys(found.torrents).forEach(language => {\r\n            movie = this._updateTorrent(movie, found, language, \"720p\");\r\n            movie = this._updateTorrent(movie, found, language, \"1080p\");\r\n          });\r\n        }\r\n\r\n        return await Movie.findOneAndUpdate({\r\n          _id: movie._id\r\n        }, movie).exec();\r\n      } else {\r\n        logger.info(`${this.name}: '${movie.title}' is a new movie!`);\r\n        return await new Movie(movie).save();\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds torrents to a movie.\r\n   * @param {Movie} movie - The movie to add the torrents to.\r\n   * @param {Object} torrents - The torrents to add to the movie.\r\n   * @returns {Movie} - A movie with torrents attached.\r\n   */\r\n  addTorrents(movie, torrents) {\r\n    return asyncq.each(Object.keys(torrents), torrent => movie.torrents[torrent] = torrents[torrent])\r\n      .then(() => this._updateMovie(movie));\r\n  };\r\n\r\n  /**\r\n   * Get info from Trakt and make a new movie object.\r\n   * @param {String} slug - The slug to query trakt.tv.\r\n   * @returns {Movie} - A new movie.\r\n   */\r\n  async getTraktInfo(slug) {\r\n    try {\r\n      const traktMovie = await trakt.movies.summary({\r\n        id: slug,\r\n        extended: \"full,images\"\r\n      });\r\n      const traktWatchers = await trakt.movies.watching({id: slug});\r\n\r\n      let watching = 0;\r\n      if (traktWatchers !== null) watching = traktWatchers.length;\r\n\r\n      if (traktMovie && traktMovie.ids[\"imdb\"]) {\r\n        return {\r\n          _id: traktMovie.ids[\"imdb\"],\r\n          imdb_id: traktMovie.ids[\"imdb\"],\r\n          title: traktMovie.title,\r\n          year: traktMovie.year,\r\n          slug: traktMovie.ids[\"slug\"],\r\n          synopsis: traktMovie.overview,\r\n          runtime: traktMovie.runtime,\r\n          rating: {\r\n            hated: 100,\r\n            loved: 100,\r\n            votes: traktMovie.votes,\r\n            watching: watching,\r\n            percentage: Math.round(traktMovie.rating * 10)\r\n          },\r\n          country: traktMovie.language,\r\n          last_updated: Number(new Date()),\r\n          images: {\r\n            banner: traktMovie.images.banner.full !== null ? traktMovie.images.banner.full : \"images/posterholder.png\",\r\n            fanart: traktMovie.images.fanart.full !== null ? traktMovie.images.fanart.full : \"images/posterholder.png\",\r\n            poster: traktMovie.images.poster.full !== null ? traktMovie.images.poster.full : \"images/posterholder.png\"\r\n          },\r\n          genres: traktMovie.genres !== null ? traktMovie.genres : [\"unknown\"],\r\n          released: new Date(traktMovie.released).getTime() / 1000.0,\r\n          trailer: traktMovie.trailer || false,\r\n          certification: traktMovie.certification,\r\n          torrents: {}\r\n        };\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(`Trakt: Could not find any data on: ${err.path || err} with slug: '${slug}'`);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 188,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Helper",
    "memberof": "src/providers/helpers/moviehelper.js",
    "longname": "src/providers/helpers/moviehelper.js~Helper",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/helpers/moviehelper.js",
    "importStyle": "Helper",
    "description": "Class for saving movies.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 189,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#constructor",
    "access": null,
    "description": "Create an helper object for movie content.",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 190,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 20,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 191,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 26,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 192,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateTorrent",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#_updateTorrent",
    "access": null,
    "description": "Update the torrents for an existing movie.",
    "lineNumber": 37,
    "params": [
      {
        "nullable": null,
        "types": [
          "Movie"
        ],
        "spread": false,
        "optional": false,
        "name": "movie",
        "description": "The new movie."
      },
      {
        "nullable": null,
        "types": [
          "Movie"
        ],
        "spread": false,
        "optional": false,
        "name": "found",
        "description": "The existing movie."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "language",
        "description": "The language of the torrent."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "quality",
        "description": "The quality of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A movie with merged torrents."
    },
    "generator": false
  },
  {
    "__docId__": 193,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateMovie",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#_updateMovie",
    "access": null,
    "description": "",
    "lineNumber": 70,
    "unknown": [
      {
        "tagName": "@description",
        "tagValue": "Update a given movie."
      },
      {
        "tagName": "@function",
        "tagValue": "Helper#updateMovie"
      },
      {
        "tagName": "@memberof",
        "tagValue": "module:providers/movie/helper"
      },
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - A newly updated movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Movie"
        ],
        "spread": false,
        "optional": false,
        "name": "movie",
        "description": "The movie to update its torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A newly updated movie."
    },
    "generator": false
  },
  {
    "__docId__": 194,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addTorrents",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#addTorrents",
    "access": null,
    "description": "Adds torrents to a movie.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - A movie with torrents attached."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Movie"
        ],
        "spread": false,
        "optional": false,
        "name": "movie",
        "description": "The movie to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "torrents",
        "description": "The torrents to add to the movie."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A movie with torrents attached."
    },
    "generator": false
  },
  {
    "__docId__": 195,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getTraktInfo",
    "memberof": "src/providers/helpers/moviehelper.js~Helper",
    "longname": "src/providers/helpers/moviehelper.js~Helper#getTraktInfo",
    "access": null,
    "description": "Get info from Trakt and make a new movie object.",
    "lineNumber": 113,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie} - A new movie."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug to query trakt.tv."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie"
      ],
      "spread": false,
      "description": "A new movie."
    },
    "generator": false
  },
  {
    "__docId__": 196,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/helpers/showhelper.js",
    "memberof": null,
    "longname": "src/providers/helpers/showhelper.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport Show from \"../../models/Show\";\r\nimport Util from \"../../util\";\r\nimport { trakt, tvdb } from \"../../config/constants\";\r\n\r\n/** Class for saving shows. */\r\nexport default class Helper {\r\n\r\n  /**\r\n   * Create an helper object for show content.\r\n   * @param {String} name - The name of the content provider.\r\n   */\r\n  constructor(name) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Update the number of seasons of a given show.\r\n   * @param {Show} show - The show to update the number of seasons.\r\n   * @returns {Show} - A newly updated show.\r\n   */\r\n  async _updateNumSeasons(show) {\r\n    const saved = await Show.findOneAndUpdate({\r\n      _id: show._id\r\n    }, show, {\r\n      new: true,\r\n      upsert: true\r\n    }).exec();\r\n\r\n    const distinct = await Show.distinct(\"episodes.season\", {\r\n      _id: saved._id\r\n    }).exec();\r\n    saved.num_seasons = distinct.length;\r\n\r\n    return await Show.findOneAndUpdate({\r\n      _id: saved._id\r\n    }, saved, {\r\n      new: true,\r\n      upsert: true\r\n    }).exec();\r\n  };\r\n\r\n  /**\r\n   * Update the torrents for an existing show.\r\n   * @param {Object} matching - The matching episode of new the show.\r\n   * @param {Object} found - The matching episode existing show.\r\n   * @param {Show} show - The show to merge the episodes to.\r\n   * @param {String} quality - The quality of the torrent.\r\n   * @returns {Show} - A show with merged torrents.\r\n   */\r\n  _updateEpisode(matching, found, show, quality) {\r\n    const index = show.episodes.indexOf(matching);\r\n\r\n    if (found.torrents[quality] && matching.torrents[quality]) {\r\n      let update = false;\r\n\r\n      if (found.torrents[quality].seeds > matching.torrents[quality].seeds) {\r\n        update = true;\r\n      } else if (matching.torrents[quality].seeds > found.torrents[quality].seeds) {\r\n        update = false;\r\n      } else if (found.torrents[quality].url === matching.torrents[quality].url) {\r\n        update = true;\r\n      }\r\n\r\n      if (update) {\r\n        if (quality === \"480p\") matching.torrents[\"0\"] = found.torrents[quality];\r\n        matching.torrents[quality] = found.torrents[quality];\r\n      }\r\n    } else if (found.torrents[quality] && !matching.torrents[quality]) {\r\n      if (quality === \"480p\") matching.torrents[\"0\"] = found.torrents[quality];\r\n      matching.torrents[quality] = found.torrents[quality];\r\n    }\r\n\r\n    show.episodes.splice(index, 1, matching);\r\n    return show;\r\n  };\r\n\r\n  /**\r\n   * Update a given show with it's associated episodes.\r\n   * @param {Show} show - The show to update its episodes.\r\n   * @returns {Show} - A newly updated show.\r\n   */\r\n  async _updateEpisodes(show) {\r\n    try {\r\n      const found = await Show.findOne({\r\n        _id: show._id\r\n      }).exec();\r\n      if (found) {\r\n        logger.info(`${this.name}: '${found.title}' is an existing show.`);\r\n        for (let i = 0; i < found.episodes.length; i++) {\r\n          let matching = show.episodes\r\n            .filter(showEpisode => showEpisode.season === found.episodes[i].season)\r\n            .filter(showEpisode => showEpisode.episode === found.episodes[i].episode);\r\n\r\n          if (matching.length != 0) {\r\n            show = this._updateEpisode(matching[0], found.episodes[i], show, \"480p\");\r\n            show = this._updateEpisode(matching[0], found.episodes[i], show, \"720p\");\r\n            show = this._updateEpisode(matching[0], found.episodes[i], show, \"1080p\");\r\n          } else {\r\n            show.episodes.push(found.episodes[i]);\r\n          }\r\n        }\r\n\r\n        return await this._updateNumSeasons(show);\r\n      } else {\r\n        logger.info(`${this.name}: '${show.title}' is a new show!`);\r\n        const newShow = await new Show(show).save();\r\n        return await this._updateNumSeasons(newShow);\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds one seasonal season to a show.\r\n   * @param {Show} show - The show to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {Integer} seasonNumber - The season number.\r\n   * @param {String} slug - The slug of the show.\r\n   */\r\n  async _addSeasonalSeason(show, episodes, seasonNumber, slug) {\r\n    try {\r\n      seasonNumber = parseInt(seasonNumber);\r\n      const season = await trakt.seasons.season({\r\n        id: slug,\r\n        season: seasonNumber,\r\n        extended: \"full\"\r\n      });\r\n\r\n      for (let episodeData in season) {\r\n        episodeData = season[episodeData];\r\n        if (episodes[seasonNumber] && episodes[seasonNumber][episodeData.number]) {\r\n          const episode = {\r\n            tvdb_id: episodeData.ids[\"tvdb\"],\r\n            season: episodeData.season,\r\n            episode: episodeData.number,\r\n            title: episodeData.title,\r\n            overview: episodeData.overview,\r\n            date_based: false,\r\n            first_aired: new Date(episodeData.first_aired).getTime() / 1000.0,\r\n            watched: {\r\n              watched: false\r\n            },\r\n            torrents: {}\r\n          };\r\n\r\n          if (episode.first_aired > show.latest_episode) show.latest_episode = episode.first_aired;\r\n\r\n          episode.torrents = episodes[seasonNumber][episodeData.number];\r\n          episode.torrents[0] = episodes[seasonNumber][episodeData.number][\"480p\"] ? episodes[seasonNumber][episodeData.number][\"480p\"] : episodes[seasonNumber][episodeData.number][\"720p\"];\r\n          show.episodes.push(episode);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(`Trakt: Could not find any data on: ${err.path || err} with slug: '${slug}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds one datebased season to a show.\r\n   * @param {Show} show - The show to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {Integer} seasonNumber - The season number.\r\n   * @param {String} slug - The slug of the show.\r\n   */\r\n  async _addDateBasedSeason(show, episodes, seasonNumber, slug) {\r\n    try {\r\n      if (show.tvdb_id) {\r\n        const tvdbShow = await tvdb.getSeriesAllById(show.tvdb_id);\r\n        for (let episodeData in tvdbShow.Episodes) {\r\n          episodeData = tvdbShow.Episodes[episodeData];\r\n\r\n          const firstAired = new Date(episodeData.FirstAired);\r\n\r\n          let day = firstAired.getDate();\r\n          day = day < 10 ? `0${day}` : day;\r\n          let month = (firstAired.getMonth() + 1);\r\n          month = month < 10 ? `0${month}` : month;\r\n\r\n          const episodeNumber = `${month}-${day}`;\r\n\r\n          if (episodes[seasonNumber] && episodes[seasonNumber][episodeNumber]) {\r\n            const episode = {\r\n              tvdb_id: episodeData.id,\r\n              season: episodeData.SeasonNumber,\r\n              episode: episodeData.EpisodeNumber,\r\n              title: episodeData.EpisodeName,\r\n              overview: episodeData.Overview,\r\n              date_based: true,\r\n              first_aired: new Date(firstAired).getTime() / 1000.0,\r\n              watched: {\r\n                watched: false\r\n              },\r\n              torrents: {}\r\n            };\r\n\r\n            if (episode.first_aired > show.latest_episode) show.latest_episode = episode.first_aired;\r\n\r\n            episode.torrents = episodes[seasonNumber][episodeNumber];\r\n            episode.torrents[0] = episodes[seasonNumber][episodeNumber][\"480p\"] ? episodes[seasonNumber][episodeNumber][\"480p\"] : episodes[seasonNumber][episodeNumber][\"720p\"];\r\n            show.episodes.push(episode);\r\n          }\r\n        }\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(`TVDB: Could not find any data on: ${err.path || err} with tvdb_id: '${show.tvdb_id}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds one season to a show.\r\n   * @param {Show} show - The show to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {Integer} seasonNumber - The season number.\r\n   * @param {String} slug - The slug of the show.\r\n   * @returns {Show} - A new show with seasons.\r\n   */\r\n  async _addSeason(show, episodes, seasonNumber, slug) {\r\n    if (episodes.dateBased) {\r\n      return await this._addDateBasedSeason(show, episodes, seasonNumber, slug);\r\n    } else {\r\n      return await this._addSeasonalSeason(show, episodes, seasonNumber, slug);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get info from Trakt and make a new show object.\r\n   * @param {String} slug - The slug to query https://trakt.tv/.\r\n   * @returns {Show} - A new show without the episodes attached.\r\n   */\r\n  async getTraktInfo(slug) {\r\n    try {\r\n      const traktShow = await trakt.shows.summary({\r\n        id: slug,\r\n        extended: \"full,images\"\r\n      });\r\n      const traktWatchers = await trakt.shows.watching({id: slug});\r\n\r\n      let watching = 0;\r\n      if (traktWatchers !== null) watching = traktWatchers.length;\r\n\r\n      if (traktShow && traktShow.ids[\"imdb\"]) {\r\n        return {\r\n          _id: traktShow.ids[\"imdb\"],\r\n          imdb_id: traktShow.ids[\"imdb\"],\r\n          tvdb_id: traktShow.ids[\"tvdb\"],\r\n          title: traktShow.title,\r\n          year: traktShow.year,\r\n          slug: traktShow.ids[\"slug\"],\r\n          synopsis: traktShow.overview,\r\n          runtime: traktShow.runtime,\r\n          rating: {\r\n            hated: 100,\r\n            loved: 100,\r\n            votes: traktShow.votes,\r\n            watching: watching,\r\n            percentage: Math.round(traktShow.rating * 10)\r\n          },\r\n          country: traktShow.country,\r\n          network: traktShow.network,\r\n          air_day: traktShow.airs.day,\r\n          air_time: traktShow.airs.time,\r\n          status: traktShow.status,\r\n          num_seasons: 0,\r\n          last_updated: Number(new Date()),\r\n          latest_episode: 0,\r\n          images: {\r\n            banner: traktShow.images.banner.full !== null ? traktShow.images.banner.full : \"images/posterholder.png\",\r\n            fanart: traktShow.images.fanart.full !== null ? traktShow.images.fanart.full : \"images/posterholder.png\",\r\n            poster: traktShow.images.poster.full !== null ? traktShow.images.poster.full : \"images/posterholder.png\"\r\n          },\r\n          genres: traktShow.genres !== null ? traktShow.genres : [\"unknown\"],\r\n          episodes: []\r\n        };\r\n      }\r\n    } catch (err) {\r\n      return this._util.onError(`Trakt: Could not find any data on: ${err.path || err} with slug: '${slug}'`);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Adds episodes to a show.\r\n   * @param {Show} show - The show to add the torrents to.\r\n   * @param {Object} episodes - The episodes containing the torrents.\r\n   * @param {String} slug - The slug of the show.\r\n   * @returns {Show} - A show with updated torrents.\r\n   */\r\n  async addEpisodes(show, episodes, slug) {\r\n    try {\r\n      await asyncq.each(Object.keys(episodes), seasonNumber => this._addSeason(show, episodes, seasonNumber, slug));\r\n      return await this._updateEpisodes(show);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 197,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Helper",
    "memberof": "src/providers/helpers/showhelper.js",
    "longname": "src/providers/helpers/showhelper.js~Helper",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/helpers/showhelper.js",
    "importStyle": "Helper",
    "description": "Class for saving shows.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 198,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#constructor",
    "access": null,
    "description": "Create an helper object for show content.",
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 199,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 20,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 200,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 26,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 201,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateNumSeasons",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_updateNumSeasons",
    "access": null,
    "description": "Update the number of seasons of a given show.",
    "lineNumber": 34,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A newly updated show."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to update the number of seasons."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A newly updated show."
    },
    "generator": false
  },
  {
    "__docId__": 202,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateEpisode",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_updateEpisode",
    "access": null,
    "description": "Update the torrents for an existing show.",
    "lineNumber": 63,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A show with merged torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "matching",
        "description": "The matching episode of new the show."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "found",
        "description": "The matching episode existing show."
      },
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to merge the episodes to."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "quality",
        "description": "The quality of the torrent."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A show with merged torrents."
    },
    "generator": false
  },
  {
    "__docId__": 203,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_updateEpisodes",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_updateEpisodes",
    "access": null,
    "description": "Update a given show with it's associated episodes.",
    "lineNumber": 95,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A newly updated show."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to update its episodes."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A newly updated show."
    },
    "generator": false
  },
  {
    "__docId__": 204,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_addSeasonalSeason",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_addSeasonalSeason",
    "access": null,
    "description": "Adds one seasonal season to a show.",
    "lineNumber": 134,
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "seasonNumber",
        "description": "The season number."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the show."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 205,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_addDateBasedSeason",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_addDateBasedSeason",
    "access": null,
    "description": "Adds one datebased season to a show.",
    "lineNumber": 179,
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "seasonNumber",
        "description": "The season number."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the show."
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 206,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_addSeason",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#_addSeason",
    "access": null,
    "description": "Adds one season to a show.",
    "lineNumber": 231,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A new show with seasons."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "seasonNumber",
        "description": "The season number."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the show."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A new show with seasons."
    },
    "generator": false
  },
  {
    "__docId__": 207,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "getTraktInfo",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#getTraktInfo",
    "access": null,
    "description": "Get info from Trakt and make a new show object.",
    "lineNumber": 244,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A new show without the episodes attached."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug to query https://trakt.tv/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A new show without the episodes attached."
    },
    "generator": false
  },
  {
    "__docId__": 208,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "addEpisodes",
    "memberof": "src/providers/helpers/showhelper.js~Helper",
    "longname": "src/providers/helpers/showhelper.js~Helper#addEpisodes",
    "access": null,
    "description": "Adds episodes to a show.",
    "lineNumber": 301,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show} - A show with updated torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Show"
        ],
        "spread": false,
        "optional": false,
        "name": "show",
        "description": "The show to add the torrents to."
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "episodes",
        "description": "The episodes containing the torrents."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "slug",
        "description": "The slug of the show."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show"
      ],
      "spread": false,
      "description": "A show with updated torrents."
    },
    "generator": false
  },
  {
    "__docId__": 209,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/movies/extratorrent.js",
    "memberof": null,
    "longname": "src/providers/movies/extratorrent.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport ExtraTorrentAPI from \"extratorrent-api\";\r\n\r\nimport Extractor from \"../extractors/movieextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping movies from https://extratorrent.cc/. */\r\nexport default class ExtraTorrent {\r\n\r\n  /**\r\n   * Create an extratorrent object for movie content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting movie data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new ExtraTorrentAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://extratorrent.cc/.\r\n   * @returns {Movie[]} - A list of scraped movies.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.category = \"movies\";\r\n      provider.query.page = 1;\r\n      provider.query.language = provider.query.language ? provider.query.language : \"en\";\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 210,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "ExtraTorrent",
    "memberof": "src/providers/movies/extratorrent.js",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/movies/extratorrent.js",
    "importStyle": "ExtraTorrent",
    "description": "Class for scraping movies from https://extratorrent.cc/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 211,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent#constructor",
    "access": null,
    "description": "Create an extratorrent object for movie content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 212,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 213,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent#_extractor",
    "access": null,
    "description": "The extractor object for getting movie data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 214,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 215,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/movies/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/movies/extratorrent.js~ExtraTorrent#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} - A list of scraped movies."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://extratorrent.cc/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 216,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/movies/kat.js",
    "memberof": null,
    "longname": "src/providers/movies/kat.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport KatAPI from \"kat-api-pt\";\r\n\r\nimport Extractor from \"../extractors/movieextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping movies from https://kat.cr/. */\r\nexport default class KAT {\r\n\r\n  /**\r\n   * Create a kat object for movie content.\r\n   * @param {String} name - The name of the content provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting show data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new KatAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://kat.cr/.\r\n   * @returns {Movie[]} - A list of scraped movies.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.page = 1;\r\n      provider.query.verified = 1;\r\n      provider.query.adult_filter = 1;\r\n      provider.query.language = provider.query.language ? provider.query.language : \"en\";\r\n      provider.query.category = \"movies\";\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 217,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "KAT",
    "memberof": "src/providers/movies/kat.js",
    "longname": "src/providers/movies/kat.js~KAT",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/movies/kat.js",
    "importStyle": "KAT",
    "description": "Class for scraping movies from https://kat.cr/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 218,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/movies/kat.js~KAT",
    "longname": "src/providers/movies/kat.js~KAT#constructor",
    "access": null,
    "description": "Create a kat object for movie content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 219,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/movies/kat.js~KAT",
    "longname": "src/providers/movies/kat.js~KAT#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 220,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/movies/kat.js~KAT",
    "longname": "src/providers/movies/kat.js~KAT#_extractor",
    "access": null,
    "description": "The extractor object for getting show data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 221,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/movies/kat.js~KAT",
    "longname": "src/providers/movies/kat.js~KAT#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 222,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/movies/kat.js~KAT",
    "longname": "src/providers/movies/kat.js~KAT#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} - A list of scraped movies."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://kat.cr/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 223,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/movies/yts.js",
    "memberof": null,
    "longname": "src/providers/movies/yts.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport req from \"request\";\r\nimport Movie from \"../../models/Movie\";\r\nimport { maxWebRequest, webRequestTimeout } from \"../../config/constants\";\r\nimport Helper from \"../helpers/moviehelper\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping movies from https://yts.ag/. */\r\nexport default class YTS {\r\n\r\n  /**\r\n   * Create a yts object for movie content.\r\n   * @param {String} name - The name of the content provider.\r\n   */\r\n  constructor(name) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The request object with added defaults.\r\n     * @type {Object}\r\n     */\r\n    this._request = req.defaults({\r\n      \"headers\": {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      \"baseUrl\": \"https://yts.ag/api/v2/list_movies.json\",\r\n      \"timeout\": webRequestTimeout * 1000\r\n    });\r\n\r\n    /**\r\n     * The helper object for adding movies.\r\n     * @type {Helper}\r\n     */\r\n    this._helper = new Helper(this.name);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Get the total pages to go through.\r\n   * @param {Boolean} [retry=true] - Retry the request.\r\n   * @returns {Promise} - The maximum pages to go through.\r\n   */\r\n  _getTotalPages(retry = true) {\r\n    const url = \"list_movies.json\";\r\n    return new Promise((resolve, reject) => {\r\n      this._request(url, (err, res, body) => {\r\n        if (err && retry) {\r\n          return resolve(this._getTotalPages(false));\r\n        } else if (err) {\r\n          return reject(`YTS: ${err} with link: 'list_movies.json'`);\r\n        } else if (!body || res.statusCode >= 400) {\r\n          return reject(`YTS: Could not find data on '${url}'.`);\r\n        } else {\r\n          body = JSON.parse(body);\r\n          const totalPages = Math.ceil(body.data.movie_count / 50);\r\n          return resolve(totalPages);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Format data from movies.\r\n   * @param {Object} data - Data about the movies.\r\n   * @returns {Object} - An object with the imdb id and the torrents.\r\n   */\r\n  _formatPage(data) {\r\n    return asyncq.each(data, movie => {\r\n      if (movie && movie.torrents && movie.imdb_code && movie.language.match(/english/i)) {\r\n        const torrents = {};\r\n        torrents[\"en\"] = {};\r\n        movie.torrents.forEach(torrent => {\r\n          if (torrent.quality !== \"3D\") {\r\n            torrents[\"en\"][torrent.quality] = {\r\n              url: `magnet:?xt=urn:btih:${torrent.hash}&tr=udp://glotorrents.pw:6969/announce&tr=udp://tracker.opentrackr.org:1337/announce&tr=udp://torrent.gresille.org:80/announce&tr=udp://tracker.openbittorrent.com:80&tr=udp://tracker.coppersurfer.tk:6969&tr=udp://tracker.leechers-paradise.org:6969&tr=udp://p4p.arenabg.ch:1337&tr=udp://tracker.internetwarriors.net:1337`,\r\n              seed: torrent.seeds,\r\n              peer: torrent.peers,\r\n              size: torrent.size_bytes,\r\n              filesize: torrent.size,\r\n              provider: \"YTS\"\r\n            };\r\n          }\r\n        });\r\n\r\n        return {\r\n          imdb_id: movie.imdb_code,\r\n          torrents\r\n        };\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Get formatted data from one page.\r\n   * @param {Integer} page - The page to get the data from.\r\n   * @param {Boolean} [retry=true] - Retry the function.\r\n   * @returns {Promise} - Formatted data from one page.\r\n   */\r\n  _getOnePage(page, retry = true) {\r\n    const url = `?limit=50&page=${page + 1}`;\r\n    return new Promise((resolve, reject) => {\r\n      this._request(url, (err, res, body) => {\r\n        if (err && retry) {\r\n          return resolve(this._getOnePage(page, false));\r\n        } else if (err) {\r\n          return reject(`YTS: ${err} with link: '?limit=50&page=${page + 1}'`);\r\n        } else if (!body || res.statusCode >= 400) {\r\n          return reject(`YTS: Could not find data on '${url}'.`);\r\n        } else {\r\n          body = JSON.parse(body);\r\n          return resolve(this._formatPage(body.data.movies));\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * All the found movies.\r\n   * @returns {Array} - A list of all the found movies.\r\n   */\r\n  async _getMovies() {\r\n    try {\r\n      const totalPages = await this._getTotalPages(); // Change to 'const' for production.\r\n      if (!totalPages) return this._util.onError(`${this.name}: totalPages returned; '${totalPages}'`);\r\n      // totalPages = 3; // For testing purposes only.\r\n      let movies = [];\r\n      return await asyncq.timesSeries(totalPages, async page => {\r\n        try {\r\n          logger.info(`${this.name}: Starting searching YTS on page ${page + 1} out of ${totalPages}`);\r\n          const onePage = await this._getOnePage(page);\r\n          movies = movies.concat(onePage);\r\n        } catch (err) {\r\n          return this._util.onError(err);\r\n        }\r\n      }).then(() => movies);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @returns {Movie[]} - A list of scraped movies.\r\n   */\r\n  async search() {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      const movies = await this._getMovies();\r\n      return await asyncq.eachLimit(movies, maxWebRequest, async ytsMovie => {\r\n        if (ytsMovie && ytsMovie.imdb_id) {\r\n          const newMovie = await this._helper.getTraktInfo(ytsMovie.imdb_id);\r\n          if (newMovie && newMovie._id) {\r\n            delete ytsMovie.imdb_id;\r\n            return await this._helper.addTorrents(newMovie, ytsMovie.torrents);\r\n          }\r\n        }\r\n      });\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 224,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "YTS",
    "memberof": "src/providers/movies/yts.js",
    "longname": "src/providers/movies/yts.js~YTS",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/movies/yts.js",
    "importStyle": "YTS",
    "description": "Class for scraping movies from https://yts.ag/.",
    "lineNumber": 10,
    "interface": false
  },
  {
    "__docId__": 225,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#constructor",
    "access": null,
    "description": "Create a yts object for movie content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 226,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 227,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_request",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_request",
    "access": null,
    "description": "The request object with added defaults.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 228,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_helper",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_helper",
    "access": null,
    "description": "The helper object for adding movies.",
    "lineNumber": 39,
    "type": {
      "nullable": null,
      "types": [
        "Helper"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 229,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 45,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 230,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getTotalPages",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_getTotalPages",
    "access": null,
    "description": "Get the total pages to go through.",
    "lineNumber": 53,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - The maximum pages to go through."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "retry",
        "description": "Retry the request."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "The maximum pages to go through."
    },
    "generator": false
  },
  {
    "__docId__": 231,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_formatPage",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_formatPage",
    "access": null,
    "description": "Format data from movies.",
    "lineNumber": 77,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object} - An object with the imdb id and the torrents."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "data",
        "description": "Data about the movies."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "An object with the imdb id and the torrents."
    },
    "generator": false
  },
  {
    "__docId__": 232,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getOnePage",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_getOnePage",
    "access": null,
    "description": "Get formatted data from one page.",
    "lineNumber": 109,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - Formatted data from one page."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Integer"
        ],
        "spread": false,
        "optional": false,
        "name": "page",
        "description": "The page to get the data from."
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "true",
        "defaultRaw": true,
        "name": "retry",
        "description": "Retry the function."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "Formatted data from one page."
    },
    "generator": false
  },
  {
    "__docId__": 233,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getMovies",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#_getMovies",
    "access": null,
    "description": "All the found movies.",
    "lineNumber": 131,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Array} - A list of all the found movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": "A list of all the found movies."
    },
    "generator": false
  },
  {
    "__docId__": 234,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/movies/yts.js~YTS",
    "longname": "src/providers/movies/yts.js~YTS#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 155,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} - A list of scraped movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 235,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/shows/extratorrent.js",
    "memberof": null,
    "longname": "src/providers/shows/extratorrent.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport ExtraTorrentAPI from \"extratorrent-api\";\r\n\r\nimport Extractor from \"../extractors/showextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping shows from https://extratorrent.cc/. */\r\nexport default class ExtraTorrent {\r\n\r\n   /**\r\n    * Create an extratorrent object for show content.\r\n    * @param {String} name - The name of the content provider.\r\n    * @param {?Boolean} debug - Debug mode for extra output.\r\n    */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting show data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new ExtraTorrentAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://extratorrent.cc/.\r\n   * @returns {Show[]} - A list of scraped shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.category = \"tv\";\r\n      provider.query.page = 1;\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 236,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "ExtraTorrent",
    "memberof": "src/providers/shows/extratorrent.js",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/shows/extratorrent.js",
    "importStyle": "ExtraTorrent",
    "description": "Class for scraping shows from https://extratorrent.cc/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 237,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent#constructor",
    "access": null,
    "description": "Create an extratorrent object for show content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the content provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 238,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 239,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent#_extractor",
    "access": null,
    "description": "The extractor object for getting show data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 240,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 241,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/shows/extratorrent.js~ExtraTorrent",
    "longname": "src/providers/shows/extratorrent.js~ExtraTorrent#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} - A list of scraped shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://extratorrent.cc/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 242,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/shows/eztv.js",
    "memberof": null,
    "longname": "src/providers/shows/eztv.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport EztvAPI from \"eztv-api-pt\";\r\n\r\nimport Extractor from \"../extractors/showextractor\";\r\nimport Util from \"../../util\";\r\nimport { maxWebRequest } from \"../../config/constants\";\r\n\r\n/** Class for scraping shows from https://eztv.ag/. */\r\nexport default class EZTV {\r\n\r\n  /**\r\n   * Create an eztv object for show content.\r\n   * @param {String} name - The name of the torrent provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * A configured EZTV API.\r\n     * @type {EztvAPI}\r\n     * @see https://github.com/ChrisAlderson/eztv-api-pt\r\n     */\r\n    this._eztv = new EztvAPI({ debug });\r\n\r\n    /**\r\n     * The extractor object for getting show data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, this._eztv, debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @returns {Show[]} - A list of scraped shows.\r\n   */\r\n  async search() {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      const shows = await this._eztv.getAllShows();\r\n      logger.info(`${this.name}: Found ${shows.length} shows.`);\r\n\r\n      return await asyncq.mapLimit(shows, maxWebRequest, async show => {\r\n        try {\r\n          show = await this._eztv.getShowData(show);\r\n          return await this._extractor.getShow(show);\r\n        } catch (err) {\r\n          return this._util.onError(err);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 243,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "EZTV",
    "memberof": "src/providers/shows/eztv.js",
    "longname": "src/providers/shows/eztv.js~EZTV",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/shows/eztv.js",
    "importStyle": "EZTV",
    "description": "Class for scraping shows from https://eztv.ag/.",
    "lineNumber": 10,
    "interface": false
  },
  {
    "__docId__": 244,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#constructor",
    "access": null,
    "description": "Create an eztv object for show content.",
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the torrent provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 245,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 22,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 246,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_eztv",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#_eztv",
    "access": null,
    "description": "A configured EZTV API.",
    "see": [
      "https://github.com/ChrisAlderson/eztv-api-pt"
    ],
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "EztvAPI"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 247,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#_extractor",
    "access": null,
    "description": "The extractor object for getting show data on torrents.",
    "lineNumber": 35,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 248,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 41,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 249,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/shows/eztv.js~EZTV",
    "longname": "src/providers/shows/eztv.js~EZTV#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 48,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} - A list of scraped shows."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 250,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/providers/shows/kat.js",
    "memberof": null,
    "longname": "src/providers/shows/kat.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\nimport KatAPI from \"kat-api-pt\";\r\n\r\nimport Extractor from \"../extractors/showextractor\";\r\nimport Util from \"../../util\";\r\n\r\n/** Class for scraping shows from https://kat.cr/. */\r\nexport default class KAT {\r\n\r\n  /**\r\n   * Create a kat object for show content.\r\n   * @param {String} name - The name of the torrent provider.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(name, debug) {\r\n    /**\r\n     * The name of the torrent provider.\r\n     * @type {String}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * The extractor object for getting show data on torrents.\r\n     * @type {Extractor}\r\n     */\r\n    this._extractor = new Extractor(this.name, new KatAPI({ debug }), debug);\r\n\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    this._util = new Util();\r\n  };\r\n\r\n  /**\r\n   * Returns a list of all the inserted torrents.\r\n   * @param {Object} provider - The provider to query https://kat.cr/.\r\n   * @returns {Show[]} - A list of scraped shows.\r\n   */\r\n  async search(provider) {\r\n    try {\r\n      logger.info(`${this.name}: Starting scraping...`);\r\n      provider.query.page = 1;\r\n      provider.query.verified = 1;\r\n      provider.query.adult_filter = 1;\r\n      provider.query.category = \"tv\";\r\n      provider.query.language = \"en\";\r\n\r\n      return await this._extractor.search(provider);\r\n    } catch (err) {\r\n      return this._util.onError(err);\r\n    }\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 251,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "KAT",
    "memberof": "src/providers/shows/kat.js",
    "longname": "src/providers/shows/kat.js~KAT",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/providers/shows/kat.js",
    "importStyle": "KAT",
    "description": "Class for scraping shows from https://kat.cr/.",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 252,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/providers/shows/kat.js~KAT",
    "longname": "src/providers/shows/kat.js~KAT#constructor",
    "access": null,
    "description": "Create a kat object for show content.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "The name of the torrent provider."
      },
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 253,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "name",
    "memberof": "src/providers/shows/kat.js~KAT",
    "longname": "src/providers/shows/kat.js~KAT#name",
    "access": null,
    "description": "The name of the torrent provider.",
    "lineNumber": 21,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 254,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_extractor",
    "memberof": "src/providers/shows/kat.js~KAT",
    "longname": "src/providers/shows/kat.js~KAT#_extractor",
    "access": null,
    "description": "The extractor object for getting show data on torrents.",
    "lineNumber": 27,
    "type": {
      "nullable": null,
      "types": [
        "Extractor"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 255,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_util",
    "memberof": "src/providers/shows/kat.js~KAT",
    "longname": "src/providers/shows/kat.js~KAT#_util",
    "access": null,
    "description": "The util object with general functions.",
    "lineNumber": 33,
    "type": {
      "nullable": null,
      "types": [
        "Util"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 256,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/providers/shows/kat.js~KAT",
    "longname": "src/providers/shows/kat.js~KAT#search",
    "access": null,
    "description": "Returns a list of all the inserted torrents.",
    "lineNumber": 41,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} - A list of scraped shows."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "provider",
        "description": "The provider to query https://kat.cr/."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 257,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/scraper.js",
    "memberof": null,
    "longname": "src/scraper.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport asyncq from \"async-q\";\r\n\r\nimport EZTV from \"./providers/shows/eztv\";\r\nimport HorribleSubs from \"./providers/anime/horriblesubs\";\r\nimport extratorrentAnime from \"./providers/anime/extratorrent\";\r\nimport extratorrentMovie from \"./providers/movies/extratorrent\";\r\nimport extratorrentShow from \"./providers/shows/extratorrent\";\r\nimport katAnime from \"./providers/anime/kat\";\r\nimport katMovie from \"./providers/movies/kat\";\r\nimport katShow from \"./providers/shows/kat\";\r\nimport Nyaa from \"./providers/anime/nyaa\";\r\nimport YTS from \"./providers/movies/yts\";\r\nimport Util from \"./util\";\r\nimport {\r\n  collections,\r\n  extratorrentAnimeProviders,\r\n  extratorrentMovieProviders,\r\n  extratorrentShowProviders,\r\n  katAnimeProviders,\r\n  katMovieProviders,\r\n  katShowProviders,\r\n  nyaaAnimeProviders\r\n} from \"./config/constants\";\r\n\r\n/** Class for scraping movies and shows. */\r\nexport default class Scraper {\r\n\r\n  /**\r\n   * Create a scraper object.\r\n   * @param {?Boolean} debug - Debug mode for extra output.\r\n   */\r\n  constructor(debug) {\r\n    /**\r\n     * The util object with general functions.\r\n     * @type {Util}\r\n     */\r\n    Scraper._util = new Util();\r\n\r\n    /**\r\n     * Debug mode for extra output.\r\n     * @type {Boolean}\r\n     */\r\n    Scraper._debug = debug;\r\n  };\r\n\r\n  /**\r\n   * Start show scraping from ExtraTorrent.\r\n   * @returns {Show[]} A list of all the scraped shows.\r\n   */\r\n  _scrapeExtraTorrentShows() {\r\n    return asyncq.concatSeries(extratorrentShowProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const extratorrentProvider = new extratorrentShow(provider.name, Scraper._debug);\r\n        const extratorrentShows = await extratorrentProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return extratorrentShows;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start scraping from EZTV.\r\n   * @returns {Show[]} A list of all the scraped shows.\r\n   */\r\n  async _scrapeEZTVShows() {\r\n    try {\r\n      const eztv = new EZTV(\"EZTV\", Scraper._debug);\r\n      Scraper._util.setStatus(`Scraping ${eztv.name}`);\r\n      const eztvShows = await eztv.search();\r\n      logger.info(`${eztv.name}: Done.`);\r\n      return eztvShows;\r\n    } catch (err) {\r\n      return Scraper._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Start show scraping from KAT.\r\n   * @returns {Show[]} A list of all the scraped shows.\r\n   */\r\n  _scrapeKATShows() {\r\n    return asyncq.concatSeries(katShowProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const katProvider = new katShow(provider.name, Scraper._debug);\r\n        const katShows = await katProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return katShows;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start movie scraping from ExtraTorrent.\r\n   * @returns {Movie[]} A list of all the scraped movies.\r\n   */\r\n  _scrapeExtraTorrentMovies() {\r\n    return asyncq.concatSeries(extratorrentMovieProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const extratorrentProvider = new extratorrentMovie(provider.name, Scraper._debug);\r\n        const extratorrentMovies = await extratorrentProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return extratorrentMovies;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start movie scraping from KAT.\r\n   * @returns {Movie[]} A list of all the scraped movies.\r\n   */\r\n  _scrapeKATMovies() {\r\n    return asyncq.concatSeries(katMovieProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const katProvider = new katMovie(provider.name, Scraper._debug);\r\n        const katShows = await katProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return katShows;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start scraping from YTS.\r\n   * @returns {Movie[]} A list of all the scraped movies.\r\n   */\r\n  async _scrapeYTSMovies() {\r\n    try {\r\n      const yts = new YTS(\"YTS\");\r\n      Scraper._util.setStatus(`Scraping ${yts.name}`);\r\n      const ytsMovies = await yts.search();\r\n      logger.info(`${yts.name}: Done.`);\r\n      return ytsMovies;\r\n    } catch (err) {\r\n      return Scraper._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Start anime scraping from ExtraTorrent.\r\n   * @returns {Anime[]} A list of all the scraped movies.\r\n   */\r\n  _scrapeExtraTorrentAnime() {\r\n    return asyncq.concatSeries(extratorrentAnimeProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const extratorrentProvider = new extratorrentAnime(provider.name, Scraper._debug);\r\n        const extratorrentAnimes = await extratorrentProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return extratorrentAnimes;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start scraping from HorribleSubs.\r\n   * @returns {Anime[]} A list of all the scraped anime.\r\n   */\r\n  async _scrapeHorribleSubsAnime() {\r\n    try {\r\n      const horribleSubs = new HorribleSubs(\"HorribleSubs\", Scraper._debug);\r\n      Scraper._util.setStatus(`Scraping ${horribleSubs.name}`);\r\n      const horribleSubsAnime = await horribleSubs.search();\r\n      logger.info(`${horribleSubs.name}: Done.`);\r\n      return horribleSubsAnime;\r\n    } catch (err) {\r\n      return Scraper._util.onError(err);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Start scraping from KAT.\r\n   * @returns {Anime[]} A list of all the scraped anime.\r\n   */\r\n  async _scrapeKATAnime() {\r\n    return asyncq.concatSeries(katAnimeProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const katProvider = new katAnime(provider.name, Scraper._debug);\r\n        const katAnimes = await katProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return katAnimes;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Start scraping from Nyaa.\r\n   * @returns {Anime[]} A list of all the scraped anime.\r\n   */\r\n  async _scrapeNyaaAnime() {\r\n    return asyncq.concatSeries(nyaaAnimeProviders, async provider => {\r\n      try {\r\n        Scraper._util.setStatus(`Scraping ${provider.name}`);\r\n        const nyaaProvider = new Nyaa(provider.name, Scraper._debug);\r\n        const nyaaAnimes = await nyaaProvider.search(provider);\r\n        logger.info(`${provider.name}: Done.`);\r\n        return nyaaAnimes;\r\n      } catch (err) {\r\n        return Scraper._util.onError(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  /** Initiate the scraping. */\r\n  scrape() {\r\n    Scraper._util.setLastUpdated();\r\n\r\n    asyncq.eachSeries([\r\n      this._scrapeEZTVShows,\r\n      this._scrapeExtraTorrentShows,\r\n      // this._scrapeKATShows,\r\n\r\n      this._scrapeExtraTorrentMovies,\r\n      // this._scrapeKATMovies,\r\n      this._scrapeYTSMovies,\r\n\r\n      this._scrapeExtraTorrentAnime,\r\n      this._scrapeHorribleSubsAnime,\r\n      // this._scrapeKATAnime,\r\n      this._scrapeNyaaAnime\r\n    ], scraper => scraper())\r\n      .then(() => Scraper._util.setStatus())\r\n      .then(() => asyncq.eachSeries(collections, collection => Scraper._util.exportCollection(collection)))\r\n      .catch(err => Scraper._util.onError(`Error while scraping: ${err}`));\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 258,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Scraper",
    "memberof": "src/scraper.js",
    "longname": "src/scraper.js~Scraper",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/scraper.js",
    "importStyle": "Scraper",
    "description": "Class for scraping movies and shows.",
    "lineNumber": 27,
    "interface": false
  },
  {
    "__docId__": 259,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#constructor",
    "access": null,
    "description": "Create a scraper object.",
    "lineNumber": 33,
    "params": [
      {
        "nullable": true,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "debug",
        "description": "Debug mode for extra output."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 260,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeExtraTorrentShows",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeExtraTorrentShows",
    "access": null,
    "description": "Start show scraping from ExtraTorrent.",
    "lineNumber": 51,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} A list of all the scraped shows."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of all the scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 261,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeEZTVShows",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeEZTVShows",
    "access": null,
    "description": "Start scraping from EZTV.",
    "lineNumber": 69,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} A list of all the scraped shows."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of all the scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 262,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeKATShows",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeKATShows",
    "access": null,
    "description": "Start show scraping from KAT.",
    "lineNumber": 85,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Show[]} A list of all the scraped shows."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Show[]"
      ],
      "spread": false,
      "description": "A list of all the scraped shows."
    },
    "generator": false
  },
  {
    "__docId__": 263,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeExtraTorrentMovies",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeExtraTorrentMovies",
    "access": null,
    "description": "Start movie scraping from ExtraTorrent.",
    "lineNumber": 103,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} A list of all the scraped movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of all the scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 264,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeKATMovies",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeKATMovies",
    "access": null,
    "description": "Start movie scraping from KAT.",
    "lineNumber": 121,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} A list of all the scraped movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of all the scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 265,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeYTSMovies",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeYTSMovies",
    "access": null,
    "description": "Start scraping from YTS.",
    "lineNumber": 139,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Movie[]} A list of all the scraped movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Movie[]"
      ],
      "spread": false,
      "description": "A list of all the scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 266,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeExtraTorrentAnime",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeExtraTorrentAnime",
    "access": null,
    "description": "Start anime scraping from ExtraTorrent.",
    "lineNumber": 155,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} A list of all the scraped movies."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of all the scraped movies."
    },
    "generator": false
  },
  {
    "__docId__": 267,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeHorribleSubsAnime",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeHorribleSubsAnime",
    "access": null,
    "description": "Start scraping from HorribleSubs.",
    "lineNumber": 173,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} A list of all the scraped anime."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of all the scraped anime."
    },
    "generator": false
  },
  {
    "__docId__": 268,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeKATAnime",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeKATAnime",
    "access": null,
    "description": "Start scraping from KAT.",
    "lineNumber": 189,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} A list of all the scraped anime."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of all the scraped anime."
    },
    "generator": false
  },
  {
    "__docId__": 269,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_scrapeNyaaAnime",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#_scrapeNyaaAnime",
    "access": null,
    "description": "Start scraping from Nyaa.",
    "lineNumber": 207,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Anime[]} A list of all the scraped anime."
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Anime[]"
      ],
      "spread": false,
      "description": "A list of all the scraped anime."
    },
    "generator": false
  },
  {
    "__docId__": 270,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "scrape",
    "memberof": "src/scraper.js~Scraper",
    "longname": "src/scraper.js~Scraper#scrape",
    "access": null,
    "description": "Initiate the scraping.",
    "lineNumber": 222,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 271,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/util.js",
    "memberof": null,
    "longname": "src/util.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "// Import the neccesary modules.\r\nimport childProcess from \"child_process\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\n\r\nimport { dbName, statusFile, tempDir, traktKey, updatedFile } from \"./config/constants\";\r\nimport { name } from \"../package.json\";\r\n\r\n/** Class holding the frequently used functions. */\r\nexport default class Util {\r\n\r\n  /**\r\n   * Create an emty file.\r\n   * @param {String} path - The path to the file to create.\r\n   */\r\n  _createEmptyFile(path) {\r\n    fs.createWriteStream(path).end();\r\n  };\r\n\r\n  /** Create the temporary directory. */\r\n  createTemp() {\r\n    if (!fs.existsSync(tempDir)) fs.mkdirSync(tempDir);\r\n    if (fs.existsSync(tempDir)) this._resetTemp();\r\n\r\n    this._createEmptyFile(path.join(tempDir, statusFile));\r\n    this._createEmptyFile(path.join(tempDir, updatedFile));\r\n  };\r\n\r\n  /**\r\n   * Execute a command from within the root folder.\r\n   * @param {String} cmd - The command to execute.\r\n   * @returns {Promise} - The output of the command.\r\n   */\r\n  executeCommand(cmd) {\r\n    return new Promise((resolve, reject) => {\r\n      childProcess.exec(cmd, {\r\n        cwd: __dirname\r\n      }, (err, stdout) => {\r\n        if (err) return reject(err);\r\n        return resolve(stdout.split(\"\\n\").join(\"\"));\r\n      });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Export a collection to a JSON file.\r\n   * @param {String} collection - The collection to export.\r\n   * @returns {Promise} - The output of the mongoexport command.\r\n   */\r\n  exportCollection(collection) {\r\n    const jsonFile = path.join(tempDir, `${collection}s.json`);\r\n    logger.info(`Exporting collection: '${collection}s', to: '${jsonFile}'`);\r\n\r\n    return this.executeCommand(`mongoexport --db ${dbName} --collection ${collection}s --out \"${jsonFile}\"`);\r\n  };\r\n\r\n  /**\r\n   * Import a json file to a collection.\r\n   * @param {String} collection - The collection to import.\r\n   * @param {String} jsonFile - The json file to import..\r\n   * @returns {Promise} - The output of the mongoimport command.\r\n   */\r\n  importCollection(collection, jsonFile) {\r\n    if (!path.isAbsolute(jsonFile)) jsonFile = path.join(process.cwd(), jsonFile);\r\n    if (!fs.existsSync(jsonFile)) throw new Error(`Error: no such file found for '${jsonFile}'`);\r\n\r\n    logger.info(`Importing collection: '${collection}', from: '${jsonFile}'`);\r\n\r\n    return this.executeCommand(`mongoimport --db ${dbName} --collection ${collection} --file \"${jsonFile}\" --upsert`);\r\n  };\r\n\r\n  /**\r\n   * Error logger function.\r\n   * @param {String} errorMessage - The error message you want to display.\r\n   * @returns {Error} - A new error with the given error message.\r\n   */\r\n  onError(errorMessage) {\r\n    logger.error(errorMessage);\r\n    return new Error(errorMessage);\r\n  };\r\n\r\n  /** Reset the default log file. */\r\n  resetLog() {\r\n    const logFile = path.join(tempDir, `${name}.log`);\r\n    if (fs.existsSync(logFile)) fs.unlinkSync(logFile);\r\n  };\r\n\r\n  /**\r\n   * Removes all the files in the temporary directory.\r\n   * @param {String} [tmpPath=popcorn-api/tmp] - The path to remove all the files within (Default is set in the `config/constants.js`).\r\n   */\r\n  _resetTemp(tmpPath = tempDir) {\r\n    const files = fs.readdirSync(tmpPath);\r\n    files.forEach(file => {\r\n      const stats = fs.statSync(path.join(tmpPath, file));\r\n      if (stats.isDirectory()) {\r\n        this.resetTemp(file);\r\n      } else if (stats.isFile()) {\r\n        fs.unlinkSync(path.join(tmpPath, file));\r\n      }\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Search for a key in an array of object.\r\n   * @param {String} key - The key to search for.\r\n   * @param {String} value - The value of the key to search for.\r\n   * @return {Object} - The object with the correct key-value pair.\r\n   */\r\n  search(key, value) {\r\n    return element => element[key] === value;\r\n  };\r\n\r\n  /**\r\n   * Updates the `lastUpdated.json` file.\r\n   * @param {String} [updated=Date.now()] - The epoch time when the API last started scraping.\r\n   */\r\n  setLastUpdated(updated = (Math.floor(new Date().getTime() / 1000))) {\r\n    fs.writeFile(path.join(tempDir, updatedFile), JSON.stringify({\r\n      updated\r\n    }));\r\n  };\r\n\r\n  /**\r\n   * Updates the `status.json` file.\r\n   * @param {String} [status=Idle] - The status which will be set to in the `status.json` file.\r\n   */\r\n  setStatus(status = \"Idle\") {\r\n    fs.writeFile(path.join(tempDir, statusFile), JSON.stringify({\r\n      status\r\n    }));\r\n  };\r\n\r\n};\r\n"
  },
  {
    "__docId__": 272,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Util",
    "memberof": "src/util.js",
    "longname": "src/util.js~Util",
    "access": null,
    "export": true,
    "importPath": "popcorn-api/src/util.js",
    "importStyle": "Util",
    "description": "Class holding the frequently used functions.",
    "lineNumber": 10,
    "interface": false
  },
  {
    "__docId__": 273,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_createEmptyFile",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#_createEmptyFile",
    "access": null,
    "description": "Create an emty file.",
    "lineNumber": 16,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": "The path to the file to create."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 274,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "createTemp",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#createTemp",
    "access": null,
    "description": "Create the temporary directory.",
    "lineNumber": 21,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 275,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "executeCommand",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#executeCommand",
    "access": null,
    "description": "Execute a command from within the root folder.",
    "lineNumber": 34,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - The output of the command."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "cmd",
        "description": "The command to execute."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "The output of the command."
    },
    "generator": false
  },
  {
    "__docId__": 276,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "exportCollection",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#exportCollection",
    "access": null,
    "description": "Export a collection to a JSON file.",
    "lineNumber": 50,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - The output of the mongoexport command."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "collection",
        "description": "The collection to export."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "The output of the mongoexport command."
    },
    "generator": false
  },
  {
    "__docId__": 277,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "importCollection",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#importCollection",
    "access": null,
    "description": "Import a json file to a collection.",
    "lineNumber": 63,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise} - The output of the mongoimport command."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "collection",
        "description": "The collection to import."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "jsonFile",
        "description": "The json file to import.."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": "The output of the mongoimport command."
    },
    "generator": false
  },
  {
    "__docId__": 278,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "onError",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#onError",
    "access": null,
    "description": "Error logger function.",
    "lineNumber": 77,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Error} - A new error with the given error message."
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "errorMessage",
        "description": "The error message you want to display."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Error"
      ],
      "spread": false,
      "description": "A new error with the given error message."
    },
    "generator": false
  },
  {
    "__docId__": 279,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "resetLog",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#resetLog",
    "access": null,
    "description": "Reset the default log file.",
    "lineNumber": 83,
    "params": [],
    "generator": false
  },
  {
    "__docId__": 280,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_resetTemp",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#_resetTemp",
    "access": null,
    "description": "Removes all the files in the temporary directory.",
    "lineNumber": 92,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "popcorn-api/tmp",
        "defaultRaw": "popcorn-api/tmp",
        "name": "tmpPath",
        "description": "The path to remove all the files within (Default is set in the `config/constants.js`)."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 281,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "search",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#search",
    "access": null,
    "description": "Search for a key in an array of object.",
    "lineNumber": 110,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": "The key to search for."
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": "The value of the key to search for."
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": "The object with the correct key-value pair."
    },
    "generator": false
  },
  {
    "__docId__": 282,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setLastUpdated",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#setLastUpdated",
    "access": null,
    "description": "Updates the `lastUpdated.json` file.",
    "lineNumber": 118,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "Date.now()",
        "defaultRaw": "Date.now()",
        "name": "updated",
        "description": "The epoch time when the API last started scraping."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 283,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "setStatus",
    "memberof": "src/util.js~Util",
    "longname": "src/util.js~Util#setStatus",
    "access": null,
    "description": "Updates the `status.json` file.",
    "lineNumber": 128,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "Idle",
        "defaultRaw": "Idle",
        "name": "status",
        "description": "The status which will be set to in the `status.json` file."
      }
    ],
    "generator": false
  },
  {
    "__docId__": 285,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Infinity",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 286,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~NaN",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 287,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~undefined",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 288,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~null",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 289,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 290,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~object",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 291,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 292,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~function",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 293,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 294,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~boolean",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 295,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Symbol",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 296,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Error",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 297,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~EvalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 298,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~InternalError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 299,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RangeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 300,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ReferenceError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 301,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~SyntaxError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 302,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~TypeError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 303,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~URIError",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 304,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 305,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~number",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 306,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Date",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 307,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~String",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 308,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~string",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 309,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RegExp",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 310,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 311,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 312,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 313,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8ClampedArray",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 314,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 315,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint16Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 316,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 317,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 318,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float32Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 319,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float64Array",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 320,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Map",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 321,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Set",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 322,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakMap",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 323,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakSet",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 324,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ArrayBuffer",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 325,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~DataView",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 326,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~JSON",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 327,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Promise",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 328,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Generator",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 329,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~GeneratorFunction",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 330,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Reflect",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 331,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Proxy",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 333,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~CanvasRenderingContext2D",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 334,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DocumentFragment",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~DocumentFragment",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 335,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Element",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Element",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Element",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 336,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Event",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Event",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Event",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 337,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Node",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Node",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Node",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 338,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NodeList",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/NodeList",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~NodeList",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 339,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "XMLHttpRequest",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~XMLHttpRequest",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 340,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "AudioContext",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/AudioContext",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~AudioContext",
    "access": null,
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 341,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/controllers/animes.js",
    "memberof": null,
    "longname": "test/controllers/animes.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import chai from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { expect } from \"chai\";\r\n\r\nimport Index from \"../../src/index\";\r\nimport { port } from \"../../src/config/constants\";\r\n\r\nchai.use(chaiHttp);\r\n\r\n/** @test {Animes} */\r\ndescribe(\"Animes:\", ()=> {\r\n\r\n  let page, anime;\r\n\r\n  before(() => {\r\n    page = 1;\r\n    anime = \"5646\";\r\n  });\r\n\r\n  /** @test {Animes#getAnimes} */\r\n  it(\"GET /animes\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/animes\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Animes#getPage} */\r\n  it(\"GET /animes/:page\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/animes/${page}`)\r\n      // .query()\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Animes#getAnime} */\r\n  it(\"GET /anime/:id\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/anime/${anime}`)\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Animes#getRandomAnime} */\r\n  it(\"GET /random/anime\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/random/anime\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n});\r\n"
  },
  {
    "__docId__": 342,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe0",
    "testId": 0,
    "memberof": "test/controllers/animes.js",
    "testDepth": 0,
    "longname": "test/controllers/animes.js~describe0",
    "access": null,
    "description": "Animes:",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Animes}"
      }
    ],
    "testTargets": [
      "Animes"
    ]
  },
  {
    "__docId__": 343,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it1",
    "testId": 1,
    "memberof": "test/controllers/animes.js~describe0",
    "testDepth": 1,
    "longname": "test/controllers/animes.js~describe0.it1",
    "access": null,
    "description": "GET /animes",
    "lineNumber": 21,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Animes#getAnimes}"
      }
    ],
    "testTargets": [
      "Animes#getAnimes"
    ]
  },
  {
    "__docId__": 344,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it2",
    "testId": 2,
    "memberof": "test/controllers/animes.js~describe0",
    "testDepth": 1,
    "longname": "test/controllers/animes.js~describe0.it2",
    "access": null,
    "description": "GET /animes/:page",
    "lineNumber": 32,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Animes#getPage}"
      }
    ],
    "testTargets": [
      "Animes#getPage"
    ]
  },
  {
    "__docId__": 345,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it3",
    "testId": 3,
    "memberof": "test/controllers/animes.js~describe0",
    "testDepth": 1,
    "longname": "test/controllers/animes.js~describe0.it3",
    "access": null,
    "description": "GET /anime/:id",
    "lineNumber": 44,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Animes#getAnime}"
      }
    ],
    "testTargets": [
      "Animes#getAnime"
    ]
  },
  {
    "__docId__": 346,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it4",
    "testId": 4,
    "memberof": "test/controllers/animes.js~describe0",
    "testDepth": 1,
    "longname": "test/controllers/animes.js~describe0.it4",
    "access": null,
    "description": "GET /random/anime",
    "lineNumber": 55,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Animes#getRandomAnime}"
      }
    ],
    "testTargets": [
      "Animes#getRandomAnime"
    ]
  },
  {
    "__docId__": 347,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/controllers/index.js",
    "memberof": null,
    "longname": "test/controllers/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import chai from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { expect } from \"chai\";\r\n\r\nimport Index from \"../../src/index\";\r\nimport { port } from \"../../src/config/constants\";\r\n\r\nchai.use(chaiHttp);\r\n\r\n/** @test {Index} */\r\ndescribe(\"Index:\", ()=> {\r\n\r\n  /** @test {Index#getIndex} */\r\n  it(\"GET /\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Index#getErrorLog} */\r\n  it(\"GET /logs/error\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/logs/error`)\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n});\r\n"
  },
  {
    "__docId__": 348,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe5",
    "testId": 5,
    "memberof": "test/controllers/index.js",
    "testDepth": 0,
    "longname": "test/controllers/index.js~describe5",
    "access": null,
    "description": "Index:",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Index}"
      }
    ],
    "testTargets": [
      "Index"
    ]
  },
  {
    "__docId__": 349,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it6",
    "testId": 6,
    "memberof": "test/controllers/index.js~describe5",
    "testDepth": 1,
    "longname": "test/controllers/index.js~describe5.it6",
    "access": null,
    "description": "GET /",
    "lineNumber": 14,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Index#getIndex}"
      }
    ],
    "testTargets": [
      "Index#getIndex"
    ]
  },
  {
    "__docId__": 350,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it7",
    "testId": 7,
    "memberof": "test/controllers/index.js~describe5",
    "testDepth": 1,
    "longname": "test/controllers/index.js~describe5.it7",
    "access": null,
    "description": "GET /logs/error",
    "lineNumber": 25,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Index#getErrorLog}"
      }
    ],
    "testTargets": [
      "Index#getErrorLog"
    ]
  },
  {
    "__docId__": 351,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/controllers/movies.js",
    "memberof": null,
    "longname": "test/controllers/movies.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import chai from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { expect } from \"chai\";\r\n\r\nimport Index from \"../../src/index\";\r\nimport { port } from \"../../src/config/constants\";\r\n\r\nchai.use(chaiHttp);\r\n\r\n/** @test {Movies} */\r\ndescribe(\"Movies:\", ()=> {\r\n\r\n  let page, movie;\r\n\r\n  before(() => {\r\n    page = 1;\r\n    movie = \"tt1375666\";\r\n  });\r\n\r\n  /** @test {Movies#getMovies} */\r\n  it(\"GET /movies\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/movies\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Movies#getPage} */\r\n  it(\"GET /movies/:page\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/movies/${page}`)\r\n      // .query()\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Movies#getMovie} */\r\n  it(\"GET /movie/:id\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/movie/${movie}`)\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Movies#getRandomMovie} */\r\n  it(\"GET /random/movie\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/random/movie\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n});\r\n"
  },
  {
    "__docId__": 352,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe8",
    "testId": 8,
    "memberof": "test/controllers/movies.js",
    "testDepth": 0,
    "longname": "test/controllers/movies.js~describe8",
    "access": null,
    "description": "Movies:",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Movies}"
      }
    ],
    "testTargets": [
      "Movies"
    ]
  },
  {
    "__docId__": 353,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it9",
    "testId": 9,
    "memberof": "test/controllers/movies.js~describe8",
    "testDepth": 1,
    "longname": "test/controllers/movies.js~describe8.it9",
    "access": null,
    "description": "GET /movies",
    "lineNumber": 21,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Movies#getMovies}"
      }
    ],
    "testTargets": [
      "Movies#getMovies"
    ]
  },
  {
    "__docId__": 354,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it10",
    "testId": 10,
    "memberof": "test/controllers/movies.js~describe8",
    "testDepth": 1,
    "longname": "test/controllers/movies.js~describe8.it10",
    "access": null,
    "description": "GET /movies/:page",
    "lineNumber": 32,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Movies#getPage}"
      }
    ],
    "testTargets": [
      "Movies#getPage"
    ]
  },
  {
    "__docId__": 355,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it11",
    "testId": 11,
    "memberof": "test/controllers/movies.js~describe8",
    "testDepth": 1,
    "longname": "test/controllers/movies.js~describe8.it11",
    "access": null,
    "description": "GET /movie/:id",
    "lineNumber": 44,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Movies#getMovie}"
      }
    ],
    "testTargets": [
      "Movies#getMovie"
    ]
  },
  {
    "__docId__": 356,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it12",
    "testId": 12,
    "memberof": "test/controllers/movies.js~describe8",
    "testDepth": 1,
    "longname": "test/controllers/movies.js~describe8.it12",
    "access": null,
    "description": "GET /random/movie",
    "lineNumber": 55,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Movies#getRandomMovie}"
      }
    ],
    "testTargets": [
      "Movies#getRandomMovie"
    ]
  },
  {
    "__docId__": 357,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/controllers/shows.js",
    "memberof": null,
    "longname": "test/controllers/shows.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "import chai from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { expect } from \"chai\";\r\n\r\nimport Index from \"../../src/index\";\r\nimport { port } from \"../../src/config/constants\";\r\n\r\nchai.use(chaiHttp);\r\n\r\n/** @test {Shows} */\r\ndescribe(\"Shows:\", () => {\r\n\r\n  let page, show;\r\n\r\n  before(() => {\r\n    page = 1;\r\n    show = \"tt0944947\";\r\n  });\r\n\r\n  /** @test {Shows#getShows} */\r\n  it(\"GET /shows\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/shows\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Shows#getPage} */\r\n  it(\"GET /shows/:page\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/shows/${page}`)\r\n      .query({\r\n        sort: \"seeds\",\r\n        genre: \"All\",\r\n        order: -1\r\n      })\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Shows#getShow} */\r\n  it(\"GET /show/:id\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(`/show/${show}`)\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n  /** @test {Shows#getRandomShow} */\r\n  it(\"GET /random/show\", done => {\r\n    chai.request(`http://localhost:${port}`)\r\n      .get(\"/random/show\")\r\n      .then(res => {\r\n        expect(res).to.have.status(200);\r\n        expect(res).to.be.json;\r\n        done();\r\n      }).catch(err => done(err));\r\n  });\r\n\r\n});\r\n"
  },
  {
    "__docId__": 358,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe13",
    "testId": 13,
    "memberof": "test/controllers/shows.js",
    "testDepth": 0,
    "longname": "test/controllers/shows.js~describe13",
    "access": null,
    "description": "Shows:",
    "lineNumber": 11,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Shows}"
      }
    ],
    "testTargets": [
      "Shows"
    ]
  },
  {
    "__docId__": 359,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it14",
    "testId": 14,
    "memberof": "test/controllers/shows.js~describe13",
    "testDepth": 1,
    "longname": "test/controllers/shows.js~describe13.it14",
    "access": null,
    "description": "GET /shows",
    "lineNumber": 21,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Shows#getShows}"
      }
    ],
    "testTargets": [
      "Shows#getShows"
    ]
  },
  {
    "__docId__": 360,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it15",
    "testId": 15,
    "memberof": "test/controllers/shows.js~describe13",
    "testDepth": 1,
    "longname": "test/controllers/shows.js~describe13.it15",
    "access": null,
    "description": "GET /shows/:page",
    "lineNumber": 32,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Shows#getPage}"
      }
    ],
    "testTargets": [
      "Shows#getPage"
    ]
  },
  {
    "__docId__": 361,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it16",
    "testId": 16,
    "memberof": "test/controllers/shows.js~describe13",
    "testDepth": 1,
    "longname": "test/controllers/shows.js~describe13.it16",
    "access": null,
    "description": "GET /show/:id",
    "lineNumber": 48,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Shows#getShow}"
      }
    ],
    "testTargets": [
      "Shows#getShow"
    ]
  },
  {
    "__docId__": 362,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it17",
    "testId": 17,
    "memberof": "test/controllers/shows.js~describe13",
    "testDepth": 1,
    "longname": "test/controllers/shows.js~describe13.it17",
    "access": null,
    "description": "GET /random/show",
    "lineNumber": 59,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Shows#getRandomShow}"
      }
    ],
    "testTargets": [
      "Shows#getRandomShow"
    ]
  }
]